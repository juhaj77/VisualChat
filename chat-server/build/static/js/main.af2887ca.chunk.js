(this["webpackJsonpchat-client"]=this["webpackJsonpchat-client"]||[]).push([[0],{226:function(e,t,n){e.exports=n.p+"static/media/Spinner.5e9077ee.svg"},245:function(e,t,n){e.exports=n(431)},272:function(e,t,n){},273:function(e,t,n){e.exports=n.p+"static/media/visualchat.c935913a.png"},392:function(e,t,n){},393:function(e,t,n){},394:function(e,t,n){},397:function(e,t,n){},398:function(e,t,n){},428:function(e,t){},431:function(e,t,n){"use strict";n.r(t);var a=n(3),r=n.n(a),c=n(0),o=n.n(c),i=n(29),l=n.n(i),s=n(10),u=n(446),d=n(35),m=n(15),f=function(e){var t=Object(c.useState)(""),n=Object(s.a)(t,2),a=n[0],r=n[1];return{input:{type:e,value:a,onChange:function(e){r(e.target.value)}},reset:function(){r("")}}},p=n(28),g=n(26),b=n.n(g),E=function(e){return r.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.a.awrap(b.a.get("".concat("/api/users"),{headers:{Authorization:e.token}}));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}))},h=function(e){var t;return r.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return t=null,n.prev=1,n.next=4,r.a.awrap(b.a.post("".concat("/api/users","/signup"),e));case 4:return t=n.sent,n.abrupt("return",t.data);case 8:return n.prev=8,n.t0=n.catch(1),n.abrupt("return",t);case 11:case"end":return n.stop()}}),null,null,[[1,8]])},v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_USERS":return t.data.data.users;case"ADD_USER":return[].concat(Object(p.a)(e),[t.data]);default:return e}},y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_GAPI":return t.data;default:return e}},O=n(20),k=n(23),N=function(e){var t=e.message,n=e.clear,a=Object(c.useState)(t),r=Object(s.a)(a,2),i=r[0],l=r[1],u=Object(c.useState)(!1),d=Object(s.a)(u,2),m=d[0],f=d[1],p=Object(c.useRef)(-1),g=Object(c.useRef)(-1);return Object(c.useEffect)((function(){return t?(f(!0),l(t),p.current=setTimeout((function(){f(!1),g.current=setTimeout((function(){n()}),800)}),5e3)):f(!1),function(){clearTimeout(p.current)}}),[t,n]),Object(k.b)(m,null,{from:{opacity:0},enter:{opacity:1},leave:{opacity:0},config:{duration:250}}).map((function(e){var t=e.item,n=e.key,a=e.props;return t&&o.a.createElement(k.a.div,{key:n,style:Object(O.a)({color:i.color,backgroundColor:"black",border:"1px solid ".concat(i.color),borderRadius:"6px",padding:"1em",fontSize:"1.2em",margin:"0em"},a)},i.content)}))},S=function(e){var t;return r.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,r.a.awrap(b.a.post("".concat("/api/users","/login"),e));case 3:return t=n.sent,n.abrupt("return",t.data);case 7:return n.prev=7,n.t0=n.catch(0),n.abrupt("return",null);case 10:case"end":return n.stop()}}),null,null,[[0,7]])},j=function(e){return window.localStorage.removeItem("loggedChatUser"),{type:"USER_LOGOUT",data:e}},x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USER":return t.data;case"USER_LOGOUT":return null;default:return e}},T=n(30),w=n(447),I=n(453),C=n(109);n(272);function _(){var e=Object(d.a)(["\n    animation-name: backGroundAnim;\n    animation-timing-function:ease-in;\n    animation-duration:0.05s;\n    width:100vw;\n    height:100vh;\n  @keyframes backGroundAnim {\n    from {background-color:black;}\n    to {background-color:rgba(0,0,0,0);}\n  }"]);return _=function(){return e},e}var D=n(273),A=Object(m.b)((function(e){return{user:e.loggedUser,gapi:e.gapi}}),{setUser:function(e){return function(t){var n;return r.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,r.a.awrap(S(e));case 2:if(n=a.sent){a.next=5;break}throw Error("invalid username or password");case 5:return window.localStorage.setItem("loggedChatUser",JSON.stringify(n)),a.next=8,r.a.awrap(t({type:"SET_USER",data:n}));case 8:case"end":return a.stop()}}))}},clearUser:j,resetUser:function(e){return{type:"SET_USER",data:e}},signUp:function(e){return function(t){var n;return r.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,r.a.awrap(h(e));case 2:if(n=a.sent){a.next=5;break}throw Error("username is in use");case 5:t({type:"ADD_USER",data:n});case 6:case"end":return a.stop()}}))}},setGapi:function(e){return function(t){t({type:"SET_GAPI",data:e})}}})((function(e){var t=f("text"),n=f("password"),a=Object(c.useState)(!1),i=Object(s.a)(a,2),l=i[0],u=i[1],d=Object(c.useState)(null),m=Object(s.a)(d,2),p=m[0],g=m[1],b=Object(c.useState)(!1),E=Object(s.a)(b,2),h=E[0],v=E[1];Object(c.useEffect)((function(){!function(){var t,n;r.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:if(!(t=window.localStorage.getItem("loggedChatUser"))){a.next=13;break}return a.prev=2,a.next=5,r.a.awrap(JSON.parse(t));case 5:return n=a.sent,a.next=8,r.a.awrap(e.resetUser(n));case 8:a.next=13;break;case 10:a.prev=10,a.t0=a.catch(2),console.log(a.t0.name);case 13:case"end":return a.stop()}}),null,null,[[2,10]])}()}),[]),Object(c.useEffect)((function(){var e=new Image;e.src=D,e.onload=function(){v(!0)}}),[]);var y=e.theme,O=Object(c.useState)(null),S=Object(s.a)(O,2),j=S[0],x=S[1],A="371216924606-rgdtfalqj9tklp61rkv27d9ii14cenbe.apps.googleusercontent.com";Object(c.useEffect)((function(){!function(){var t;r.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,r.a.awrap(Object(C.b)());case 2:t=n.sent,e.setGapi(t);case 4:case"end":return n.stop()}}))}()}),[e.gapi]),Object(c.useEffect)((function(){if(e.gapi){!function(){var t;r.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,r.a.awrap(Object(C.a)(e.gapi,A,""));case 2:(t=n.sent).isSignedIn.get()?U(t.currentUser.get()):B(document.getElementById("customBtn"),t);case 4:case"end":return n.stop()}}))}()}}),[e.gapi]),Object(c.useEffect)((function(){if(e.gapi&&!j){!function(){var t;r.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,r.a.awrap(Object(C.a)(e.gapi,A,""));case 2:t=n.sent,B(document.getElementById("customBtn"),t);case 4:case"end":return n.stop()}}))}()}}),[j,e.gapi,h]);var U=function(t){var n=t.getBasicProfile().getName(),a=t.getBasicProfile().getImageUrl(),r=t.getBasicProfile().getEmail(),c=t.getBasicProfile().getId();x({name:n,profileImg:a,email:r,id:c}),e.setUser({idToken:t.xc.id_token})},B=function(e,t){t.attachClickHandler(e,{},(function(e){U(e)}),(function(e){console.log(JSON.stringify(e))}))},R=Object(k.b)((!window.localStorage.getItem("loggedChatUser")||!e.user)&&h,null,{from:{opacity:0},enter:{opacity:1},leave:{opacity:0}}),M=function(e,a){var c;return r.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:if(e.preventDefault(),o.prev=1,t.input.value&&!(t.input.value.trim().length<3)){o.next=5;break}return g({content:"valid username is required (min length is 3)",color:"red"}),o.abrupt("return");case 5:if(n.input.value&&!(n.input.value.length<3)){o.next=8;break}return g({content:"valid password is required (min length is 3)",color:"red"}),o.abrupt("return");case 8:return c={username:t.input.value.trim(),password:n.input.value},o.next=11,r.a.awrap(a(c));case 11:o.next=17;break;case 13:return o.prev=13,o.t0=o.catch(1),g({content:o.t0.message,color:"red"}),o.abrupt("return");case 17:if(!l){o.next=20;break}return g({content:"account created for user: ".concat(t.input.value,"!"),color:"green"}),o.abrupt("return");case 20:g(null);case 21:case"end":return o.stop()}}),null,null,[[1,13]])},L=function(t){M(t,e.setUser)},H=function(a){return r.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,r.a.awrap(M(a,e.signUp));case 2:u(!1),t.reset(),n.reset();case 5:case"end":return c.stop()}}))},z=function(e,a){return o.a.createElement(w.a,{inverted:!0,style:{paddingTop:"2em",paddingBottom:"1em"},onSubmit:a},o.a.createElement(w.a.Input,Object.assign({icon:"user",iconPosition:"left",label:"Username",placeholder:"Username"},t.input)),o.a.createElement(w.a.Input,Object.assign({icon:"lock",iconPosition:"left",label:"Password",style:{color:"#b29966",backgroundColor:"black",border:"solid 1px #b29966",marginBottom:"0.5em"}},n.input)),o.a.createElement("button",{className:"myButton "+y,autoFocus:!0,type:"submit"},e))},P=T.a.div(_());return h?R.map((function(e){var t=e.item,n=e.key,a=e.props;return t&&o.a.createElement(k.a.div,{key:n,style:a},o.a.createElement("div",{className:"login"},o.a.createElement("img",{style:{width:"100%",paddingTop:"7vh"},src:D}),o.a.createElement("div",{className:"loginsegment "+y},!l&&o.a.createElement("div",null,o.a.createElement(I.a,{columns:3,style:{paddingLeft:"3em",paddingRight:"3em",paddingBottom:"2em"},relaxed:"very",stackable:!0},o.a.createElement(I.a.Column,null,z("Login",L)),o.a.createElement(I.a.Column,{verticalAlign:"middle"},o.a.createElement("button",{className:"myButton "+y,onClick:function(){return u(!0)},type:"button"},"Sign up")),o.a.createElement(I.a.Column,{verticalAlign:"middle"},o.a.createElement("button",{id:"customBtn",className:"myButton "+y,style:{whiteSpace:"nowrap"}},"Google Login")))),l&&z("Sign Up",H)),o.a.createElement(N,{message:p,clear:function(){return g(null)}})))})):o.a.createElement(P,null)})),U=n(224),B=function(e,t){var n;return r.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,r.a.awrap(b.a.get("".concat("/api/channels","/").concat(e),{headers:{Authorization:t.token}}));case 2:return n=a.sent,a.abrupt("return",n.data);case 4:case"end":return a.stop()}}))},R=function(){return{type:"REMOVE_ANIMATION"}},M=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INIT_MESSAGES":return t.data;case"SOCKET_MESSAGE_RECEIVED":var n=t.data.messages.slice();return n[n.length-1]="NEW_MESSAGE:".concat(n[n.length-1]),n;case"SEND_WEBSOCKET_MESSAGE":return[].concat(Object(p.a)(e),[t.data.message]);case"REMOVE_ANIMATION":return e.map((function(e){return"NEW_MESSAGE"==e.split(":",1)?e.replace("NEW_MESSAGE:",""):e}));case"NEW_FEED":return[];default:return e}},L=(n(392),n(53),Object(m.b)(null,{removeAnimation:R})((function(e){var t,n=e.message.split(":",1),a=e.message.replace(n+":",""),r=!1;t="dark"===e.theme?"#e9d396":"#96bae9";"NEW_MESSAGE"==n&&(n=a.split(":",1),a=a.replace(n+":",""),r=!0);var c,i=a.split(";",1),l=void 0;"Invalid Date"!=function(e){try{var t=e.slice(0,4),n=e.slice(5,7),a=e.slice(8,10),r=e.slice(11,13),c=e.slice(14,16),o=e.slice(17,19);return new Date(t,n,a,r,c,o,0)}catch(i){return}}(i[0])&&(c=i[0],l=c.slice(8,10)+"."+c.slice(5,7)+". "+c.slice(11,16),a=a.replace(i[0]+";",""));var s,u={marginRight:"0.7rem",marginLeft:"0.3rem",marginBottom:"0.5rem",backgroundColor:"transparent",display:"inline-block",float:"left"};"dark"===e.theme?(s="#e5ddcc",u.color="#e5ddcc"):(s="#ccd4e5",u.color="#ccd4e5");var d={marginRight:"0.7rem",marginLeft:"0.3rem",float:"left",lineHeight:"1em"};e.user==n&&(u.textAlign="right",u.float="right",d.textAlign="right",d.float="right");return o.a.createElement("div",{style:{marginBottom:"0px"}},o.a.createElement("div",{style:{clear:"left"}}),o.a.createElement("div",{style:d},l?o.a.createElement(o.a.Fragment,null,o.a.createElement("span",{className:"prevent-select",style:{color:"white",marginBottom:"0px"}},n),o.a.createElement("span",{className:"prevent-select",style:{color:s,fontSize:"10px",marginBottom:"0px"}},"\xa0\xa0",l),o.a.createElement("br",null)):o.a.createElement(o.a.Fragment,null,o.a.createElement("span",{style:{color:"white",fontWeight:"500",marginBottom:"0px"}},n),o.a.createElement("br",null))),o.a.createElement("div",{style:{clear:"right"}}),o.a.createElement("div",{style:{clear:"left"}}),o.a.createElement("div",{style:u},r?o.a.createElement("div",{className:"mymessage",onAnimationEnd:e.removeAnimation},a):o.a.createElement("div",{style:{color:t,padding:"8px 12px 8px 12px",borderRadius:"9px",backgroundColor:"rgba(5, 5, 5,0.5)"}},a)),o.a.createElement("div",{style:{clear:"right"}}))}))),H=(n(54),Object(m.b)((function(e){return{user:e.loggedUser,messages:e.messages}}),null)((function(e){return e.user?o.a.createElement("div",{className:"scrollable "+e.theme},o.a.createElement(U.a,null,e.messages.map((function(t,n){return o.a.createElement(L,{theme:e.theme,index:e.messages.length-n,key:n,message:t,user:e.user.username})})))):o.a.createElement("div",null)}))),z=Object(m.b)((function(e){return{user:e.loggedUser,channel:e.channel}}),{addMsg:function(e,t,n){return function(a){var r=new Date;a({type:"SEND_WEBSOCKET_MESSAGE",data:{message:"".concat(t.username,":").concat(new Date(r.getTime()-60*r.getTimezoneOffset()*1e3).toISOString(),";").concat(e),channel:n,token:t.token}})}},removeAnimation:R})((function(e){var t=Object(c.useState)(null),n=Object(s.a)(t,2),a=n[0],i=n[1],l=f("text");Object(c.useEffect)((function(){i(null)}),[e.channel]),Object(c.useEffect)((function(){return function(){return i(null)}}),[]);var u=function(){var t;return r.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(t=l.input.value,""==e.channel){n.next=9;break}return i(null),n.next=5,r.a.awrap(e.removeAnimation());case 5:return n.next=7,r.a.awrap(e.addMsg(t,e.user,e.channel.id));case 7:n.next=10;break;case 9:i({content:"select channel first",color:"red"});case 10:l.reset();case 11:case"end":return n.stop()}}))};return e.user?o.a.createElement("div",{style:{background:"black",border:"none"}},o.a.createElement("input",Object.assign({placeholder:"write your msg here",className:"msginput "+e.theme,onKeyPress:function(e){"Enter"===e.key&&u()}},l.input)),o.a.createElement("button",{className:"hoverbutton "+e.theme,style:{padding:"0.2em 0 0.15em 0",marginTop:"0px",fontFamily:"Lato,Helvetica Neue,Arial,Helvetica,sans-serif",fontWeight:"700",width:"20%"},onClick:u},"send"),o.a.createElement(N,{message:a,clear:function(){return i(null)}})):o.a.createElement("div",null)})),P=function(e){return r.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.a.awrap(b.a.get("".concat("/api/channels","/user/").concat(e.userId),{headers:{Authorization:e.token}}));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}))},W=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_CHANNELS":return t.data.data.channels;case"SOCKET_ADD_CHANNEL":return e.concat(t.data);default:return e}},G=function(e,t){var n;return r.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,r.a.awrap(b.a.get("".concat("/api/channels","/").concat(e,"/notes"),{headers:{Authorization:t.token}}));case 2:return n=a.sent,a.abrupt("return",n.data);case 4:case"end":return a.stop()}}))},K=function(e,t,n){return{type:"SET_NOTE",data:{note:e,channel:t,token:n.token}}},Y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INIT_NOTES":return t.data;case"SET_NOTE":var n=t.data.note;return e.map((function(e){return n.id===e.id?n:e}));case"SOCKET_ADD_NOTE":return e.concat(Object(O.a)({},t.data,{show:!0}));case"SOCKET_SET_NOTE":return e.map((function(e){return t.data.id===e.id?t.data:e}));case"SOCKET_DELETE_NOTE":return e.map((function(e){return e.id===t.data?Object(O.a)({},e,{show:!1}):e}));case"INIT_EMPTY":return[];default:return e}},F=function(e,t){var n;return r.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,r.a.awrap(b.a.get("".concat("/api/channels","/").concat(e,"/pictures"),{headers:{Authorization:t.token}}));case 2:return n=a.sent,a.abrupt("return",n.data);case 4:case"end":return a.stop()}}))},X=function(e,t,n){return{type:"ADD_PICTURE",data:{picture:e,id:t,token:n.token}}},V=function(e,t){return{type:"CALLBACK",data:{id:e,token:t.token}}},q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INIT_PICTURES":return t.data;case"ADD_PICTURE":return e.concat(t.data.picture.data);case"INIT_EMPTY":return[];case"CALLBACK":default:return e}},J=function(e,t,n){return function(a){a({type:"SET_CHANNEL",data:{id:e,name:t,user:n.username,token:n.token}})}},$=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_CHANNEL":return t.data;default:return e}},Q=function(e,t){var n;return r.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,r.a.awrap(b.a.get("".concat("/api/channels","/").concat(e,"/htmls"),{headers:{Authorization:t.token}}));case 2:return n=a.sent,a.abrupt("return",n.data);case 4:case"end":return a.stop()}}))},Z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INIT_HTMLS":return t.data;case"SET_HTML":var n=t.data.html;return e.map((function(e){return n.id===e.id?n:e}));case"SOCKET_ADD_HTML":return e.concat(Object(O.a)({},t.data));case"SOCKET_SET_HTML":return e.map((function(e){return t.data.id===e.id?t.data:e}));case"SOCKET_DELETE_HTML":return e.filter((function(e){return e.id!==t.data}));case"INIT_EMPTY":return[];default:return e}},ee=Object(m.b)((function(e){return{channels:e.channels,channel:e.channel,user:e.loggedUser}}),{initializeChannels:function(e){return function(t){var n;return r.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,r.a.awrap(P(e));case 2:return n=a.sent,a.next=5,r.a.awrap(t({type:"GET_CHANNELS",data:n}));case 5:case"end":return a.stop()}}))}},setChannel:J,initializeMessages:function(e,t){return function(n){var a;return r.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,r.a.awrap(B(e,t));case 2:return a=c.sent,c.next=5,r.a.awrap(n({type:"INIT_MESSAGES",data:a}));case 5:case"end":return c.stop()}}))}},initializePictures:function(e,t){return function(n){var a;return r.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,r.a.awrap(F(e,t));case 2:a=c.sent,n({type:"INIT_PICTURES",data:a});case 4:case"end":return c.stop()}}))}},initializeNotes:function(e,t){return function(n){var a,c;return r.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,r.a.awrap(G(e,t));case 2:a=o.sent,c=a.map((function(e){return Object(O.a)({},e,{show:!0})})),n({type:"INIT_NOTES",data:c});case 5:case"end":return o.stop()}}))}},initializeHtmls:function(e,t){return function(n){var a;return r.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,r.a.awrap(Q(e,t));case 2:a=c.sent,n({type:"INIT_HTMLS",data:a});case 4:case"end":return c.stop()}}))}}})((function(e){Object(c.useEffect)((function(){e.initializeChannels(e.user)}),[]);return o.a.createElement("div",null,o.a.createElement("select",{onChange:function(t){var n,a,c;return r.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:if(t.preventDefault(),n=t.target.selectedIndex,a=t.target.childNodes[n].value,0===n||a===e.channel.name){o.next=15;break}return c=e.channels.find((function(e){return e.name==a})).id,o.next=7,r.a.awrap(e.setChannel(c,a,e.user));case 7:return o.next=9,r.a.awrap(e.initializeMessages(c,e.user));case 9:return o.next=11,r.a.awrap(e.initializeNotes(c,e.user));case 11:return o.next=13,r.a.awrap(e.initializePictures(c,e.user));case 13:return o.next=15,r.a.awrap(e.initializeHtmls(c,e.user));case 15:case"end":return o.stop()}}))},className:"dropdown2 "+e.theme},[o.a.createElement("option",{key:"-1",disabled:!0,selected:!0,hidden:!0},"select channel...")].concat(Object(p.a)(e.channels.map((function(e,t){return o.a.createElement("option",{value:e.name,key:t},e.name)}))))))})),te=(n(393),Object(m.b)((function(e){return{user:e.loggedUser}}))((function(e){return Object(c.useEffect)((function(){"light"===e.theme&&(document.getElementById("themeselector").checked=!0)})),o.a.createElement("div",null,o.a.createElement("div",{className:"channelpanel "+e.theme},o.a.createElement("table",{style:{width:"100%",borderTop:"1px solid #443922"}},o.a.createElement("tbody",null,o.a.createElement("tr",null,o.a.createElement("td",{className:"tdchannel"},o.a.createElement("div",{className:"prevent-select channel "+e.theme},"CHANNEL")),o.a.createElement("td",{className:"tdchannel2"},o.a.createElement("div",{className:"prevent-select create "+e.theme},"create new channel"),o.a.createElement("div",{style:{marginLeft:"0.5em",display:"inline"}},o.a.createElement("button",{className:"hoverbutton "+e.theme,style:{fontFamily:"Lato,Helvetica Neue,Arial,Helvetica,sans-serif",fontWeight:"700"},onClick:function(){e.setChat(!1)}},"create"))))))),o.a.createElement(ee,{theme:e.theme,user:e.user}),o.a.createElement(H,{theme:e.theme}),o.a.createElement(z,{theme:e.theme}),o.a.createElement("div",{className:"themeselect "+e.theme},o.a.createElement("table",{style:{float:"right",height:"18px",paddingTop:"1em"}},o.a.createElement("tbody",null,o.a.createElement("tr",{style:{lineHeight:"18px",height:"18px"}},o.a.createElement("td",{className:"prevent-select",style:{width:"5em",float:"left"}},"theme"),o.a.createElement("td",{className:"prevent-select"},"dark"),o.a.createElement("td",{style:{padding:"0 .5em 0 .5em"}},o.a.createElement("label",{className:"switch"},o.a.createElement("input",{id:"themeselector",type:"checkbox",onChange:function(t){t.target.checked?e.setTheme("light"):e.setTheme("dark")}}),o.a.createElement("span",{className:"slider round"}))),o.a.createElement("td",{className:"prevent-select"},"light"))))))}))),ne=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_ERROR":return t.data;default:return e}},ae=n(444),re=n(450),ce=Object(m.b)((function(e){return{user:e.loggedUser,users:e.users,channels:e.channels,error:e.error}}),{initializeUsers:function(e){return function(t){var n;return r.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,r.a.awrap(E(e));case 2:n=a.sent,t({type:"GET_USERS",data:n});case 4:case"end":return a.stop()}}))}},createChannel:function(e,t,n){return function(a){a({type:"CREATE_CHANNEL",data:{name:e,users:t,token:n.token}})}},setError:function(e){return function(t){t({type:"SET_ERROR",data:e})}},setChannel:J,newFeed:function(){return{type:"NEW_FEED"}},initEmpty:function(){return{type:"INIT_EMPTY"}},initEmptyPictures:function(){return{type:"INIT_EMPTY"}},initEmptyHtmls:function(){return{type:"INIT_EMPTY"}}})((function(e){var t=Object(c.useState)([]),n=Object(s.a)(t,2),a=n[0],i=n[1],l=f("text"),u=Object(c.useState)(null),d=Object(s.a)(u,2),m=d[0],g=d[1],b=Object(c.useState)(e.channels.length),E=Object(s.a)(b,2),h=E[0],v=E[1],y=function(){g(null),e.setError(null)};Object(c.useEffect)((function(){e.error&&g({content:e.error.message,color:"red"})}),[e.error]),Object(c.useEffect)((function(){if(e.user&&e.initializeUsers(e.user),h<e.channels.length){v(e.channels.length);!function(){var t;r.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,r.a.awrap(e.channels.find((function(e){return e.name===l.input.value.trim()})).id);case 2:return t=n.sent,n.next=5,r.a.awrap(e.setChannel(t,l.input.value.trim(),e.user));case 5:return n.next=7,r.a.awrap(e.newFeed());case 7:return n.next=9,r.a.awrap(e.initEmpty());case 9:return n.next=11,r.a.awrap(e.initEmptyPictures());case 11:return n.next=13,r.a.awrap(e.initEmptyHtmls());case 13:y();case 14:case"end":return n.stop()}}))}(),e.setChat(!0)}return function(){y()}}),[e.channels]);return e.users?o.a.createElement("div",{style:{textAlign:"center"}},o.a.createElement(w.a,{className:"create-channel-form "+e.theme},o.a.createElement(w.a.Field,{style:{width:"80%",margin:"auto"}},o.a.createElement("div",{className:"create-channel-input "+e.theme,style:{fontWeight:"bold",paddingBottom:"0.3em"}},"Name"),o.a.createElement(ae.a,Object.assign({placeholder:"channel name"},l.input))),o.a.createElement("div",{style:{width:"80%",margin:"auto"}},o.a.createElement("div",{className:"create-channel-input "+e.theme,style:{fontWeight:"bold",paddingBottom:"0.3em"}},"Users"),o.a.createElement(re.a,{label:"Users",placeholder:"users",fluid:!0,multiple:!0,search:!0,selection:!0,options:e.users.filter((function(t){return t.id!==e.user.userId})).map((function(e){return{key:e.id,text:e.username,value:e.id}})),onChange:function(e,t){e.preventDefault(),i(t.value)}})),o.a.createElement("div",{style:{margin:"auto",textAlign:"center"}},o.a.createElement("button",{className:"create-channel-button hoverbutton "+e.theme,type:"button",onClick:function(t){var n;return r.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:if(t.preventDefault(),n=l.input.value.trim(),!(a.length>0&&""!==n)){c.next=10;break}if(!e.channels.find((function(e){return e.name===n}))){c.next=6;break}return g({content:"dublicate channel name",color:"red"}),c.abrupt("return");case 6:return c.next=8,r.a.awrap(e.createChannel(n,[].concat(Object(p.a)(a),[e.user.userId]),e.user));case 8:c.next=11;break;case 10:g({content:"users or name missing",color:"red"});case 11:case"end":return c.stop()}}))}},"create"),o.a.createElement("button",{className:"create-channel-button hoverbutton "+e.theme,type:"button",style:{marginLeft:"1.4em"},onClick:function(){e.setChat(!0)}},"cancel"))),o.a.createElement("div",{style:{margin:"auto",width:"80%",marginTop:"2em"}},o.a.createElement(N,{message:m,clear:y}))):o.a.createElement("div",null)})),oe=n(452),ie=n(451),le=new Map([["#ffffcc",{background:"linear-gradient(20deg,#756b57,#a89e8a)",color:"black",fontWeight:"700"}],["#ffcccc",{background:"linear-gradient(20deg,#77633c,#b29966)",color:"black",fontWeight:"700"}],["#ccffff",{background:"linear-gradient(20deg,#221a11,#664d33)",color:"#e9d396",fontWeight:"700"}],["#99ffcc",{background:"linear-gradient(20deg,#6b5147,#a38175)",color:"black",fontWeight:"700"}],["#ffccff",{background:"linear-gradient(20deg,#634136,#a66c59)",color:"black",fontWeight:"700"}],["#80ffff",{background:"linear-gradient(20deg,#240f0f,#6b2e2e)",color:"#e9d396",fontWeight:"700"}],["#ff99c2",{background:"linear-gradient(20deg,#798086,#afb3b6)",color:"black",fontWeight:"700"}],["#99ff99",{background:"linear-gradient(20deg,#3d4043,#6d7378)",color:"black",fontWeight:"700"}],["#ff99ff",{background:"linear-gradient(20deg,#272428,#5c555e)",color:"#e9d396",fontWeight:"700"}]]),se=new Map([["#ffffcc",{background:"linear-gradient(20deg,#7ca1de,#b3d0ff)",color:"black",fontWeight:"700"}],["#ffcccc",{background:"linear-gradient(20deg,#8980d9,#bbb3ff)",color:"black",fontWeight:"700"}],["#ccffff",{background:"linear-gradient(20deg,#62bdbb,#bffffe)",color:"black",fontWeight:"700"}],["#99ffcc",{background:"linear-gradient(20deg,#5155cf,#8084ff)",color:"black",fontWeight:"700"}],["#ffccff",{background:"linear-gradient(20deg,#b58d53,#ffd599)",color:"black",fontWeight:"700"}],["#80ffff",{background:"linear-gradient(20deg,#a34c00,#ff9900)",color:"black",fontWeight:"700"}],["#ff99c2",{background:"linear-gradient(20deg,#bdbdbd,#d6d6d6)",color:"black",fontWeight:"700"}],["#99ff99",{background:"linear-gradient(20deg,#798086,#afb3b6)",color:"black",fontWeight:"700"}],["#ff99ff",{background:"linear-gradient(20deg,#272428,#5c555e)",color:"#e9d396",fontWeight:"700"}]]),ue=(n(394),Object(m.b)((function(e){return{user:e.loggedUser,channel:e.channel,notes:e.notes}}),{setNote:K})((function(e){var t=Object(c.useState)(e.content),n=Object(s.a)(t,2),a=n[0],i=n[1],l=Object(c.useState)(e),u=Object(s.a)(l,2),d=u[0],m=u[1],f=Object(c.useState)(e.show),p=Object(s.a)(f,2),g=p[0],b=p[1],E=Object(c.useState)(le),h=Object(s.a)(E,2),v=h[0],y=h[1];Object(c.useEffect)((function(){i(e.content)}),[e.content]),Object(c.useEffect)((function(){"light"===e.theme?y(se):y(le)}),[e.theme]),Object(c.useEffect)((function(){m(e)}),[e]),Object(c.useEffect)((function(){return function(){b(!1)}}),[e.channel,e.show]);var N=function(e){i(e.target.value)},S=Object(k.b)(g,null,{from:{opacity:0,transform:"scale(0)"},enter:{opacity:1,transform:"scale(1)"},leave:{opacity:0,transform:"scale(0)"}}),j=Object(ie.a)({item:{id:e.id,left:e.left,top:e.top,type:"note"},collect:function(e){return{isDragging:e.isDragging()}}}),x=Object(s.a)(j,2),T=x[0].isDragging,w=x[1];if(T)return o.a.createElement("div",{ref:w});var I=function(t){var n,c;return r.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:if(n=e.notes.find((function(e){return e.id===t})),c=new Date,n.content===a){o.next=5;break}return o.next=5,r.a.awrap(e.setNote(Object(O.a)({},n,{content:a,author:e.user.username,date:new Date(c.getTime()-60*c.getTimezoneOffset()*1e3).toISOString()}),e.channel.id,e.user));case 5:case"end":return o.stop()}}))};return S.map((function(e){var t=e.item,n=e.key,r=e.props;return t&&o.a.createElement(k.a.div,{key:n,className:"note",ref:w,id:d.id,style:Object(O.a)({left:d.left,top:d.top},v.get(d.backgroundColor),{},r)},o.a.createElement("div",{className:"noteHeader",style:{marginTop:"0px",marginBottom:"0px"}},d.author," ",function(e){if(e)return e.slice(8,10)+"."+e.slice(5,7)+". "+e.slice(11,16)}(d.date)),o.a.createElement("textarea",{className:"txt-place",style:Object(O.a)({},v.get(d.backgroundColor)),value:a,onChange:N,onBlur:function(){return I(d.id)}}))}))})));function de(){var e=Object(d.a)(["\n  font-size: 1.5em;\n  padding: 0 .2em 0 0em;\n  font-family: Russo One; sans-serif;\n  color: #a9bfd6;\n"]);return de=function(){return e},e}function me(){var e=Object(d.a)(["\n  display: inline-block;\n  float: left;\n  text-align: left;\n  line-height: 1.5em;\n  border-bottom: .1em solid black;\n  border-radius: 0 0 .333em 0;\n  background-color: black;\n"]);return me=function(){return e},e}function fe(){var e=Object(d.a)(["\n  position: relative;\n  top: 1.5em;\n  height: fit-content;\n  lineHeight: 1.5em;\n"]);return fe=function(){return e},e}var pe=T.a.div(fe()),ge=T.a.div(me()),be=T.a.div(de()),Ee=function(e){var t=e.title;return o.a.createElement(pe,null,o.a.createElement(ge,null,o.a.createElement(be,null,t)))},he=Object(m.b)((function(e){return{channel:e.channel}}),null)((function(e){var t=Object(c.useState)(!1),n=Object(s.a)(t,2),a=n[0],r=n[1],i=Object(c.useState)(null),l=Object(s.a)(i,2),u=l[0],d=l[1],m=Object(k.b)(a,null,{from:{opacity:0},enter:{opacity:1},leave:{opacity:0}}),f=Number(e.top)+60,p=Number(e.left)+60,g=e.name;Object(c.useEffect)((function(){return function(){r(!1)}}),[e.channel]);return Object(c.useEffect)((function(){var t=new Image;t.src="data:".concat(e.picture.contentType,";")+"base64,".concat(function(e){var t="";return[].slice.call(new Uint8Array(e)).forEach((function(e){return t+=String.fromCharCode(e)})),window.btoa(t)}(e.picture.data.data)),t.onload=function(){return r(!0)},d(t)}),[e.picture]),m.map((function(e){var t=e.item,n=e.key,a=e.props;return t&&o.a.createElement(k.a.div,{key:n,style:Object(O.a)({},a,{position:"absolute",top:f,left:p})},o.a.createElement("div",{className:"image",style:{width:"fit-content",zIndex:"0",textAlign:"center",margin:"0 1em 0 0"}},o.a.createElement(Ee,{title:g}),o.a.createElement("img",{src:u.src,alt:g})))}))})),ve=Object(m.b)((function(e){return{channel:e.channel}}),null)((function(e){var t=Object(c.useState)(e),n=Object(s.a)(t,2),a=n[0],r=(n[1],Object(c.useState)(!0)),i=Object(s.a)(r,2),l=i[0],u=i[1];return Object(c.useEffect)((function(){document.getElementById(e.id).innerHTML=e.content}),[]),Object(c.useEffect)((function(){return function(){u(!1)}}),[e.channel]),Object(k.b)(l,null,{from:{opacity:0,transform:"scale(0)"},enter:{opacity:1,transform:"scale(1)"},leave:{opacity:0,transform:"scale(0)"}}).map((function(e){e.item;var t=e.key,n=e.props;return o.a.createElement(k.a.div,{key:t,style:Object(O.a)({position:"absolute",left:a.left,top:a.top},n)},o.a.createElement("div",{id:a.id}))}))})),ye=n(226),Oe=n.n(ye),ke=function(){return o.a.createElement("div",{style:{position:"absolute",top:"43%",left:"45%"}},o.a.createElement("img",{src:Oe.a,alt:"Loading..."}))},Ne=n(39),Se=(n(396),n(455));function je(){var e=Object(d.a)(["\n  line-height: 1em;\n  height: 2em;  \n  font-size: 1em; \n  width:97%;\n  margin: 0; \n  padding: 0;\n"]);return je=function(){return e},e}function xe(){var e=Object(d.a)(["\n  line-height: 1em; \n  margin: 0.2em 0 0.3em 0; \n  font-size: 1.2em;\n  font-weight:bold; \n"]);return xe=function(){return e},e}function Te(){var e=Object(d.a)(["\n  text-align: center;\n  font-size: 2em; \n  line-height: 1em; \n  font-weight: 800; \n  padding: 0; \n"]);return Te=function(){return e},e}function we(){var e=Object(d.a)(["\n  text-align: center; \n  width: 100%; \n  align-self: strech;\n"]);return we=function(){return e},e}var Ie={autoClose:!1,position:Ne.b.POSITION.BOTTOM_CENTER,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:.5},Ce=T.a.div(we()),_e=T.a.span(Te()),De=T.a.p(xe()),Ae=T.a.input(je()),Ue=Object(m.b)((function(e){return{channel:e.channel,user:e.loggedUser}}),null)((function(e){var t=e.theme,n=e.setVisible,a=e.top,i=e.left,l=e.channelId,u=e.user,d=e.channel,p=Object(c.useState)(0),g=Object(s.a)(p,2),E=g[0],h=g[1],v=Object(c.useState)(null),y=Object(s.a)(v,2),O=y[0],k=y[1],N=f("text"),S=Object(m.c)();return o.a.createElement("div",{className:"Container2 "+t,style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",zIndex:"199",position:"absolute",top:a,left:i}},o.a.createElement(_e,{className:"prevent-select"},"select picture"),o.a.createElement(Ce,null,o.a.createElement(De,{className:"prevent-select"},"small png. max 1M "),o.a.createElement("input",{style:{paddingLeft:"0.5em",lineHeight:"1.5em",fontSize:"1em",margin:"0"},type:"file",name:"upload_file",className:"form-control-file inputstyle "+t,onChange:function(e){var t=e.target.files;t[0]&&t[0].size<1e6&&t[0].name.match(/\.(png)$/)?(h(0),k(t[0])):Ne.b.warn("File type is wrong or file size too big!",{position:Ne.b.POSITION.BOTTOM_CENTER})}})),o.a.createElement(Ce,null,o.a.createElement(De,{className:"prevent-select"},"name: "),o.a.createElement(Ae,Object.assign({placeholder:"required"},N.input,{className:"form-control",required:!0}))),o.a.createElement(Ce,{className:"prevent-select"},o.a.createElement(Ne.a,{style:{zIndex:"5000",fontSize:"1.4em"}}),o.a.createElement(Se.a,{className:"prevent-select",max:"100",color:"success",value:E},Math.round(E,2),"%"),o.a.createElement("button",{className:"hoverbutton "+t,type:"submit",onClick:function(e){var t,c=new FormData;O?(c.append("uploaded_file",O),""!=N.input.value?(c.append("name",N.input.value),c.append("top",a),c.append("left",i),t=c,r.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return Ne.b.info("uploading...",Ie),e.next=3,r.a.awrap(b.a.post("".concat("/api/pictures","/add/").concat(l),t,{onUploadProgress:function(e){h(e.loaded/e.total*100)}}).then((function(e){S(X(e,d.id,u)),S(V(d.id,u))})).catch((function(e){console.log(e)})));case 3:n(!1);case 4:case"end":return e.stop()}}))):Ne.b.error("name is required",{position:Ne.b.POSITION.BOTTOM_CENTER})):Ne.b.error("select file",{position:Ne.b.POSITION.BOTTOM_CENTER})}},"submit"),"\u2002\u2002\u2002\u2002",o.a.createElement("button",{className:"hoverbutton "+t,type:"submit",onClick:function(){return n(!1)}},"cancel")))}));function Be(){var e=Object(d.a)(["\n  line-height: 1em;\n  height: 2em;  \n  font-size: 1em; \n  width:97%;\n  margin: 0 0 0.5em 0; \n  padding: 0;\n"]);return Be=function(){return e},e}var Re=T.a.input(Be()),Me=function(e){var t=f("text");return o.a.createElement("div",{className:"Container2 "+e.theme,style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",zIndex:"199",position:"absolute",top:e.top,left:e.left}},o.a.createElement("div",{id:"testhtml"}),o.a.createElement(Ce,null,o.a.createElement(Re,Object.assign({placeholder:"html"},t.input,{className:"form-control",required:!0}))),o.a.createElement(Ce,{className:"prevent-select"},o.a.createElement("button",{className:"hoverbutton "+e.theme,type:"submit",onClick:function(n){e.addHtml({left:e.left+55,top:e.top+75,content:t.input.value},e.channel.id,e.user),t.reset(),e.setVisible(!1)}},"submit"),"\u2002\u2002\u2002\u2002",o.a.createElement("button",{className:"hoverbutton "+e.theme,type:"submit",onClick:function(){return e.setVisible(!1)}},"cancel")))},Le=n(449),He=Object(m.b)((function(e){return{user:e.loggedUser,channel:e.channel,notes:e.notes,pictures:e.pictures,htmls:e.htmls}}),{addNote:function(e,t,n){return{type:"ADD_NOTE",data:{note:e,channel:t,token:n.token}}},setNote:K,deleteNote:function(e,t,n){return{type:"DELETE_NOTE",data:{noteID:e,channelID:t,token:n.token}}},addHtml:function(e,t,n){return{type:"ADD_HTML",data:{html:e,channel:t,token:n.token}}},setHtml:function(e,t,n){return{type:"SET_HTML",data:{html:e,channel:t,token:n.token}}}})((function(e){var t=Object(c.useState)(!1),n=Object(s.a)(t,2),a=n[0],i=n[1],l=Object(c.useState)({zIndex:1e3,position:"absolute",left:0,top:0}),u=Object(s.a)(l,2),d=u[0],m=u[1],f=Object(c.useState)(!1),p=Object(s.a)(f,2),g=p[0],b=p[1],E=Object(c.useState)(!1),h=Object(s.a)(E,2),v=h[0],y=h[1],k=Object(c.useState)(!1),N=Object(s.a)(k,2),S=N[0],j=N[1],x=Object(c.useState)(!1),T=Object(s.a)(x,2),w=T[0],I=T[1],C=Object(c.useState)({zIndex:1e3,position:"absolute",left:0,top:0}),_=Object(s.a)(C,2),D=_[0],A=_[1],U=Object(c.useState)({left:"0px",top:"0px"}),B=Object(s.a)(U,2),R=B[0],M=B[1],L=Object(c.useState)(le),H=Object(s.a)(L,2),z=H[0],P=H[1],W=Object(c.useRef)(null),G=Object(c.useRef)(null),K=Object(c.useRef)(null),Y=Object(c.useRef)(null),F=Object(c.useState)("5"),X=Object(s.a)(F,2),V=X[0],q=X[1];Object(c.useEffect)((function(){"light"===e.theme?P(se):P(le)}),[e.theme]);var J,$,Q=Object(oe.a)({accept:["note"],drop:function(e,t){var n=t.getDifferenceFromInitialOffset(),a=Math.round(e.left+n.x),r=Math.round(e.top+n.y);"note"==e.type&&ee(e.id,a,r)}}),Z=Object(s.a)(Q,2)[1],ee=function(t,n,a){var r=e.notes.find((function(e){return e.id===t}));e.setNote(Object(O.a)({},r,{top:a,left:n}),e.channel.id,e.user)},te=function(e){var t=Number(e.target.offsetParent.style.left.replace("px",""))+Number(e.nativeEvent.offsetX),n=Number(e.target.offsetParent.style.top.replace("px",""))+Number(e.nativeEvent.offsetY);y({id:e.nativeEvent.target.offsetParent.id,style:{position:"absolute",left:t,top:n,zIndex:1e3}}),b(!0),i(!1)},ne=function(t){t.preventDefault();var n=new Date,a=d.top+document.getElementById("wa").offsetHeight;e.addNote({left:d.left,top:a,backgroundColor:"#ffffcc",date:new Date(n.getTime()-60*n.getTimezoneOffset()*1e3),author:e.user.username},e.channel.id,e.user),i(!1)},ae=function(e){e.preventDefault();var t=d.top+document.getElementById("wa").offsetHeight;j(!0),A({zIndex:1e3,position:"absolute",left:d.left,top:t}),de()},re=function(e){var t,n;return r.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:e.preventDefault(),t=d.top+document.getElementById("wa").offsetHeight,n=d.left,I(!0),A({zIndex:1e3,position:"absolute",left:n,top:t}),de();case 6:case"end":return a.stop()}}))},ce=function(t){t.preventDefault(),e.deleteNote(v.id,e.channel.id,e.user)},ie=function(t){t.preventDefault();var n=e.notes.find((function(e){return e.id===v.id}));e.setNote(Object(O.a)({},n,{backgroundColor:t.nativeEvent.target.id}),e.channel.id,e.user),de()},de=function(){i(!1),b(!1)},me=!1;return e.notes?o.a.createElement("div",{className:"prevent-select dndWrapper "+e.theme,id:"dndWrapper",onContextMenu:function(e){e.preventDefault();var t=e.nativeEvent.offsetY-document.getElementById("wa").offsetHeight,n=e.nativeEvent.offsetX;a.visible||g.visible?de():"dnd"===e.target.id?(m({zIndex:1e3,position:"absolute",left:n,top:t}),i(!0),b(!1)):"noteHeader"!==e.nativeEvent.target.className&&"txt-place"!==e.nativeEvent.target.className||te(e)},onPointerOver:onpointerover,onPointerDown:function(e){"dnd"===e.target.id&&q("2")},onClick:de,onMouseMove:function(e){me&&"note"!==e.target.className&&(document.getElementById("dndWrapper").style.left="".concat(e.pageX-J,"px"),document.getElementById("dndWrapper").style.top="".concat(e.pageY-$,"px"),document.getElementById("root").style.backgroundPositionX=.5*(e.pageX-J)+"px",document.getElementById("root").style.backgroundPositionY=.5*(e.pageY-$)+"px",document.getElementById("bg").style.backgroundPositionX=.25*(e.pageX-J)+"px",document.getElementById("bg").style.backgroundPositionY=.25*(e.pageY-$)+"px")},onMouseDown:function(e){q("2"),"dndC"===e.target.className&&(me=!0,J=e.clientX-Number(R.left.replace("px","")),$=e.clientY-Number(R.top.replace("px","")))},onMouseUp:function(e){me=!1,"dndC"===e.target.className&&(M({left:document.getElementById("dndWrapper").style.left,top:document.getElementById("dndWrapper").style.top}),q("5"))},style:Object(O.a)({},R)},o.a.createElement("div",{className:"hoverthing "+e.theme},o.a.createElement("div",{ref:Z,id:"dnd",className:"dndC",style:{zIndex:V}},o.a.createElement("div",{className:"prevent-select",id:"wa"},"\xa0draggable working area"),e.notes.map((function(t){return o.a.createElement(ue,Object.assign({theme:e.theme,key:t.id},t))})),o.a.createElement("div",null,o.a.createElement(Le.a,{in:a,nodeRef:W,timeout:500,classNames:"contextmenu",unmountOnExit:!0},o.a.createElement("div",{className:"menu "+e.theme,ref:W,style:Object(O.a)({},d,{width:"9rem"})},o.a.createElement("ul",{className:"menu-options"},o.a.createElement("li",{className:"prevent-select menu-option "+e.theme,onClick:ne},"add note"),o.a.createElement("li",{className:"prevent-select menu-option "+e.theme,onClick:ae},"upload picture"),o.a.createElement("li",{className:"prevent-select menu-option "+e.theme,onClick:re},"add HTML"))))),o.a.createElement("div",null,o.a.createElement(Le.a,{in:g,nodeRef:G,timeout:500,classNames:"contextmenu",unmountOnExit:!0},o.a.createElement("div",{className:"menu "+e.theme,ref:G,style:Object(O.a)({},v.style,{width:"9rem"})},o.a.createElement("ul",{className:"menu-options"},o.a.createElement("li",{className:"prevent-select menu-option "+e.theme,onClick:ce},"delete note"),o.a.createElement("li",{className:"prevent-select menu-option "+e.theme},o.a.createElement("div",{className:"dropdown prevent-select"},"set color",o.a.createElement("div",{className:"dropdown-content"},o.a.createElement("table",{className:"dropdown-content-style "+e.theme},o.a.createElement("tbody",null,o.a.createElement("tr",null,o.a.createElement("td",null,o.a.createElement("button",{className:"button",id:"#ffffcc",onClick:ie,style:{background:z.get("#ffffcc").background}})),o.a.createElement("td",null,o.a.createElement("button",{className:"button",id:"#ffcccc",onClick:ie,style:{background:z.get("#ffcccc").background}})),o.a.createElement("td",null,o.a.createElement("button",{className:"button",id:"#ccffff",onClick:ie,style:{background:z.get("#ccffff").background}}))),o.a.createElement("tr",null,o.a.createElement("td",null,o.a.createElement("button",{className:"button",id:"#99ffcc",onClick:ie,style:{background:z.get("#99ffcc").background}})),o.a.createElement("td",null,o.a.createElement("button",{className:"button",id:"#ffccff",onClick:ie,style:{background:z.get("#ffccff").background}})),o.a.createElement("td",null,o.a.createElement("button",{className:"button",id:"#80ffff",onClick:ie,style:{background:z.get("#80ffff").background}}))),o.a.createElement("tr",null,o.a.createElement("td",null,o.a.createElement("button",{className:"button",id:"#ff99c2",onClick:ie,style:{background:z.get("#ff99c2").background}})),o.a.createElement("td",null,o.a.createElement("button",{className:"button",id:"#99ff99",onClick:ie,style:{background:z.get("#99ff99").background}})),o.a.createElement("td",null,o.a.createElement("button",{className:"button",id:"#ff99ff",onClick:ie,style:{background:z.get("#ff99ff").background}})))))))))))),function(e){return o.a.createElement("div",null,o.a.createElement(Le.a,{in:S,nodeRef:K,timeout:500,classNames:"contextmenu",unmountOnExit:!0},o.a.createElement("div",{ref:K},o.a.createElement(Ue,{setVisible:j,top:D.top,left:D.left,channelId:e.channel.id,style:Object(O.a)({},D),theme:e.theme}))))}(e),function(e){return o.a.createElement("div",null,o.a.createElement(Le.a,{in:w,nodeRef:Y,timeout:500,classNames:"contextmenu",unmountOnExit:!0},o.a.createElement("div",{ref:Y},o.a.createElement(Me,Object.assign({setVisible:I},e,{top:D.top,left:D.left,channelId:e.channel.id,style:Object(O.a)({},D),theme:e.theme})))))}(e)),e.pictures.map((function(e){return o.a.createElement(he,Object.assign({key:e.id},e))})),e.htmls.map((function(e){return o.a.createElement(ve,Object.assign({key:e.id},e))})))):o.a.createElement(ke,null)})),ze=n(445),Pe=n(230),We=(n(397),Object(m.b)((function(e){return{channel:e.channel}}),null)((function(e){var t=Object(c.useState)("channelNameAnim"),n=Object(s.a)(t,2),a=n[0],r=n[1];return Object(c.useEffect)((function(){r("channelNameAnim "+e.theme)}),[e.channel,e.theme]),o.a.createElement("div",{className:"prevent-select "+a,onAnimationEnd:function(){return r("channelName "+e.theme)}},e.channel.name)}))),Ge=n(454),Ke=Object(m.b)((function(e){return{user:e.loggedUser}}),null)((function(e){var t=Object(c.useState)(""),n=Object(s.a)(t,2),a=n[0],r=n[1],i=Object(c.useRef)(0);Object(c.useEffect)((function(){return l(e.user),function(){clearTimeout(i.current),l(void 0)}}),[e.user]);var l=function e(t){var n=new Date;clearTimeout(i.current),t&&(r(n.toString().slice(16,24)),i.current=setTimeout(e.bind(null,t),1e3))};return o.a.createElement("div",{className:"prevent-select"},a)})),Ye=Object(m.b)((function(e){return{user:e.loggedUser,channel:e.channel,connectedUsers:e.connectedUsers,gapi:e.gapi}}),{clearUser:j})((function(e){var t=e.theme,n=e.setTheme,a=e.user,r=e.channel,i=e.connectedUsers,l=e.gapi,u=e.clearUser,d=Object(c.useState)(!0),m=Object(s.a)(d,2),f=m[0],p=m[1],g=Object(c.useState)(0),b=Object(s.a)(g,2),E=b[0],h=b[1],v=[{id:0,content:o.a.createElement("div",null)},{id:1,content:o.a.createElement(te,{theme:t,setTheme:n,setChat:p})},{id:2,content:o.a.createElement(ce,{theme:t,setChat:p})}];Object(c.useEffect)((function(){"light"===t?(document.getElementById("root").style.backgroundImage="url(/b2l.gif)",document.getElementById("bg").style.backgroundImage="url(/bl.gif)",document.body.style.backgroundColor="#e0f2ff"):(document.getElementById("root").style.backgroundImage="url(/b2.gif)",document.getElementById("bg").style.backgroundImage="url(/b.gif)",document.body.style.backgroundColor="black")}),[t]),Object(c.useEffect)((function(){h(a?a&&f?1:2:0)}),[a,f]);var y=Object(k.b)(a,null,{from:{opacity:0,transform:"scale(0)"},enter:{opacity:1,transform:"scale(1)"},leave:{opacity:0,transform:"scale(0)"},config:{mass:1,tension:300,friction:12}}),N=Object(k.b)(v[E],(function(e){return e.id}),{from:{opacity:0},enter:{opacity:1},leave:{opacity:0},config:{duration:250}}),S=function(e){e.preventDefault(),document.getElementById("root").style.backgroundPositionX="0px",document.getElementById("root").style.backgroundPositionY="0px",document.getElementById("bg").style.backgroundPositionX="0px",document.getElementById("bg").style.backgroundPositionY="0px",u(a),p(!0),l&&l.auth2.getAuthInstance().signOut()};return o.a.createElement("div",null,o.a.createElement(Ge.a,{style:{margin:"0",padding:"0",border:"0px",backgroundColor:"transparent"},placeholder:!0},r&&o.a.createElement(ze.a,{backend:Pe.a},o.a.createElement(He,{theme:t}))),o.a.createElement("div",{style:{position:"absolute",top:"2em",left:"40%"}},r&&o.a.createElement(We,{theme:t})),y.map((function(e){var n=e.item,a=e.key,r=e.props;return n&&o.a.createElement(k.a.div,{key:a,style:Object(O.a)({},r,{zIndex:"10",position:"absolute",top:"2em",left:"3em"})},o.a.createElement("div",{className:"clock "+t},o.a.createElement(Ke,null)))})),N.map((function(e){var t=e.item,n=e.props,a=e.key;return o.a.createElement(k.a.div,{key:a,style:Object(O.a)({},n,{zIndex:"10",position:"absolute",top:"2em",right:"2em",minWidth:"22rem",width:"25vw",paddingRight:"0"})},t.content)})),y.map((function(e){var n=e.item,r=e.key,c=e.props;return n&&o.a.createElement(k.a.div,{key:r,style:Object(O.a)({},c,{zIndex:"10",position:"absolute",bottom:"2em",left:"2em"})},o.a.createElement("div",{className:"loggedin "+t},a&&a.username," is logged in "),o.a.createElement("div",{style:{float:"left",display:"inline"}},o.a.createElement("button",{className:"logoutbutton hoverbutton "+t,onClick:S},"logout")))})),y.map((function(e){var n=e.item,a=e.key,r=e.props;return n&&o.a.createElement(k.a.div,{key:a,style:Object(O.a)({},r),className:"connected "+t},o.a.createElement("span",{className:"connectedusers "+t},"connected users"),o.a.createElement("ul",{style:{fontWeight:"400",listStyleType:"none",marginTop:"0",marginBottom:"0",padding:"0.2em 0 0 0"}},i&&i.map((function(e,t){return o.a.createElement("li",{style:{flex:"right"},key:t},e)}))))})))})),Fe=(n(398),function(){var e=Object(c.useState)(!0),t=Object(s.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)("dark"),i=Object(s.a)(r,2),l=i[0],d=i[1];return Object(c.useEffect)((function(){a(!1)}),[]),n?o.a.createElement(ke,null):o.a.createElement(u.a,{id:"cont",style:{width:"100%",height:"100vh"}},o.a.createElement(A,{theme:l}),o.a.createElement(Ye,{setTheme:d,theme:l}))}),Xe=n(227),Ve=n(43),qe=n(228),Je=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_CONNECTED_USERS":return t.data;default:return e}},$e=n(229),Qe=n.n($e),Ze=Object(Ve.combineReducers)({messages:M,loggedUser:x,channels:W,gapi:y,pictures:q,channel:$,users:v,htmls:Z,notes:Y,error:ne,connectedUsers:Je}),et=Object(Ve.createStore)((function(e,t){return"USER_LOGOUT"===t.type&&(e=void 0),Ze(e,t)}),Object(Xe.composeWithDevTools)(Object(Ve.applyMiddleware)(qe.a,(function(e){var t=Qe()("wss://visualchat.onrender.com");return t.on("message",(function(t){e.getState().channel.id===t.channelID&&e.dispatch({type:"SOCKET_MESSAGE_RECEIVED",data:{channel:t.channelID,messages:t.messages}})})),t.on("add_note",(function(t){e.getState().channel.id===t.channelID&&e.dispatch({type:"SOCKET_ADD_NOTE",data:t.note})})),t.on("add_html",(function(t){e.getState().channel.id===t.channelID&&e.dispatch({type:"SOCKET_ADD_HTML",data:t.html})})),t.on("callback",(function(t){var n;return r.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:if(e.getState().channel.id!==t.id){a.next=6;break}if(e.getState().loggedUser.token===t.token){a.next=6;break}return a.next=4,r.a.awrap(F(e.getState().channel.id,e.getState().loggedUser));case 4:n=a.sent,e.dispatch({type:"INIT_PICTURES",data:n});case 6:case"end":return a.stop()}}))})),t.on("delete_note",(function(t){e.getState().channel.id===t.channelID&&e.dispatch({type:"SOCKET_DELETE_NOTE",data:t.noteID})})),t.on("set_note",(function(t){e.getState().channel.id===t.channelID&&e.dispatch({type:"SOCKET_SET_NOTE",data:t.note})})),t.on("set_html",(function(t){e.getState().channel.id===t.channelID&&e.dispatch({type:"SOCKET_SET_HTML",data:t.html})})),t.on("myError",(function(t){e.dispatch({type:"SET_ERROR",data:t})})),t.on("channel",(function(t){t.users.find((function(t){return t===e.getState().loggedUser.userId}))&&e.dispatch({type:"SOCKET_ADD_CHANNEL",data:t})})),t.on("set_connected_users",(function(t){e.dispatch({type:"SET_CONNECTED_USERS",data:t})})),t.on("reconnect",(function(){e.getState().loggedUser&&t.emit("action",{type:"SET_USER",data:e.getState().loggedUser}),e.getState().channel&&t.emit("action",{type:"SET_CHANNEL",data:{user:e.getState().loggedUser.username,name:e.getState().channel.name,token:e.getState().loggedUser.token}})})),function(e){return function(n){return"SEND_WEBSOCKET_MESSAGE"===n.type||"CREATE_CHANNEL"===n.type||"ADD_NOTE"===n.type||"SET_NOTE"===n.type||"CALLBACK"===n.type||"DELETE_NOTE"===n.type||"SET_USER"===n.type||"USER_LOGOUT"===n.type||"SET_HTML"===n.type||"ADD_HTML"===n.type||"SET_CHANNEL"===n.type?(t.emit("action",n),"SEND_WEBSOCKET_MESSAGE"===n.type||"SET_NOTE"===n.type||"SET_USER"===n.type||"USER_LOGOUT"===n.type||"SET_CHANNEL"===n.type?e(n):void 0):e(n)}}})))),tt=function(){l.a.render(o.a.createElement(m.a,{store:et},o.a.createElement(Fe,null)),document.getElementById("root"))};tt(),et.subscribe(tt)},53:function(e,t,n){},54:function(e,t,n){}},[[245,1,2]]]);
//# sourceMappingURL=main.af2887ca.chunk.js.map