(this["webpackJsonpchat-client"]=this["webpackJsonpchat-client"]||[]).push([[0],{123:function(e,t,n){},124:function(e,t,n){},226:function(e,t,n){e.exports=n.p+"static/media/Spinner.5e9077ee.svg"},245:function(e,t,n){e.exports=n(430)},272:function(e,t,n){},273:function(e,t,n){e.exports=n.p+"static/media/visualchat.c935913a.png"},392:function(e,t,n){},393:function(e,t,n){},396:function(e,t,n){},397:function(e,t,n){},427:function(e,t){},430:function(e,t,n){"use strict";n.r(t);var a=n(3),r=n.n(a),c=n(0),o=n.n(c),i=n(30),l=n.n(i),s=n(10),u=n(443),d=n(25),f=n(15),m=function(e){var t=Object(c.useState)(""),n=Object(s.a)(t,2),a=n[0],r=n[1];return{input:{type:e,value:a,onChange:function(e){r(e.target.value)}},reset:function(){r("")}}},p=n(29),g=n(27),b=n.n(g),E=function(e){return r.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.a.awrap(b.a.get("".concat("/api/users"),{headers:{Authorization:e.token}}));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}))},h=function(e){var t;return r.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return t=null,n.prev=1,n.next=4,r.a.awrap(b.a.post("".concat("/api/users","/signup"),e));case 4:return t=n.sent,n.abrupt("return",t.data);case 8:return n.prev=8,n.t0=n.catch(1),n.abrupt("return",t);case 11:case"end":return n.stop()}}),null,null,[[1,8]])},v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_USERS":return t.data.data.users;case"ADD_USER":return[].concat(Object(p.a)(e),[t.data]);default:return e}},y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_GAPI":return t.data;default:return e}},O=n(20),k=n(22),x=function(e){var t=e.message,n=e.clear,a=Object(c.useState)(t),r=Object(s.a)(a,2),i=r[0],l=r[1],u=Object(c.useState)(!1),d=Object(s.a)(u,2),f=d[0],m=d[1],p=Object(c.useRef)(-1),g=Object(c.useRef)(-1);return Object(c.useEffect)((function(){return t?(m(!0),l(t),p.current=setTimeout((function(){m(!1),g.current=setTimeout((function(){n()}),800)}),5e3)):m(!1),function(){clearTimeout(p.current)}}),[t,n]),Object(k.b)(f,null,{from:{opacity:0},enter:{opacity:1},leave:{opacity:0},config:{duration:250}}).map((function(e){var t=e.item,n=e.key,a=e.props;return t&&o.a.createElement(k.a.div,{key:n,style:Object(O.a)({color:i.color,backgroundColor:"black",border:"1px solid ".concat(i.color),borderRadius:"6px",padding:"1em",fontSize:"1.2em",margin:"0em"},a)},i.content)}))},S=function(e){var t;return r.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,r.a.awrap(b.a.post("".concat("/api/users","/login"),e));case 3:return t=n.sent,n.abrupt("return",t.data);case 7:return n.prev=7,n.t0=n.catch(0),n.abrupt("return",null);case 10:case"end":return n.stop()}}),null,null,[[0,7]])},j=function(e){return window.localStorage.removeItem("loggedChatUser"),{type:"USER_LOGOUT",data:e}},w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USER":return t.data;case"USER_LOGOUT":return null;default:return e}},N=n(26),T=n(444),C=n(450),I=n(451),_=n(104);n(272);function D(){var e=Object(d.a)(["\n    animation-name: backGroundAnim;\n    animation-timing-function:ease-in;\n    animation-duration:0.05s;\n    width:100vw;\n    height:100vh;\n  @keyframes backGroundAnim {\n    from {background-color:black;}\n    to {background-color:rgba(0,0,0,0);}\n  }"]);return D=function(){return e},e}function A(){var e=Object(d.a)(["\nborder: 1px solid #665533;\ncursor:pointer;\ncolor:#b29966;\nbackground-color:black;\ntransition: background-color 250ms ease-in, border-color 250ms ease-in, color 250ms ease-in;\n&:hover{\n  background-color:rgba(53, 46, 17, 0.6);\n  border-color: #b29966;\n  color: #d4c6aa;\n}"]);return A=function(){return e},e}var U=n(273),R=N.a.button(A()),B=Object(f.b)((function(e){return{user:e.loggedUser,gapi:e.gapi}}),{setUser:function(e){return function(t){var n;return r.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,r.a.awrap(S(e));case 2:if(n=a.sent){a.next=5;break}throw Error("invalid username or password");case 5:return window.localStorage.setItem("loggedChatUser",JSON.stringify(n)),a.next=8,r.a.awrap(t({type:"SET_USER",data:n}));case 8:case"end":return a.stop()}}))}},clearUser:j,resetUser:function(e){return{type:"SET_USER",data:e}},signUp:function(e){return function(t){var n;return r.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,r.a.awrap(h(e));case 2:if(n=a.sent){a.next=5;break}throw Error("username is in use");case 5:t({type:"ADD_USER",data:n});case 6:case"end":return a.stop()}}))}},setGapi:function(e){return function(t){t({type:"SET_GAPI",data:e})}}})((function(e){var t=m("text"),n=m("password"),a=Object(c.useState)(!1),i=Object(s.a)(a,2),l=i[0],u=i[1],d=Object(c.useState)(null),f=Object(s.a)(d,2),p=f[0],g=f[1],b=Object(c.useState)(!1),E=Object(s.a)(b,2),h=E[0],v=E[1];Object(c.useEffect)((function(){!function(){var t,n;r.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:if(!(t=window.localStorage.getItem("loggedChatUser"))){a.next=13;break}return a.prev=2,a.next=5,r.a.awrap(JSON.parse(t));case 5:return n=a.sent,a.next=8,r.a.awrap(e.resetUser(n));case 8:a.next=13;break;case 10:a.prev=10,a.t0=a.catch(2),console.log(a.t0.name);case 13:case"end":return a.stop()}}),null,null,[[2,10]])}()}),[]),Object(c.useEffect)((function(){var e=new Image;e.src=U,e.onload=function(){window[e]=e,v(!0)}}),[]);var y=Object(c.useState)(null),O=Object(s.a)(y,2),S=O[0],j=O[1],w="371216924606-rgdtfalqj9tklp61rkv27d9ii14cenbe.apps.googleusercontent.com";Object(c.useEffect)((function(){!function(){var t;r.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,r.a.awrap(Object(_.b)());case 2:t=n.sent,e.setGapi(t);case 4:case"end":return n.stop()}}))}()}),[e.gapi]),Object(c.useEffect)((function(){if(e.gapi){!function(){var t;r.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,r.a.awrap(Object(_.a)(e.gapi,w,""));case 2:(t=n.sent).isSignedIn.get()?A(t.currentUser.get()):R(document.getElementById("customBtn"),t);case 4:case"end":return n.stop()}}))}()}}),[e.gapi]),Object(c.useEffect)((function(){if(e.gapi&&!S){!function(){var t;r.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,r.a.awrap(Object(_.a)(e.gapi,w,""));case 2:t=n.sent,R(document.getElementById("customBtn"),t);case 4:case"end":return n.stop()}}))}()}}),[S,e.gapi,h]);var A=function(t){var n=t.getBasicProfile().getName(),a=t.getBasicProfile().getImageUrl(),r=t.getBasicProfile().getEmail(),c=t.getBasicProfile().getId();j({name:n,profileImg:a,email:r,id:c}),e.setUser({idToken:t.xc.id_token})},R=function(e,t){t.attachClickHandler(e,{},(function(e){A(e)}),(function(e){console.log(JSON.stringify(e))}))},B=Object(k.b)((!window.localStorage.getItem("loggedChatUser")||!e.user)&&h,null,{from:{opacity:0},enter:{opacity:1},leave:{opacity:0}}),L=function(e,a){var c;return r.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:if(e.preventDefault(),o.prev=1,t.input.value&&!(t.input.value.trim().length<3)){o.next=5;break}return g({content:"valid username is required (min length is 3)",color:"red"}),o.abrupt("return");case 5:if(n.input.value&&!(n.input.value.length<3)){o.next=8;break}return g({content:"valid password is required (min length is 3)",color:"red"}),o.abrupt("return");case 8:return c={username:t.input.value.trim(),password:n.input.value},o.next=11,r.a.awrap(a(c));case 11:o.next=17;break;case 13:return o.prev=13,o.t0=o.catch(1),g({content:o.t0.message,color:"red"}),o.abrupt("return");case 17:if(!l){o.next=20;break}return g({content:"account created for user: ".concat(t.input.value,"!"),color:"green"}),o.abrupt("return");case 20:g(null);case 21:case"end":return o.stop()}}),null,null,[[1,13]])},M=function(t){L(t,e.setUser)},H=function(a){return r.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,r.a.awrap(L(a,e.signUp));case 2:u(!1),t.reset(),n.reset();case 5:case"end":return c.stop()}}))},z=function(e,a){return o.a.createElement(T.a,{inverted:!0,style:{paddingTop:"2em",paddingBottom:"1em"},onSubmit:a},o.a.createElement(T.a.Input,Object.assign({icon:"user",iconPosition:"left",label:"Username",placeholder:"Username"},t.input)),o.a.createElement(T.a.Input,Object.assign({icon:"lock",iconPosition:"left",label:"Password",style:{color:"#b29966",backgroundColor:"black",border:"solid 1px #b29966",marginBottom:"0.5em"}},n.input)),o.a.createElement("button",{className:"myButton",autoFocus:!0,type:"submit"},e))},P=N.a.div(D());return h?B.map((function(e){var t=e.item,n=e.key,a=e.props;return t&&o.a.createElement(k.a.div,{key:n,style:a},o.a.createElement("div",{className:"login"},o.a.createElement("img",{style:{width:"100%",paddingTop:"7vh"},src:U}),o.a.createElement(I.a,{className:"login",style:{padding:"0px",margin:"0rem",backgroundColor:"black",border:"solid 1px #665533",width:"100%"},placeholder:!0},!l&&o.a.createElement("div",null,o.a.createElement(C.a,{columns:3,style:{paddingLeft:"3em",paddingRight:"3em",paddingBottom:"2em"},relaxed:"very",stackable:!0},o.a.createElement(C.a.Column,null,z("Login",M)),o.a.createElement(C.a.Column,{verticalAlign:"middle"},o.a.createElement("button",{className:"myButton",onClick:function(){return u(!0)},type:"button"},"Sign up")),o.a.createElement(C.a.Column,{verticalAlign:"middle"},o.a.createElement("button",{id:"customBtn",className:"myButton",style:{whiteSpace:"nowrap"}},"Google Login")))),l&&z("Sign Up",H)),o.a.createElement(x,{message:p,clear:function(){return g(null)}})))})):o.a.createElement(P,null)})),L=n(224),M=function(e,t){var n;return r.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,r.a.awrap(b.a.get("".concat("/api/channels","/").concat(e),{headers:{Authorization:t.token}}));case 2:return n=a.sent,a.abrupt("return",n.data);case 4:case"end":return a.stop()}}))},H=function(){return{type:"REMOVE_ANIMATION"}},z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INIT_MESSAGES":return t.data;case"SOCKET_MESSAGE_RECEIVED":var n=t.data.messages.slice();return n[n.length-1]="NEW_MESSAGE:".concat(n[n.length-1]),n;case"SEND_WEBSOCKET_MESSAGE":return[].concat(Object(p.a)(e),[t.data.message]);case"REMOVE_ANIMATION":return e.map((function(e){return"NEW_MESSAGE"==e.split(":",1)?e.replace("NEW_MESSAGE:",""):e}));case"NEW_FEED":return[];default:return e}},P=(n(392),Object(f.b)(null,{removeAnimation:H})((function(e){var t=e.message.split(":",1),n=e.message.replace(t+":",""),a=!1;"NEW_MESSAGE"==t&&(t=n.split(":",1),n=n.replace(t+":",""),a=!0);var r,c=n.split(";",1),i=void 0;"Invalid Date"!=function(e){try{var t=e.slice(0,4),n=e.slice(5,7),a=e.slice(8,10),r=e.slice(11,13),c=e.slice(14,16),o=e.slice(17,19);return new Date(t,n,a,r,c,o,0)}catch(i){return}}(c[0])&&(r=c[0],i=r.slice(8,10)+"."+r.slice(5,7)+". "+r.slice(11,16),n=n.replace(c[0]+";",""));var l={color:"#e5ddcc",marginRight:"0.7rem",marginLeft:"0.3rem",marginBottom:"0.5rem",backgroundColor:"transparent",display:"inline-block",float:"left"},s={marginRight:"0.7rem",marginLeft:"0.3rem",float:"left",lineHeight:"1em"};e.user==t&&(l.textAlign="right",l.float="right",s.textAlign="right",s.float="right");return o.a.createElement("div",{style:{marginBottom:"0px"}},o.a.createElement("div",{style:{clear:"left"}}),o.a.createElement("div",{style:s},i?o.a.createElement(o.a.Fragment,null,o.a.createElement("span",{style:{color:"white",marginBottom:"0px"}},t),o.a.createElement("span",{style:{color:"#d4c6aa",fontSize:"10px",marginBottom:"0px"}},"\xa0\xa0",i),o.a.createElement("br",null)):o.a.createElement(o.a.Fragment,null,o.a.createElement("span",{style:{color:"white",fontWeight:"500",marginBottom:"0px"}},t),o.a.createElement("br",null))),o.a.createElement("div",{style:{clear:"right"}}),o.a.createElement("div",{style:{clear:"left"}}),o.a.createElement("div",{style:l},a?o.a.createElement("div",{className:"mymessage",onAnimationEnd:e.removeAnimation},n):o.a.createElement("div",{style:{color:"#e9d396",padding:"8px 12px 8px 12px",borderRadius:"9px",backgroundColor:"rgba(5, 5, 5,0.5)"}},n)),o.a.createElement("div",{style:{clear:"right"}}))})));function W(){var e=Object(d.a)(["\n      padding: 0.1em 0.3em;\n      height: 33em;\n      background-image:linear-gradient(rgba(85, 71, 43,0.7),rgba(22,12,12,0.7));\n      color:#d9d9d9;\n  "]);return W=function(){return e},e}var G=Object(f.b)((function(e){return{user:e.loggedUser,messages:e.messages}}),null)((function(e){var t=N.a.div(W());return e.user?o.a.createElement(t,null,o.a.createElement(L.a,null,e.messages.map((function(t,n){return o.a.createElement(P,{index:e.messages.length-n,key:n,message:t,user:e.user.username})})))):o.a.createElement("div",null)})),K=Object(f.b)((function(e){return{user:e.loggedUser,channel:e.channel}}),{addMsg:function(e,t,n){return function(a){var r=new Date;a({type:"SEND_WEBSOCKET_MESSAGE",data:{message:"".concat(t.username,":").concat(new Date(r.getTime()-60*r.getTimezoneOffset()*1e3).toISOString(),";").concat(e),channel:n,token:t.token}})}},removeAnimation:H})((function(e){var t=Object(c.useState)(null),n=Object(s.a)(t,2),a=n[0],i=n[1],l=m("text");Object(c.useEffect)((function(){i(null)}),[e.channel]),Object(c.useEffect)((function(){return function(){return i(null)}}),[]);var u=function(){var t;return r.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(t=l.input.value,""==e.channel){n.next=9;break}return i(null),n.next=5,r.a.awrap(e.removeAnimation());case 5:return n.next=7,r.a.awrap(e.addMsg(t,e.user,e.channel.id));case 7:n.next=10;break;case 9:i({content:"select channel first",color:"red"});case 10:l.reset();case 11:case"end":return n.stop()}}))};return e.user?o.a.createElement("div",{style:{background:"black",border:"none"}},o.a.createElement("input",Object.assign({placeholder:"write your msg here",style:{padding:"0.1em 0 0.1em 0",fontWeight:"500",fontSize:"1.2em",paddingLeft:"0.4em",lineHeight:"1.2em",backgroundColor:"black",borderTop:"none",borderBottom:"1px solid #443922",borderLeft:"none",borderRight:"none",color:"#b29966",width:"80%"},onKeyPress:function(e){"Enter"===e.key&&u()}},l.input)),o.a.createElement(R,{style:{padding:"0.2em 0 0.15em 0",marginTop:"0px",fontFamily:"Lato,Helvetica Neue,Arial,Helvetica,sans-serif",fontWeight:"700",width:"20%"},onClick:u},"send"),o.a.createElement(x,{message:a,clear:function(){return i(null)}})):o.a.createElement("div",null)})),Y=function(e){return r.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.a.awrap(b.a.get("".concat("/api/channels","/user/").concat(e.userId),{headers:{Authorization:e.token}}));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}))},F=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_CHANNELS":return t.data.data.channels;case"SOCKET_ADD_CHANNEL":return e.concat(t.data);default:return e}},X=function(e,t){var n;return r.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,r.a.awrap(b.a.get("".concat("/api/channels","/").concat(e,"/notes"),{headers:{Authorization:t.token}}));case 2:return n=a.sent,a.abrupt("return",n.data);case 4:case"end":return a.stop()}}))},V=function(e,t,n){return{type:"SET_NOTE",data:{note:e,channel:t,token:n.token}}},q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INIT_NOTES":return t.data;case"SET_NOTE":var n=t.data.note;return e.map((function(e){return n.id===e.id?n:e}));case"SOCKET_ADD_NOTE":return e.concat(Object(O.a)({},t.data,{show:!0}));case"SOCKET_SET_NOTE":return e.map((function(e){return t.data.id===e.id?t.data:e}));case"SOCKET_DELETE_NOTE":return e.map((function(e){return e.id===t.data?Object(O.a)({},e,{show:!1}):e}));case"INIT_EMPTY":return[];default:return e}},J=function(e,t){var n;return r.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,r.a.awrap(b.a.get("".concat("/api/channels","/").concat(e,"/pictures"),{headers:{Authorization:t.token}}));case 2:return n=a.sent,a.abrupt("return",n.data);case 4:case"end":return a.stop()}}))},$=function(e,t,n){return{type:"ADD_PICTURE",data:{picture:e,id:t,token:n.token}}},Q=function(e,t){return{type:"CALLBACK",data:{id:e,token:t.token}}},Z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INIT_PICTURES":return t.data;case"ADD_PICTURE":return e.concat(t.data.picture.data);case"INIT_EMPTY":return[];case"CALLBACK":default:return e}},ee=function(e,t,n){return function(a){a({type:"SET_CHANNEL",data:{id:e,name:t,user:n.username,token:n.token}})}},te=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_CHANNEL":return t.data;default:return e}},ne=function(e,t){var n;return r.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,r.a.awrap(b.a.get("".concat("/api/channels","/").concat(e,"/htmls"),{headers:{Authorization:t.token}}));case 2:return n=a.sent,a.abrupt("return",n.data);case 4:case"end":return a.stop()}}))},ae=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INIT_HTMLS":return t.data;case"SET_HTML":var n=t.data.html;return e.map((function(e){return n.id===e.id?n:e}));case"SOCKET_ADD_HTML":return e.concat(Object(O.a)({},t.data));case"SOCKET_SET_HTML":return e.map((function(e){return t.data.id===e.id?t.data:e}));case"SOCKET_DELETE_HTML":return e.filter((function(e){return e.id!==t.data}));case"INIT_EMPTY":return[];default:return e}},re=(n(123),Object(f.b)((function(e){return{channels:e.channels,channel:e.channel,user:e.loggedUser}}),{initializeChannels:function(e){return function(t){var n;return r.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,r.a.awrap(Y(e));case 2:return n=a.sent,a.next=5,r.a.awrap(t({type:"GET_CHANNELS",data:n}));case 5:case"end":return a.stop()}}))}},setChannel:ee,initializeMessages:function(e,t){return function(n){var a;return r.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,r.a.awrap(M(e,t));case 2:return a=c.sent,c.next=5,r.a.awrap(n({type:"INIT_MESSAGES",data:a}));case 5:case"end":return c.stop()}}))}},initializePictures:function(e,t){return function(n){var a;return r.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,r.a.awrap(J(e,t));case 2:a=c.sent,n({type:"INIT_PICTURES",data:a});case 4:case"end":return c.stop()}}))}},initializeNotes:function(e,t){return function(n){var a,c;return r.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,r.a.awrap(X(e,t));case 2:a=o.sent,c=a.map((function(e){return Object(O.a)({},e,{show:!0})})),n({type:"INIT_NOTES",data:c});case 5:case"end":return o.stop()}}))}},initializeHtmls:function(e,t){return function(n){var a;return r.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,r.a.awrap(ne(e,t));case 2:a=c.sent,n({type:"INIT_HTMLS",data:a});case 4:case"end":return c.stop()}}))}}})((function(e){Object(c.useEffect)((function(){e.initializeChannels(e.user)}),[]);return o.a.createElement("div",null,o.a.createElement("select",{onChange:function(t){var n,a,c;return r.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:if(t.preventDefault(),n=t.target.selectedIndex,a=t.target.childNodes[n].value,0===n||a===e.channel.name){o.next=15;break}return c=e.channels.find((function(e){return e.name==a})).id,o.next=7,r.a.awrap(e.setChannel(c,a,e.user));case 7:return o.next=9,r.a.awrap(e.initializeMessages(c,e.user));case 9:return o.next=11,r.a.awrap(e.initializeNotes(c,e.user));case 11:return o.next=13,r.a.awrap(e.initializePictures(c,e.user));case 13:return o.next=15,r.a.awrap(e.initializeHtmls(c,e.user));case 15:case"end":return o.stop()}}))},className:"dropdown2"},[o.a.createElement("option",{key:"-1",value:"",disabled:!0,selected:!0,hidden:!0},"select channel...")].concat(Object(p.a)(e.channels.map((function(e,t){return o.a.createElement("option",{value:e.name,key:t},e.name)}))))))}))),ce=Object(f.b)((function(e){return{user:e.loggedUser}}))((function(e){return o.a.createElement("div",null,o.a.createElement("div",{style:{backgroundColor:"black",color:"white",borderBottom:"1px solid #443922",marginTop:"-0.2em"}},o.a.createElement("table",{style:{width:"100%",borderTop:"1px solid #443922"}},o.a.createElement("tbody",null,o.a.createElement("tr",null,o.a.createElement("td",{className:"tdchannel"},o.a.createElement("div",{className:"channel"},"CHANNEL")),o.a.createElement("td",{className:"tdchannel2"},o.a.createElement("div",{className:"create"},"create new channel"),o.a.createElement("div",{style:{marginLeft:"0.5em",display:"inline"}},o.a.createElement(R,{style:{fontFamily:"Lato,Helvetica Neue,Arial,Helvetica,sans-serif",fontWeight:"700"},onClick:function(){e.setChat(!1)}},"create"))))))),o.a.createElement(re,{user:e.user}),o.a.createElement(G,null),o.a.createElement(K,null))})),oe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_ERROR":return t.data;default:return e}},ie=n(447);function le(){var e=Object(d.a)(["\n    font-size:1.1em;\n    font-weight:500; \n    padding:0.25em 0.4em 0.4em 0.4em;\n    border-radius:2px;\n    vertical-align:middle;\n    margin-top:1.4em;\n    display:inline;\n  "]);return le=function(){return e},e}var se=Object(f.b)((function(e){return{user:e.loggedUser,users:e.users,channels:e.channels,error:e.error}}),{initializeUsers:function(e){return function(t){var n;return r.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,r.a.awrap(E(e));case 2:n=a.sent,t({type:"GET_USERS",data:n});case 4:case"end":return a.stop()}}))}},createChannel:function(e,t,n){return function(a){a({type:"CREATE_CHANNEL",data:{name:e,users:t,token:n.token}})}},setError:function(e){return function(t){t({type:"SET_ERROR",data:e})}},setChannel:ee,newFeed:function(){return{type:"NEW_FEED"}},initEmpty:function(){return{type:"INIT_EMPTY"}},initEmptyPictures:function(){return{type:"INIT_EMPTY"}},initEmptyHtmls:function(){return{type:"INIT_EMPTY"}}})((function(e){var t=Object(c.useState)([]),n=Object(s.a)(t,2),a=n[0],i=n[1],l=m("text"),u=Object(c.useState)(null),d=Object(s.a)(u,2),f=d[0],g=d[1],b=Object(c.useState)(e.channels.length),E=Object(s.a)(b,2),h=E[0],v=E[1],y=function(){g(null),e.setError(null)};Object(c.useEffect)((function(){e.error&&g({content:e.error.message,color:"red"})}),[e.error]),Object(c.useEffect)((function(){if(e.user&&e.initializeUsers(e.user),h<e.channels.length){v(e.channels.length);!function(){var t;r.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,r.a.awrap(e.channels.find((function(e){return e.name===l.input.value.trim()})).id);case 2:return t=n.sent,n.next=5,r.a.awrap(e.setChannel(t,l.input.value.trim(),e.user));case 5:return n.next=7,r.a.awrap(e.newFeed());case 7:return n.next=9,r.a.awrap(e.initEmpty());case 9:return n.next=11,r.a.awrap(e.initEmptyPictures());case 11:return n.next=13,r.a.awrap(e.initEmptyHtmls());case 13:y();case 14:case"end":return n.stop()}}))}(),e.setChat(!0)}return function(){y()}}),[e.channels]);var O=Object(N.a)(R)(le());return e.users?o.a.createElement("div",{style:{textAlign:"center"}},o.a.createElement(T.a,{inverted:!0},o.a.createElement(T.a.Input,Object.assign({label:"Name",placeholder:"channel name",style:{width:"80%",margin:"auto"}},l.input)),o.a.createElement("div",{style:{width:"80%",margin:"auto"}},o.a.createElement("div",{style:{color:"white",fontWeight:"bold",paddingBottom:"0.3em"}},"Users"),o.a.createElement(ie.a,{label:"Users",placeholder:"users",fluid:!0,multiple:!0,search:!0,selection:!0,options:e.users.filter((function(t){return t.id!==e.user.userId})).map((function(e){return{key:e.id,text:e.username,value:e.id}})),onChange:function(e,t){e.preventDefault(),i(t.value)}})),o.a.createElement("div",{style:{margin:"auto",textAlign:"center"}},o.a.createElement(O,{type:"button",onClick:function(t){var n;return r.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:if(t.preventDefault(),n=l.input.value.trim(),!(a.length>0&&""!==n)){c.next=10;break}if(!e.channels.find((function(e){return e.name===n}))){c.next=6;break}return g({content:"dublicate channel name",color:"red"}),c.abrupt("return");case 6:return c.next=8,r.a.awrap(e.createChannel(n,[].concat(Object(p.a)(a),[e.user.userId]),e.user));case 8:c.next=11;break;case 10:g({content:"users or name missing",color:"red"});case 11:case"end":return c.stop()}}))}},"create"),o.a.createElement(O,{type:"button",style:{marginLeft:"1.4em"},onClick:function(){e.setChat(!0)}},"cancel"))),o.a.createElement("div",{style:{margin:"auto",width:"80%",marginTop:"2em"}},o.a.createElement(x,{message:f,clear:y}))):o.a.createElement("div",null)})),ue=n(449),de=n(448),fe=new Map([["#ffffcc",{background:"linear-gradient(20deg,#756b57,#a89e8a)",color:"black",fontWeight:"700"}],["#ffcccc",{background:"linear-gradient(20deg,#77633c,#b29966)",color:"black",fontWeight:"700"}],["#ccffff",{background:"linear-gradient(20deg,#221a11,#664d33)",color:"#e9d396",fontWeight:"700"}],["#99ffcc",{background:"linear-gradient(20deg,#6b5147,#a38175)",color:"black",fontWeight:"700"}],["#ffccff",{background:"linear-gradient(20deg,#634136,#a66c59)",color:"black",fontWeight:"700"}],["#80ffff",{background:"linear-gradient(20deg,#240f0f,#6b2e2e)",color:"#e9d396",fontWeight:"700"}],["#ff99c2",{background:"linear-gradient(20deg,#798086,#afb3b6)",color:"black",fontWeight:"700"}],["#99ff99",{background:"linear-gradient(20deg,#3d4043,#6d7378)",color:"black",fontWeight:"700"}],["#ff99ff",{background:"linear-gradient(20deg,#272428,#5c555e)",color:"#e9d396",fontWeight:"700"}]]),me=(n(393),Object(f.b)((function(e){return{user:e.loggedUser,channel:e.channel,notes:e.notes}}),{setNote:V})((function(e){var t=Object(c.useState)(e.content),n=Object(s.a)(t,2),a=n[0],i=n[1],l=Object(c.useState)(e),u=Object(s.a)(l,2),d=u[0],f=u[1],m=Object(c.useState)(e.show),p=Object(s.a)(m,2),g=p[0],b=p[1];Object(c.useEffect)((function(){i(e.content)}),[e.content]),Object(c.useEffect)((function(){f(e)}),[e]),Object(c.useEffect)((function(){return function(){b(!1)}}),[e.channel,e.show]);var E=function(e){i(e.target.value)},h=Object(k.b)(g,null,{from:{opacity:0,transform:"scale(0)"},enter:{opacity:1,transform:"scale(1)"},leave:{opacity:0,transform:"scale(0)"}}),v=Object(de.a)({item:{id:e.id,left:e.left,top:e.top,type:"note"},collect:function(e){return{isDragging:e.isDragging()}}}),y=Object(s.a)(v,2),x=y[0].isDragging,S=y[1];if(x)return o.a.createElement("div",{ref:S});var j=function(t){var n,c;return r.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:if(n=e.notes.find((function(e){return e.id===t})),c=new Date,n.content===a){o.next=5;break}return o.next=5,r.a.awrap(e.setNote(Object(O.a)({},n,{content:a,author:e.user.username,date:new Date(c.getTime()-60*c.getTimezoneOffset()*1e3).toISOString()}),e.channel.id,e.user));case 5:case"end":return o.stop()}}))};return h.map((function(e){var t=e.item,n=e.key,r=e.props;return t&&o.a.createElement(k.a.div,{key:n,className:"note",ref:S,id:d.id,style:Object(O.a)({left:d.left,top:d.top},fe.get(d.backgroundColor),{},r)},o.a.createElement("div",{className:"noteHeader",style:{marginTop:"0px",marginBottom:"0px"}},d.author," ",function(e){if(e)return e.slice(8,10)+"."+e.slice(5,7)+". "+e.slice(11,16)}(d.date)),o.a.createElement("textarea",{className:"txt-place",style:Object(O.a)({},fe.get(d.backgroundColor)),value:a,onChange:E,onBlur:function(){return j(d.id)}}))}))})));function pe(){var e=Object(d.a)(["\n  font-size: 1.5em;\n  padding: 0 .2em 0 0em;\n  font-family: Russo One; sans-serif;\n  color: #a9bfd6;\n"]);return pe=function(){return e},e}function ge(){var e=Object(d.a)(["\n  display: inline-block;\n  float: left;\n  text-align: left;\n  line-height: 1.5em;\n  border-bottom: .1em solid black;\n  border-radius: 0 0 .333em 0;\n  background-color: black;\n"]);return ge=function(){return e},e}function be(){var e=Object(d.a)(["\n  position: relative;\n  top: 1.5em;\n  height: fit-content;\n  lineHeight: 1.5em;\n"]);return be=function(){return e},e}var Ee=N.a.div(be()),he=N.a.div(ge()),ve=N.a.div(pe()),ye=function(e){var t=e.title;return o.a.createElement(Ee,null,o.a.createElement(he,null,o.a.createElement(ve,null,t)))},Oe=Object(f.b)((function(e){return{channel:e.channel}}),null)((function(e){var t=Object(c.useState)(!1),n=Object(s.a)(t,2),a=n[0],r=n[1],i=Object(c.useState)(null),l=Object(s.a)(i,2),u=l[0],d=l[1],f=Object(k.b)(a,null,{from:{opacity:0},enter:{opacity:1},leave:{opacity:0}}),m=Number(e.top)+60,p=Number(e.left)+60,g=e.name;Object(c.useEffect)((function(){return function(){r(!1)}}),[e.channel]);return Object(c.useEffect)((function(){var t=new Image;t.src="data:".concat(e.picture.contentType,";")+"base64,".concat(function(e){var t="";return[].slice.call(new Uint8Array(e)).forEach((function(e){return t+=String.fromCharCode(e)})),window.btoa(t)}(e.picture.data.data)),t.onload=function(){return r(!0)},d(t)}),[e.picture]),f.map((function(e){var t=e.item,n=e.key,a=e.props;return t&&o.a.createElement(k.a.div,{key:n,style:Object(O.a)({},a,{position:"absolute",top:m,left:p})},o.a.createElement("div",{className:"image",style:{width:"fit-content",zIndex:"0",textAlign:"center",margin:"0 1em 0 0"}},o.a.createElement(ye,{title:g}),o.a.createElement("img",{src:u.src,alt:g})))}))})),ke=Object(f.b)((function(e){return{channel:e.channel}}),null)((function(e){var t=Object(c.useState)(e),n=Object(s.a)(t,2),a=n[0],r=(n[1],Object(c.useState)(!0)),i=Object(s.a)(r,2),l=i[0],u=i[1];return Object(c.useEffect)((function(){document.getElementById(e.id).innerHTML=e.content}),[]),Object(c.useEffect)((function(){return function(){u(!1)}}),[e.channel]),Object(k.b)(l,null,{from:{opacity:0,transform:"scale(0)"},enter:{opacity:1,transform:"scale(1)"},leave:{opacity:0,transform:"scale(0)"}}).map((function(e){e.item;var t=e.key,n=e.props;return o.a.createElement(k.a.div,{key:t,style:Object(O.a)({position:"absolute",left:a.left,top:a.top},n)},o.a.createElement("div",{id:a.id}))}))})),xe=n(226),Se=n.n(xe),je=function(){return o.a.createElement("div",{style:{position:"absolute",top:"43%",left:"45%"}},o.a.createElement("img",{src:Se.a,alt:"Loading..."}))},we=n(39),Ne=(n(395),n(452));n(124);function Te(){var e=Object(d.a)(["\n  line-height: 1em;\n  height: 2em;  \n  font-size: 1em; \n  width:97%;\n  margin: 0; \n  padding: 0;\n"]);return Te=function(){return e},e}function Ce(){var e=Object(d.a)(["\n  line-height: 1em; \n  margin: 0.2em 0 0.3em 0; \n  font-size: 1.2em;\n  font-weight:bold; \n"]);return Ce=function(){return e},e}function Ie(){var e=Object(d.a)(["\n  text-align: center;\n  font-size: 2em; \n  line-height: 1em; \n  font-weight: 800; \n  padding: 0; \n"]);return Ie=function(){return e},e}function _e(){var e=Object(d.a)(["\n  overflow:visible; \n  color: #665533; \n  background: black;\n  border:solid 1px #665533;\n  display: flex; \n  flex-direction: column; \n  justify-content: space-between; \n  align-items: flex-start; \n  margin:1.666em 0 0 0;\n  align-content: space-between; \n  padding: .5em; \n  white-space: nowrap;\n"]);return _e=function(){return e},e}function De(){var e=Object(d.a)(["\n  text-align: center; \n  width: 100%; \n  align-self: strech;\n"]);return De=function(){return e},e}var Ae={autoClose:!1,position:we.b.POSITION.BOTTOM_CENTER,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:.5},Ue=N.a.div(De()),Re=N.a.div(_e()),Be=N.a.span(Ie()),Le=N.a.p(Ce()),Me=N.a.input(Te()),He=Object(f.b)((function(e){return{channel:e.channel,user:e.loggedUser}}),null)((function(e){var t=e.setVisible,n=e.top,a=e.left,i=e.channelId,l=e.user,u=e.channel,d=Object(c.useState)(0),p=Object(s.a)(d,2),g=p[0],E=p[1],h=Object(c.useState)(null),v=Object(s.a)(h,2),y=v[0],O=v[1],k=m("text"),x=Object(f.c)();return o.a.createElement(Re,{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",zIndex:"199",position:"absolute",top:n,left:a}},o.a.createElement(Be,{className:"prevent-select"},"select picture"),o.a.createElement(Ue,null,o.a.createElement(Le,{className:"prevent-select"},"small png. max 1M "),o.a.createElement("input",{style:{paddingLeft:"0.5em",lineHeight:"1.5em",fontSize:"1em",margin:"0",background:"black",color:"#665533"},type:"file",name:"upload_file",className:"form-control-file",onChange:function(e){var t=e.target.files;t[0]&&t[0].size<1e6&&t[0].name.match(/\.(png)$/)?(E(0),O(t[0])):we.b.warn("File type is wrong or file size too big!",{position:we.b.POSITION.BOTTOM_CENTER})}})),o.a.createElement(Ue,null,o.a.createElement(Le,{className:"prevent-select"},"name: "),o.a.createElement(Me,Object.assign({placeholder:"required"},k.input,{className:"form-control",required:!0}))),o.a.createElement(Ue,{className:"prevent-select"},o.a.createElement(we.a,{style:{zIndex:"5000",fontSize:"1.4em"}}),o.a.createElement(Ne.a,{className:"prevent-select",max:"100",color:"success",value:g},Math.round(g,2),"%"),o.a.createElement(R,{type:"submit",onClick:function(e){var c,o=new FormData;y?(o.append("uploaded_file",y),""!=k.input.value?(o.append("name",k.input.value),o.append("top",n),o.append("left",a),c=o,r.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return we.b.info("uploading...",Ae),e.next=3,r.a.awrap(b.a.post("".concat("/api/pictures","/add/").concat(i),c,{onUploadProgress:function(e){E(e.loaded/e.total*100)}}).then((function(e){x($(e,u.id,l)),x(Q(u.id,l))})).catch((function(e){console.log(e)})));case 3:t(!1);case 4:case"end":return e.stop()}}))):we.b.error("name is required",{position:we.b.POSITION.BOTTOM_CENTER})):we.b.error("select file",{position:we.b.POSITION.BOTTOM_CENTER})}},"submit"),"\u2002\u2002\u2002\u2002",o.a.createElement(R,{type:"submit",onClick:function(){return t(!1)}},"cancel")))}));function ze(){var e=Object(d.a)(["\n  line-height: 1em;\n  height: 2em;  \n  font-size: 1em; \n  width:97%;\n  margin: 0 0 0.5em 0; \n  padding: 0;\n"]);return ze=function(){return e},e}var Pe=N.a.input(ze()),We=function(e){var t=m("text");return o.a.createElement(Re,{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",zIndex:"199",position:"absolute",top:e.top,left:e.left}},o.a.createElement("div",{id:"testhtml"}),o.a.createElement(Ue,null,o.a.createElement(Pe,Object.assign({placeholder:"html"},t.input,{className:"form-control",required:!0}))),o.a.createElement(Ue,{className:"prevent-select"},o.a.createElement(R,{type:"submit",onClick:function(n){e.addHtml({left:e.left+55,top:e.top+75,content:t.input.value},e.channel.id,e.user),t.reset(),e.setVisible(!1)}},"submit"),"\u2002\u2002\u2002\u2002",o.a.createElement(R,{type:"submit",onClick:function(){return e.setVisible(!1)}},"cancel")))},Ge=n(446),Ke=Object(f.b)((function(e){return{user:e.loggedUser,channel:e.channel,notes:e.notes,pictures:e.pictures,htmls:e.htmls}}),{addNote:function(e,t,n){return{type:"ADD_NOTE",data:{note:e,channel:t,token:n.token}}},setNote:V,deleteNote:function(e,t,n){return{type:"DELETE_NOTE",data:{noteID:e,channelID:t,token:n.token}}},addHtml:function(e,t,n){return{type:"ADD_HTML",data:{html:e,channel:t,token:n.token}}},setHtml:function(e,t,n){return{type:"SET_HTML",data:{html:e,channel:t,token:n.token}}}})((function(e){var t,n,a=Object(c.useState)(!1),i=Object(s.a)(a,2),l=i[0],u=i[1],d=Object(c.useState)({zIndex:1e3,position:"absolute",left:0,top:0}),f=Object(s.a)(d,2),m=f[0],p=f[1],g=Object(c.useState)(!1),b=Object(s.a)(g,2),E=b[0],h=b[1],v=Object(c.useState)(!1),y=Object(s.a)(v,2),k=y[0],x=y[1],S=Object(c.useState)(!1),j=Object(s.a)(S,2),w=j[0],N=j[1],T=Object(c.useState)(!1),C=Object(s.a)(T,2),I=C[0],_=C[1],D=Object(c.useState)({zIndex:1e3,position:"absolute",left:0,top:0}),A=Object(s.a)(D,2),U=A[0],R=A[1],B=Object(c.useState)({left:"0px",top:"0px"}),L=Object(s.a)(B,2),M=L[0],H=L[1],z=Object(c.useRef)(null),P=Object(c.useRef)(null),W=Object(c.useRef)(null),G=Object(c.useRef)(null),K=Object(c.useState)("5"),Y=Object(s.a)(K,2),F=Y[0],X=Y[1],V=Object(ue.a)({accept:["note"],drop:function(e,t){var n=t.getDifferenceFromInitialOffset(),a=Math.round(e.left+n.x),r=Math.round(e.top+n.y);"note"==e.type&&J(e.id,a,r)}}),q=Object(s.a)(V,2)[1],J=function(t,n,a){var r=e.notes.find((function(e){return e.id===t}));e.setNote(Object(O.a)({},r,{top:a,left:n}),e.channel.id,e.user)},$=function(e){var t=Number(e.target.offsetParent.style.left.replace("px",""))+Number(e.nativeEvent.offsetX),n=Number(e.target.offsetParent.style.top.replace("px",""))+Number(e.nativeEvent.offsetY);x({id:e.nativeEvent.target.offsetParent.id,style:{position:"absolute",left:t,top:n,zIndex:1e3}}),h(!0),u(!1)},Q=function(t){t.preventDefault();var n=new Date,a=m.top+document.getElementById("wa").offsetHeight;e.addNote({left:m.left,top:a,backgroundColor:"#ffffcc",date:new Date(n.getTime()-60*n.getTimezoneOffset()*1e3),author:e.user.username},e.channel.id,e.user),u(!1)},Z=function(e){e.preventDefault();var t=m.top+document.getElementById("wa").offsetHeight;N(!0),R({zIndex:1e3,position:"absolute",left:m.left,top:t}),ae()},ee=function(e){var t,n;return r.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:e.preventDefault(),t=m.top+document.getElementById("wa").offsetHeight,n=m.left,_(!0),R({zIndex:1e3,position:"absolute",left:n,top:t}),ae();case 6:case"end":return a.stop()}}))},te=function(t){t.preventDefault(),e.deleteNote(k.id,e.channel.id,e.user)},ne=function(t){t.preventDefault();var n=e.notes.find((function(e){return e.id===k.id}));e.setNote(Object(O.a)({},n,{backgroundColor:t.nativeEvent.target.id}),e.channel.id,e.user),ae()},ae=function(){u(!1),h(!1)},re=!1;return e.notes?o.a.createElement("div",{className:"prevent-select",id:"dndWrapper",onContextMenu:function(e){e.preventDefault();var t=e.nativeEvent.offsetY-document.getElementById("wa").offsetHeight,n=e.nativeEvent.offsetX;l.visible||E.visible?ae():"dnd"===e.target.id?(p({zIndex:1e3,position:"absolute",left:n,top:t}),u(!0),h(!1)):"noteHeader"!==e.nativeEvent.target.className&&"txt-place"!==e.nativeEvent.target.className||$(e)},onPointerOver:onpointerover,onPointerDown:function(e){"dnd"===e.target.id&&X("2")},onClick:ae,onMouseMove:function(e){re&&"note"!==e.target.className&&(document.getElementById("dndWrapper").style.left="".concat(e.pageX-t,"px"),document.getElementById("dndWrapper").style.top="".concat(e.pageY-n,"px"),document.getElementById("root").style.backgroundPositionX=.5*(e.pageX-t)+"px",document.getElementById("root").style.backgroundPositionY=.5*(e.pageY-n)+"px",document.getElementById("bg").style.backgroundPositionX=.25*(e.pageX-t)+"px",document.getElementById("bg").style.backgroundPositionY=.25*(e.pageY-n)+"px")},onMouseDown:function(e){X("2"),"dndC"===e.target.className&&(re=!0,t=e.clientX-Number(M.left.replace("px","")),n=e.clientY-Number(M.top.replace("px","")))},onMouseUp:function(e){re=!1,"dndC"===e.target.className&&(H({left:document.getElementById("dndWrapper").style.left,top:document.getElementById("dndWrapper").style.top}),X("5"))},style:Object(O.a)({},M)},o.a.createElement("div",{className:"hoverthing"},o.a.createElement("div",{ref:q,id:"dnd",className:"dndC",style:{zIndex:F}},o.a.createElement("div",{className:"prevent-select",id:"wa"},"\xa0draggable working area"),e.notes.map((function(e){return o.a.createElement(me,Object.assign({key:e.id},e))})),o.a.createElement("div",null,o.a.createElement(Ge.a,{in:l,nodeRef:z,timeout:500,classNames:"contextmenu",unmountOnExit:!0},o.a.createElement("div",{className:"menu",ref:z,style:Object(O.a)({},m,{width:"9rem"})},o.a.createElement("ul",{className:"menu-options"},o.a.createElement("li",{className:"menu-option prevent-select",onClick:Q},"add note"),o.a.createElement("li",{className:"menu-option prevent-select",onClick:Z},"upload picture"),o.a.createElement("li",{className:"menu-option prevent-select",onClick:ee},"add HTML"))))),o.a.createElement("div",null,o.a.createElement(Ge.a,{in:E,nodeRef:P,timeout:500,classNames:"contextmenu",unmountOnExit:!0},o.a.createElement("div",{className:"menu",ref:P,style:Object(O.a)({},k.style,{width:"9rem"})},o.a.createElement("ul",{className:"menu-options"},o.a.createElement("li",{className:"menu-option prevent-select",onClick:te},"delete note"),o.a.createElement("li",{className:"menu-option"},o.a.createElement("div",{className:"dropdown prevent-select"},"set color",o.a.createElement("div",{className:"dropdown-content"},o.a.createElement("table",{style:{width:"6em",height:"6em",background:"black",border:"solid 1px #665533",cursor:"auto"}},o.a.createElement("tbody",null,o.a.createElement("tr",null,o.a.createElement("td",null,o.a.createElement("button",{className:"button",id:"#ffffcc",onClick:ne,style:{background:fe.get("#ffffcc").background}})),o.a.createElement("td",null,o.a.createElement("button",{className:"button",id:"#ffcccc",onClick:ne,style:{background:fe.get("#ffcccc").background}})),o.a.createElement("td",null,o.a.createElement("button",{className:"button",id:"#ccffff",onClick:ne,style:{background:fe.get("#ccffff").background}}))),o.a.createElement("tr",null,o.a.createElement("td",null,o.a.createElement("button",{className:"button",id:"#99ffcc",onClick:ne,style:{background:fe.get("#99ffcc").background}})),o.a.createElement("td",null,o.a.createElement("button",{className:"button",id:"#ffccff",onClick:ne,style:{background:fe.get("#ffccff").background}})),o.a.createElement("td",null,o.a.createElement("button",{className:"button",id:"#80ffff",onClick:ne,style:{background:fe.get("#80ffff").background}}))),o.a.createElement("tr",null,o.a.createElement("td",null,o.a.createElement("button",{className:"button",id:"#ff99c2",onClick:ne,style:{background:fe.get("#ff99c2").background}})),o.a.createElement("td",null,o.a.createElement("button",{className:"button",id:"#99ff99",onClick:ne,style:{background:fe.get("#99ff99").background}})),o.a.createElement("td",null,o.a.createElement("button",{className:"button",id:"#ff99ff",onClick:ne,style:{background:fe.get("#ff99ff").background}})))))))))))),function(e){return o.a.createElement("div",null,o.a.createElement(Ge.a,{in:w,nodeRef:W,timeout:500,classNames:"contextmenu",unmountOnExit:!0},o.a.createElement("div",{ref:W},o.a.createElement(He,{setVisible:N,top:U.top,left:U.left,channelId:e.channel.id,style:Object(O.a)({},U)}))))}(e),function(e){return o.a.createElement("div",null,o.a.createElement(Ge.a,{in:I,nodeRef:G,timeout:500,classNames:"contextmenu",unmountOnExit:!0},o.a.createElement("div",{ref:G},o.a.createElement(We,Object.assign({setVisible:_},e,{top:U.top,left:U.left,channelId:e.channel.id,style:Object(O.a)({},U)})))))}(e)),e.pictures.map((function(e){return o.a.createElement(Oe,Object.assign({key:e.id},e))})),e.htmls.map((function(e){return o.a.createElement(ke,Object.assign({key:e.id},e))})))):o.a.createElement(je,null)})),Ye=n(442),Fe=n(230),Xe=(n(396),Object(f.b)((function(e){return{channel:e.channel}}),null)((function(e){var t=Object(c.useState)("channelNameAnim"),n=Object(s.a)(t,2),a=n[0],r=n[1];return Object(c.useEffect)((function(){r("channelNameAnim")}),[e.channel]),o.a.createElement("div",{className:a,onAnimationEnd:function(){return r("channelName")}},e.channel.name)}))),Ve=Object(f.b)((function(e){return{user:e.loggedUser}}),null)((function(e){var t=Object(c.useState)(""),n=Object(s.a)(t,2),a=n[0],r=n[1],i=Object(c.useRef)(0);Object(c.useEffect)((function(){return l(e.user),function(){clearTimeout(i.current),l(void 0)}}),[e.user]);var l=function e(t){var n=new Date;clearTimeout(i.current),t&&(r(n.toString().slice(16,24)),i.current=setTimeout(e.bind(null,t),1e3))};return o.a.createElement("div",null,a)})),qe=Object(f.b)((function(e){return{user:e.loggedUser,channel:e.channel,connectedUsers:e.connectedUsers,gapi:e.gapi}}),{clearUser:j})((function(e){var t=e.user,n=e.channel,a=e.connectedUsers,r=e.gapi,i=e.clearUser,l=Object(c.useState)(!0),u=Object(s.a)(l,2),d=u[0],f=u[1],m=Object(c.useState)(0),p=Object(s.a)(m,2),g=p[0],b=p[1],E=[{id:0,content:o.a.createElement("div",null)},{id:1,content:o.a.createElement(ce,{setChat:f})},{id:2,content:o.a.createElement(se,{setChat:f})}];Object(c.useEffect)((function(){b(t?t&&d?1:2:0)}),[t,d]);var h=Object(k.b)(t,null,{from:{opacity:0,transform:"scale(0)"},enter:{opacity:1,transform:"scale(1)"},leave:{opacity:0,transform:"scale(0)"},config:{mass:1,tension:300,friction:12}}),v=Object(k.b)(E[g],(function(e){return e.id}),{from:{opacity:0},enter:{opacity:1},leave:{opacity:0},config:{duration:250}}),y=function(e){e.preventDefault(),document.getElementById("root").style.backgroundPositionX="0px",document.getElementById("root").style.backgroundPositionY="0px",document.getElementById("bg").style.backgroundPositionX="0px",document.getElementById("bg").style.backgroundPositionY="0px",i(t),f(!0),r&&r.auth2.getAuthInstance().signOut()};return o.a.createElement("div",null,o.a.createElement(I.a,{style:{margin:"0",padding:"0",backgroundColor:"transparent"},placeholder:!0},n&&o.a.createElement(Ye.a,{backend:Fe.a},o.a.createElement(Ke,null))),o.a.createElement("div",{style:{position:"absolute",top:"2em",left:"40%"}},n&&o.a.createElement(Xe,null)),h.map((function(e){var t=e.item,n=e.key,a=e.props;return t&&o.a.createElement(k.a.div,{key:n,style:Object(O.a)({},a,{zIndex:"10",position:"absolute",top:"2em",left:"3em"})},o.a.createElement("div",{className:"clock"},o.a.createElement(Ve,null)))})),v.map((function(e){var t=e.item,n=e.props,a=e.key;return o.a.createElement(k.a.div,{key:a,style:Object(O.a)({},n,{zIndex:"10",position:"absolute",top:"2em",right:"2em",minWidth:"22rem",width:"25vw",paddingRight:"0"})},t.content)})),h.map((function(e){var n=e.item,a=e.key,r=e.props;return n&&o.a.createElement(k.a.div,{key:a,style:Object(O.a)({},r,{zIndex:"10",position:"absolute",bottom:"2em",left:"2em"})},o.a.createElement("div",{className:"loggedin"},t&&t.username," is logged in "),o.a.createElement("div",{style:{float:"left",display:"inline"}},o.a.createElement(R,{className:"logoutbutton",onClick:y},"logout")))})),h.map((function(e){var t=e.item,n=e.key,r=e.props;return t&&o.a.createElement(k.a.div,{key:n,style:Object(O.a)({},r),className:"connected"},o.a.createElement("span",{style:{fontWeight:"400",color:"#e5ddcc",textAlign:"center",borderBottom:"1px solid #b29966"}},"connected users"),o.a.createElement("ul",{style:{fontWeight:"400",listStyleType:"none",marginTop:"0",marginBottom:"0",padding:"0.2em 0 0 0"}},a&&a.map((function(e,t){return o.a.createElement("li",{style:{flex:"right"},key:t},e)}))))})))})),Je=(n(397),function(){var e=Object(c.useState)(!0),t=Object(s.a)(e,2),n=t[0],a=t[1];return Object(c.useEffect)((function(){a(!1)}),[]),n?o.a.createElement(je,null):o.a.createElement(u.a,{id:"cont",style:{width:"100%",height:"100vh"}},o.a.createElement(B,null),o.a.createElement(qe,null))}),$e=n(227),Qe=n(43),Ze=n(228),et=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_CONNECTED_USERS":return t.data;default:return e}},tt=n(229),nt=n.n(tt),at=Object(Qe.combineReducers)({messages:z,loggedUser:w,channels:F,gapi:y,pictures:Z,channel:te,users:v,htmls:ae,notes:q,error:oe,connectedUsers:et}),rt=Object(Qe.createStore)((function(e,t){return"USER_LOGOUT"===t.type&&(e=void 0),at(e,t)}),Object($e.composeWithDevTools)(Object(Qe.applyMiddleware)(Ze.a,(function(e){var t=nt()("wss://visualchat.onrender.com");return t.on("message",(function(t){e.getState().channel.id===t.channelID&&e.dispatch({type:"SOCKET_MESSAGE_RECEIVED",data:{channel:t.channelID,messages:t.messages}})})),t.on("add_note",(function(t){e.getState().channel.id===t.channelID&&e.dispatch({type:"SOCKET_ADD_NOTE",data:t.note})})),t.on("add_html",(function(t){e.getState().channel.id===t.channelID&&e.dispatch({type:"SOCKET_ADD_HTML",data:t.html})})),t.on("callback",(function(t){var n;return r.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:if(e.getState().channel.id!==t.id){a.next=6;break}if(e.getState().loggedUser.token===t.token){a.next=6;break}return a.next=4,r.a.awrap(J(e.getState().channel.id,e.getState().loggedUser));case 4:n=a.sent,e.dispatch({type:"INIT_PICTURES",data:n});case 6:case"end":return a.stop()}}))})),t.on("delete_note",(function(t){e.getState().channel.id===t.channelID&&e.dispatch({type:"SOCKET_DELETE_NOTE",data:t.noteID})})),t.on("set_note",(function(t){e.getState().channel.id===t.channelID&&e.dispatch({type:"SOCKET_SET_NOTE",data:t.note})})),t.on("set_html",(function(t){e.getState().channel.id===t.channelID&&e.dispatch({type:"SOCKET_SET_HTML",data:t.html})})),t.on("myError",(function(t){e.dispatch({type:"SET_ERROR",data:t})})),t.on("channel",(function(t){t.users.find((function(t){return t===e.getState().loggedUser.userId}))&&e.dispatch({type:"SOCKET_ADD_CHANNEL",data:t})})),t.on("set_connected_users",(function(t){e.dispatch({type:"SET_CONNECTED_USERS",data:t})})),t.on("reconnect",(function(){e.getState().loggedUser&&t.emit("action",{type:"SET_USER",data:e.getState().loggedUser}),e.getState().channel&&t.emit("action",{type:"SET_CHANNEL",data:{user:e.getState().loggedUser.username,name:e.getState().channel.name,token:e.getState().loggedUser.token}})})),function(e){return function(n){return"SEND_WEBSOCKET_MESSAGE"===n.type||"CREATE_CHANNEL"===n.type||"ADD_NOTE"===n.type||"SET_NOTE"===n.type||"CALLBACK"===n.type||"DELETE_NOTE"===n.type||"SET_USER"===n.type||"USER_LOGOUT"===n.type||"SET_HTML"===n.type||"ADD_HTML"===n.type||"SET_CHANNEL"===n.type?(t.emit("action",n),"SEND_WEBSOCKET_MESSAGE"===n.type||"SET_NOTE"===n.type||"SET_USER"===n.type||"USER_LOGOUT"===n.type||"SET_CHANNEL"===n.type?e(n):void 0):e(n)}}})))),ct=function(){l.a.render(o.a.createElement(f.a,{store:rt},o.a.createElement(Je,null)),document.getElementById("root"))};ct(),rt.subscribe(ct)}},[[245,1,2]]]);
//# sourceMappingURL=main.ae914f05.chunk.js.map