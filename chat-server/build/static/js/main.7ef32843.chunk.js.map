{"version":3,"sources":["components/visualchat.png","hooks/field.js","services/users.js","reducers/usersReducer.js","reducers/gapiReducer.js","components/Info.js","services/login.js","reducers/loggedUserReducer.js","components/Login.js","services/messages.js","reducers/messageReducer.js","components/Message.js","components/FocusScrollable.js","components/MessageForm.js","services/channels.js","reducers/channelsReducer.js","services/notes.js","reducers/noteReducer.js","services/pictures.js","reducers/pictureReducer.js","reducers/selectedChannelReducer.js","components/DropDownContainer.js","components/ChatWindow.js","reducers/errorReducer.js","components/CreateChannelForm.js","components/noteColors.js","components/Note.js","components/Header.js","components/Image.js","components/UploadForm.js","components/DnDContainer.js","components/ChannelName.js","components/Clock.js","components/Chat.js","App.js","reducers/connectedUsersReducer.js","index.js"],"names":["module","exports","useField","type","useState","value","setValue","input","onChange","event","target","reset","user","a","async","axios","get","headers","Authorization","token","data","newData","post","reducer","state","action","users","Info","message","clear","text","setText","show","setShow","id1","useRef","id2","useEffect","current","setTimeout","clearTimeout","useTransition","from","opacity","enter","leave","config","duration","map","item","key","props","div","style","color","backgroundColor","border","borderRadius","padding","fontSize","margin","content","credentials","response","clearUser","window","localStorage","removeItem","image","require","HoverButton","styled","button","connect","loggedUser","gapi","setUser","gredentials","dispatch","loginService","Error","setItem","JSON","stringify","resetUser","signUp","userdata","usersService","setGapi","username","password","setSignUp","setMessage","loaded","setLoaded","loggedUserJSON","getItem","parse","console","log","name","setU","REACT_APP_CLIENT_ID","process","CLIENT_ID","loadGapiInsideDOM","newGapi","loadGapi","loadAuth2","auth2","isSignedIn","updateUser","currentUser","attachSignin","document","getElementById","setAuth2","getBasicProfile","getName","profileImg","getImageUrl","email","getEmail","id","getId","idToken","xc","id_token","element","attachClickHandler","googleUser","error","transitions","handleInputs","func","preventDefault","trim","length","handleLogin","e","handleSignUp","form","buttonText","eventHandler","Form","inverted","paddingTop","paddingBottom","onSubmit","Input","icon","iconPosition","label","placeholder","marginBottom","className","autoFocus","Div","maxWidth","width","src","Segment","Grid","columns","paddingLeft","paddingRight","relaxed","stackable","Column","verticalAlign","onClick","whiteSpace","onLoad","display","position","top","left","marginLeft","msgs","removeAnimation","messages","slice","m","split","replace","msg","uus","date2","tempString","date","undefined","s","year","month","day","hour","min","sec","Date","stringToDate","marginRight","float","headerStyle","lineHeight","textAlign","fontWeight","onAnimationEnd","i","index","channel","addMsg","getTime","getTimezoneOffset","toISOString","warning","setWarning","sendMsg","txt","background","borderTop","borderBottom","borderLeft","borderRight","onKeyPress","marginTop","fontFamily","userId","channels","concat","notes","setNote","note","newNote","n","filter","pictures","addPicture","picture","callback","pictureReducer","setChannel","initializeChannels","channelsService","initializeMessages","messageService","initializePictures","pictureService","initializeNotes","noteService","selectedIndex","childNodes","chId","find","cursor","borderColor","defaultValue","baddingBottom","setChat","initializeUsers","createChannel","setError","newFeed","initEmpty","selection","setSelection","channelsCount","setChannelsCount","resetWarnings","setNewChannel","Button","Dropdown","fluid","multiple","search","options","u","chName","c","Map","pr","set","transform","useDrag","collect","monitor","isDragging","drag","ref","updateText","Id","author","title","followCursor","theme","delay","trigger","setDate","height","onBlur","HeaderContainer","HeaderBG","HeaderTXT","Header","Number","pic","Image","contentType","buffer","binary","call","Uint8Array","forEach","b","String","fromCharCode","btoa","arrayBufferToBase64","onload","zIndex","alt","autoClose","toast","POSITION","BOTTOM_CENTER","hideProgressBar","closeOnClick","pauseOnHover","draggable","progress","FlexItem","Container2","FormHeader","span","LabelStyle","p","TextInput","setVisible","channelId","selectedFile","setSelectedFile","itemName","useDispatch","flexDirection","alignItems","justifyContent","files","size","match","warn","required","Progress","max","Math","round","payload","FormData","append","info","onUploadProgress","ProgressEvent","total","then","res","catch","visible","addNote","deleteNote","noteID","channelID","offsetX","offsetY","menu","setMenu","menu2","setMenu2","uploadForm","setUploadForm","pos","setPos","open","setOpen","seen","setZIndex","rotation","transitions2","useDrop","accept","drop","delta","getDifferenceFromInitialOffset","x","y","moveNote","handleContextMenu2","offsetParent","nativeEvent","handleAddNote","offsetHeight","handleUploadPicture","um","handleDelete","setColor","hideMenus","moveContent","timeoutid","tip","hideTip","useCallback","onContextMenu","onPointerOver","onPointerDown","onPointerOut","onMouseMove","pageX","pageY","backgroundPositionX","backgroundPositionY","onMouseDown","clientX","clientY","onMouseUp","onShown","ch","upload","css","setCss","time","setTime","timeoutId","updateTime","toString","bind","connectedUsers","chat","setIndex","elements","mass","tension","friction","handleLogout","getAuthInstance","signOut","DndProvider","backend","HTML5Backend","textShadow","right","minWidth","bottom","listStyleType","flex","App","loading","setLoading","Container","combineReducers","messageReducer","loggedUserReducer","channelsReducer","gapiReducer","selectedChannelReducer","usersReducer","noteReducer","errorReducer","connectedUsersReducer","store","createStore","composeWithDevTools","applyMiddleware","thunk","storeAPI","socket","io","on","getState","emit","next","render","ReactDOM","subscribe"],"mappings":"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","file":"static/js/main.7ef32843.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/visualchat.c935913a.png\";","import { useState } from 'react'\n\nexport const useField = (type) => {\n  const [value, setValue] = useState('')\n\n  const onChange = (event) => {\n    setValue(event.target.value)\n  }\n  const reset = () => {\n    setValue('')\n  }\n\n  return {\n    input:{ type,\n      value,\n      onChange },\n    reset:reset\n  }\n}","import axios from 'axios'\n\nconst baseUrl = '/api/users'\n\nconst getUsers = async (user) => { \n  return await axios.get(`${baseUrl}`, { headers: {Authorization: user.token}})\n}\nconst addUser = async (data) => {\n  let newData = null\n  try {\n    newData = await axios.post(`${baseUrl}/signup`, data)\n    return newData.data\n  } catch (exception) {\n    return newData\n  }\n}\nexport default { getUsers, addUser }","import usersService from '../services/users'\n\nexport const initializeUsers = user => async dispatch => {\n  const data = await usersService.getUsers(user)\n  dispatch({\n    type: 'GET_USERS',\n    data\n  })\n}\n\n\nexport const signUp = userdata => async dispatch => {\n  const data = await usersService.addUser(userdata)\n  if(!data) throw Error('username is in use')\n  dispatch({\n    type: 'ADD_USER',\n    data\n  })\n}\n\n\nconst reducer = (state = [], action) => {\n  switch (action.type) {\n  case 'GET_USERS':\n    return  action.data.data.users\n  case 'ADD_USER':\n    return [...state, action.data]\n  default:\n    return state\n  }\n}\nexport default reducer","export const setGapi = data => dispatch => {\n    dispatch ({\n      type: 'SET_GAPI',\n      data\n    })\n  }\n  \n  const reducer = (state = null, action) => {\n    switch (action.type) {\n    case 'SET_GAPI':\n      return action.data\n    default:\n      return state\n    }\n  }\n  export default reducer","import React, { useState, useEffect, useRef } from 'react'\nimport { useTransition, animated } from 'react-spring'\n\nconst Info = ({message,clear}) => {\n\n  const [text, setText] = useState(message)\n  const [show, setShow] = useState(false)\n  const id1 = useRef(-1)\n  const id2 = useRef(-1)\n   \n  useEffect(() => {\n    if(message) {setShow(true)\n      setText(message)\n      id1.current = setTimeout(() => {\n        setShow(false)\n        id2.current = setTimeout(() => {\n          clear()\n        },800)\n      },5000)\n    } else setShow(false)\n    return () => {\n      clearTimeout(id1.current)\n    }\n  }, [message, clear])\n \n  const transitions = useTransition(show, null, {\n    from: { opacity: 0} ,\n    enter: { opacity: 1 },\n    leave: { opacity: 0 },\n    config: {duration:250}\n  })\n\n  return transitions.map(({ item, key, props }) => (\n    item && <animated.div key={key} style={{\n      color:text.color,\n      backgroundColor:'black',\n      border:`1px solid ${text.color}`,\n      borderRadius:'6px', \n      padding:'1em',\n      fontSize:'1.2em',\n      margin:'0em',\n      ...props}}>\n      {text.content}\n    </animated.div>\n  ))\n}\n\nexport default Info","import axios from 'axios'\nconst baseUrl = '/api/users'\n\nconst login = async credentials => {\n  \n  try {\n    const response = await axios.post(`${baseUrl}/login`, credentials)\n    return response.data\n  } catch (e) {\n    return null\n  }/*\n  try {\n    const response = await axios.get(`/google`)\n    console.log(response)\n    return response\n  } catch (e) {\n    console.log(e)\n    return null\n  }*/\n}\n\nexport default { login }","import loginService from '../services/login'\n\nexport const setUser = gredentials => async dispatch => {\n  const data = await loginService.login(gredentials)\n  if(!data) throw Error('invalid username or password')\n  window.localStorage.setItem(\n    'loggedChatUser', JSON.stringify(data)\n  )\n  await dispatch({\n    type: 'SET_USER',\n    data\n  })\n}\n\nexport const clearUser = (data) => {\n  window.localStorage.removeItem('loggedChatUser')\n  return { type: 'USER_LOGOUT', data }\n}\n\nexport const resetUser = data => ({ type:'SET_USER', data })\n\nconst reducer = (state = null, action) => {\n  switch (action.type) {\n  case 'SET_USER':\n    return  action.data\n  case 'USER_LOGOUT':\n    return null\n  default:\n    return state\n  }\n}\nexport default reducer","import React, { useEffect, useState } from 'react'\nimport { connect } from 'react-redux'\nimport { useField } from '../hooks/field'\nimport { signUp } from '../reducers/usersReducer'\nimport { setGapi } from '../reducers/gapiReducer'\nimport Info from './Info'\nimport { setUser, clearUser, resetUser } from '../reducers/loggedUserReducer'\nimport { useTransition, animated } from 'react-spring'\nimport styled from 'styled-components'\nimport { Form, Grid, Segment, Image } from 'semantic-ui-react'\nimport { loadGapiInsideDOM, loadAuth2 } from 'gapi-script'\n//import GoogleLogin from './GoogleLogin'\nimport './Login.css'\nconst image = require('./visualchat.png')\n\nexport const HoverButton = styled.button`\nborder: 1px solid #665533;\ncursor:pointer;\ncolor:#b29966;\nbackground-color:black;\ntransition: background-color 250ms ease-in, border-color 250ms ease-in, color 250ms ease-in;\n&:hover{\n  background-color:rgba(53, 46, 17, 0.6);\n  border-color: #b29966;\n  color: #d4c6aa;\n}`\n\n\nconst Login = (props) => {\n  const username = useField('text')\n  const password = useField('password')\n  const [signUp, setSignUp] = useState(false)\n  const [message, setMessage] = useState(null)\n  const [loaded, setLoaded] = useState(false)\n\n  useEffect(() => {\n    const setU = async () => {\n      const loggedUserJSON = window.localStorage.getItem('loggedChatUser')\n      if (loggedUserJSON) {\n        try {\n          const user = await JSON.parse(loggedUserJSON)\n          await props.resetUser(user)\n        } catch (e) { console.log(e.name) }\n      }\n    }\n    setU()\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [])\n\n  //////////////////////////GOOGLE/////////////////////////////////\n  const [user, setUser] = useState(null);\n  const REACT_APP_CLIENT_ID = process.env.CLIENT_ID\n\n  useEffect(() => {\n    const loadGapi = async () => {\n      const newGapi = await loadGapiInsideDOM();\n      props.setGapi(newGapi)\n    }\n    loadGapi();\n  }, [props.gapi]);\n  \n  useEffect(() => {\n    if (!props.gapi) return;\n\n    const setAuth2 = async () => {\n      const auth2 = await loadAuth2(props.gapi, REACT_APP_CLIENT_ID, '')\n      // console.log(auth2.currentUser.get().xc.access_token)\n      // token = auth2.currentUser.get().xc.access_token\n      //  console.log(auth2.currentUser.get().getBasicProfile())\n      /*\n        Ad: \"juha jokinen\"\n        NT: \"111829797743998828111\"\n        cu: \"juhaj358@gmail.com\"\n        hK: \"https://lh3.googleusercontent.com/a/ACg8ocL0jDwSxNdw_eVEPTjYe8K8jwosQGujKvhOQ-mFM1t36g=s96-c\"\n        rV: \"juha\"\n        uT: \"jokinen\"\n      */\n      //  console.log(Object.keys(gapi),Object.keys(auth2))\n\n      if (auth2.isSignedIn.get()) {\n        updateUser(auth2.currentUser.get())\n      } else {\n        attachSignin(document.getElementById('customBtn'), auth2);\n      }\n    }\n    setAuth2();\n  }, [props.gapi]);\n\n  useEffect(() => {\n    if (!props.gapi) return;\n\n    if (!user) {\n      const setAuth2 = async () => {\n        const auth2 = await loadAuth2(props.gapi, REACT_APP_CLIENT_ID, '')\n        attachSignin(document.getElementById('customBtn'), auth2);\n      }\n      setAuth2();\n    }\n  }, [user, props.gapi])\n\n  const updateUser = (currentUser) => {\n    const name = currentUser.getBasicProfile().getName();\n    const profileImg = currentUser.getBasicProfile().getImageUrl();\n    const email = currentUser.getBasicProfile().getEmail();\n    const id = currentUser.getBasicProfile().getId()\n    setUser({\n      name: name,\n      profileImg: profileImg,\n      email: email,\n      id: id\n    });\n    /*\n    console.log({\n      name: name,\n      profileImg: profileImg,\n      email: email,\n      id: id\n    })\n    console.log(currentUser)\n    console.log(currentUser.xc.id_token.length) */\n    props.setUser({\n      idToken: currentUser.xc.id_token,\n    })\n  };\n\n  const attachSignin = (element, auth2) => {\n    auth2.attachClickHandler(element, {},\n      (googleUser) => {\n        updateUser(googleUser);\n      }, (error) => {\n        console.log(JSON.stringify(error))\n      });\n  };\n\n  const signOut = () => {\n    const auth2 = props.gapi.auth2.getAuthInstance();\n    auth2.signOut().then(() => {\n      setUser(null);\n      console.log('User signed out.');\n    });\n  }\n  //////////////////////////////////////////////////////////////\n\n  const transitions = useTransition((!window.localStorage.getItem('loggedChatUser') || !props.user) && loaded, null, {\n    from: { opacity: 0 },\n    enter: { opacity: 1 },\n    leave: { opacity: 0 }\n  })\n  const handleInputs = async (event, func) => {\n    event.preventDefault()\n    try {\n      if (!username.input.value || username.input.value.trim().length < 3) {\n        setMessage({ content: 'valid username is required (min length is 3)', color: 'red' })\n        return\n      }\n      if (!password.input.value || password.input.value.length < 3) {\n        setMessage({ content: 'valid password is required (min length is 3)', color: 'red' })\n        return\n      }\n      const credentials = {\n        username: username.input.value.trim(), password: password.input.value\n      }\n      await func(credentials)\n    } catch (exception) {\n      setMessage({ content: exception.message, color: 'red' })\n      return\n    }\n    if (signUp) {\n      setMessage({ content: `account created for user: ${username.input.value}!`, color: 'green' })\n      return\n    }\n    setMessage(null)\n  }\n\n  const handleLogin = (e) => {\n    handleInputs(e, props.setUser)\n  }\n  const handleSignUp = async (e) => {\n    await handleInputs(e, props.signUp)\n    setSignUp(false)\n    username.reset()\n    password.reset()\n  }\n\n\n  const form = (buttonText, eventHandler) => (\n    <Form inverted style={{ paddingTop: '2em', paddingBottom: '1em' }} onSubmit={eventHandler} >\n      <Form.Input\n        icon='user'\n        iconPosition='left'\n        label='Username'\n        placeholder='Username'\n        {...username.input}\n      />\n      <Form.Input\n        icon='lock'\n        iconPosition='left'\n        label='Password'\n        style={{ color: '#b29966', backgroundColor: 'black', border: 'solid 1px #b29966', marginBottom: '0.5em' }}\n        {...password.input}\n      />\n      <button className='myButton' autoFocus type=\"submit\">{buttonText}</button>\n    </Form>\n  )\n  const options = () => (\n    <div >\n      <Grid columns={3} style={{ paddingLeft: '3em', paddingRight: '3em',paddingBottom:'2em'}} relaxed='very' stackable >\n        <Grid.Column>\n          {form('Login', handleLogin)}\n        </Grid.Column>\n        <Grid.Column verticalAlign='middle'>\n          <button className='myButton' onClick={() => setSignUp(true)} type='button'>Sign up</button>\n        </Grid.Column>\n        <Grid.Column verticalAlign='middle'>\n          <button id=\"customBtn\" className=\"myButton\" style={{whiteSpace:'nowrap'}} >\n            Google Login\n          </button>\n        </Grid.Column>\n      </Grid>\n    </div>\n  )\n\n  const Div = styled.div`\n    animation-name: backGroundAnim;\n    animation-timing-function:ease-in;\n    animation-duration:500ms;\n    width:100vw;\n    height:100vh;\n  @keyframes backGroundAnim {\n    from {background:black;}\n    to {background:transparent;}\n  }`\n\n  return loaded ? transitions.map(({ item, key, props }) =>\n    item && <animated.div key={key} style={props}>\n      <div style={{ border: '0px', padding: '0px', maxWidth: '1280px', width: '70%', margin: 'auto' }}>\n        <Image style={{ paddingTop: '7vh' }} src={image} />\n        <Segment style={{ padding: '0px', margin: '0rem', backgroundColor: 'black', border: 'solid 1px #665533' }} placeholder>\n          {!signUp && options()}\n          {signUp && form('Sign Up', handleSignUp)}\n        </Segment>\n        <Info message={message} clear={() => setMessage(null)} />\n      </div>\n    </animated.div>\n  ) : <Div>\n    <Image onLoad={() => setLoaded(true)} style={{ display: 'none', paddingTop: '7vh' }} src={image} />\n    <span style={{ position: 'absolute', top: '50%', left: '50%', fontSize: '2em', color: '#b29966', marginLeft: '-5rem' }}>\n      loading...\n    </span>\n  </Div>\n}\n\nconst mapStateToProps = (state) => {\n  return {\n    user: state.loggedUser,\n    gapi: state.gapi\n  }\n}\nexport default connect(mapStateToProps, { setUser, clearUser, resetUser, signUp, setGapi })(Login)","import axios from 'axios'\n\nconst baseUrl = '/api/channels'\n\nconst getMessages = async (id, user) => {\n  const msgs = await axios.get(`${baseUrl}/${id}`,{ headers: {Authorization: user.token}})\n  return msgs.data\n}\nexport default {getMessages}","import messageService from '../services/messages'\n\n/*eslint-disable eqeqeq*/\n\nexport const initializeMessages = (id, user) => async dispatch => {\n  const msgs = await messageService.getMessages(id, user)\n  await dispatch({\n    type: 'INIT_MESSAGES',\n    data: msgs\n  })\n}\n\nexport const newFeed = () => ({ type: 'NEW_FEED' })\n\nexport const addMsg = (message, user, channel) => dispatch => {\n  const date = new Date()\n  const msgByAuthor =`${user.username}:${new Date(date.getTime()-date.getTimezoneOffset()*60*1000).toISOString()};${message}`\n  dispatch ({\n    type: 'SEND_WEBSOCKET_MESSAGE',\n    data: { message: msgByAuthor,\n      channel, token: user.token }\n  })\n}\n\nexport const removeAnimation = () => ({type: 'REMOVE_ANIMATION'})\n\nconst reducer = (state = [], action) => {\n  switch (action.type) {\n  case 'INIT_MESSAGES':\n    return action.data\n  case 'SOCKET_MESSAGE_RECEIVED': {\n    const msgs = action.data.messages.slice()\n    msgs[msgs.length-1] = `UUSIVIESTI:${msgs[msgs.length-1]}`\n    return msgs\n  }\n  case 'SEND_WEBSOCKET_MESSAGE':\n    return [...state,action.data.message]\n  case 'REMOVE_ANIMATION':\n    return state.map((m) => (m.split(':',1) == 'UUSIVIESTI' ? m.replace('UUSIVIESTI:', '') : m))\n  case 'NEW_FEED':\n    return []\n  default:\n    return state\n  }\n}\n\nexport default reducer","import React from 'react'\nimport { connect } from 'react-redux'\nimport { removeAnimation } from '../reducers/messageReducer'\nimport './Message.css'\n\nconst Message = (props) => {\n\n  /*eslint-disable eqeqeq*/\n\n  let name = props.message.split(':',1)\n  let msg = props.message.replace(name + ':', '')\n  let uus = false\n\n  const stringToDate = (s) => {\n    try {\n      var year = s.slice(0,4)\n      var month = s.slice(5,7)\n      var day = s.slice(8,10)\n      var hour = s.slice(11,13)\n      var min = s.slice(14,16)\n      var sec =s.slice(17,19)\n      return new Date(year,month,day,hour,min,sec,0)\n    } catch(e) {\n      return undefined\n    }\n  }\n\n  if(name == 'UUSIVIESTI'){\n    name = msg.split(':',1)\n    msg = msg.replace(name + ':', '')\n    uus=true\n  }\n\n  const tempString = msg.split(';',1)\n  const setDate = (date2) => {\n    return date2.slice(8,10)+'.'+date2.slice(5,7)+'. '+date2.slice(11,16)\n  }\n  let date = undefined\n  if(stringToDate(tempString[0]) != 'Invalid Date') {\n    date = setDate(tempString[0])\n    msg = msg.replace(tempString[0] + ';', '')\n  }\n\n  const setMessage = () => {\n    if(uus) return (\n      <div className='mymessage' onAnimationEnd={props.removeAnimation}>\n        {msg}\n      </div>\n    )\n    return (\n      <div style={{color:'#e9d396',padding:'8px 12px 8px 12px',borderRadius:'9px',backgroundColor:'rgba(5, 5, 5,0.5)'}}>\n        {msg}\n      </div>\n    )\n  }\n\n  let style = {\n    color:'#e5ddcc',\n    marginRight:'0.7rem',\n    marginLeft:'0.3rem',\n    marginBottom:'0.5rem',\n    backgroundColor:'transparent', \n    display:'inline-block', \n    float:'left'}\n\n  let headerStyle = {marginRight:'0.7rem',marginLeft:'0.3rem',float:'left', lineHeight:'1em'}\n\n  if(props.user == name){\n    style.textAlign = 'right'\n    style.float = 'right'\n    headerStyle.textAlign = 'right'\n    headerStyle.float = 'right'\n  }\n\n  const setHeader = () => {\n    if(date) return (\n      <>\n        <span style={{color:'white',marginBottom:'0px'}}>\n          {name}\n        </span>\n        <span style={{color: '#d4c6aa',fontSize:'10px',marginBottom:'0px'}}>\n          &nbsp;&nbsp;{date}\n        </span><br/>\n      </>)\n    return (<><span style={{color:'white',fontWeight:'500',marginBottom:'0px'}}>{name}</span><br/></>)\n  }\n\n  return (\n    <div style={{marginBottom:'0px'}}>\n      <div style={{clear:'left'}}></div>\n      <div style={headerStyle}>\n        {setHeader()}\n      </div>\n      <div style={{clear:'right'}}></div>\n      <div style={{clear:'left'}}></div>\n      <div style={style}>\n        {setMessage()}\n      </div>\n      <div style={{clear:'right'}}></div>\n    </div>\n  )\n}\nexport default connect(null,{ removeAnimation })(Message)\n","import React from 'react'\nimport styled from 'styled-components'\nimport ScrollableFeed from 'react-scrollable-feed'\nimport Message from './Message'\nimport { connect } from 'react-redux'\n\nconst FocusScrollable = (props) => {\n\n  const Div = styled.div`\n      padding: 0.1em 0.3em;\n      height: 33em;\n      background-image:linear-gradient(rgba(85, 71, 43,0.7),rgba(22,12,12,0.7));\n      color:#d9d9d9;\n  `\n\n  if(props.user)\n    return (\n      <Div>\n        <ScrollableFeed>\n          {props.messages.map((m,i) => <Message index={props.messages.length - i} key={i} message={m} user={props.user.username} />)}\n        </ScrollableFeed>\n      </Div>\n    ) \n  return <div></div>\n} \n\nconst mapStateToProps = (state) => {\n  return { user: state.loggedUser,\n    messages: state.messages } }\nexport default connect(mapStateToProps, null)(FocusScrollable) ","import React, { useState, useEffect } from 'react'\nimport  { useField } from '../hooks/field'\nimport { addMsg, removeAnimation } from '../reducers/messageReducer'\nimport Info from './Info'\nimport { connect } from 'react-redux'\nimport { HoverButton } from './Chat'\n/*eslint-disable eqeqeq*/\nconst MessageForm = (props) => {\n\n  const [warning, setWarning] = useState(null)\n  const msg = useField('text')\n\n  useEffect(() => {\n    setWarning(null)\n  }, [props.channel])\n\n  useEffect(() => {\n    return () => setWarning(null)\n  }, [])\n\n  const sendMsg = async () => {\n    const txt = msg.input.value\n    if(props.channel != ''){\n      setWarning(null)\n      await props.removeAnimation()\n      await props.addMsg(txt,props.user, props.channel.id)\n    } else {\n      setWarning({content:'select channel first',color:'red'})\n    }\n    msg.reset()\n  }\n  \n  const keyPressed = event => { if(event.key === 'Enter') sendMsg() }\n\n  if(props.user)\n    return (\n      <div style={{background:'black',border:'none'}}>\n        <input placeholder='write your msg here' style={{\n          padding:'0.1em 0 0.1em 0',\n          fontWeight:'500',\n          fontSize:'1.2em',\n          paddingLeft:'0.4em',\n          lineHeight:'1.2em',\n          backgroundColor:'black',\n          borderTop: 'none',\n          borderBottom: '1px solid #443922',\n          borderLeft:'none',\n          borderRight:'none',\n          color:'#b29966',\n          width:'80%'}} \n        onKeyPress={keyPressed} {...msg.input} />\n        <HoverButton style={{\n          padding:'0.2em 0 0.15em 0',\n          marginTop:'0px',\n          fontFamily: 'Lato,Helvetica Neue,Arial,Helvetica,sans-serif', \n          fontWeight:'700',\n          width:'20%'}} \n        onClick={sendMsg}>send</HoverButton>\n        <Info message={warning} clear={() => setWarning(null)} />\n      </div>\n    )\n  return <div></div>\n}\n\nconst mapStateToProps = (state) => {\n  return {\n    user: state.loggedUser,\n    channel: state.channel\n  }\n}\nexport default connect(mapStateToProps, { addMsg,removeAnimation })(MessageForm)\n","import axios from 'axios'\n\nconst baseUrl = '/api/channels'\n\nconst getChannels = async (user) => {\n   return await axios.get(`${baseUrl}/user/${user.userId}`,{ headers: {Authorization: user.token}})\n   //return {data:{channels:[]}}\n}\nexport default {getChannels}","import channelsService from '../services/channels'\n\nexport const initializeChannels = user => async dispatch => {\n  const data = await channelsService.getChannels(user)\n  await dispatch({\n    type: 'GET_CHANNELS',\n    data\n  })\n}\n\nexport const createChannel = (name, users, user) => dispatch => {\n  dispatch ({\n    type: 'CREATE_CHANNEL',\n    data: { name, users, token:user.token }\n  })\n}\n\nconst reducer = (state = [], action) => {\n  switch (action.type) {\n  case 'GET_CHANNELS':\n    return  action.data.data.channels\n  case 'SOCKET_ADD_CHANNEL':\n    return state.concat(action.data)\n  default:\n    return state\n  }\n}\nexport default reducer","import axios from 'axios'\n\nconst baseUrl = '/api/channels'\n\nconst getNotes = async (id, user) => {\n  const notes = await axios.get(`${baseUrl}/${id}/notes`, { headers: {Authorization: user.token}})\n  return notes.data\n}\nexport default {getNotes}","import noteService from '../services/notes'\n\nexport const initializeNotes = (id, user) => async dispatch => {\n  const notes = await noteService.getNotes(id, user)\n  dispatch({\n    type: 'INIT_NOTES',\n    data: notes\n  })\n}\n\nexport const addNote = (note, channel, user) => {\n  return {\n    type: 'ADD_NOTE',\n    data: { note, channel, token: user.token }\n  }\n}\n\nexport const setNote = (note, channel, user) => {\n  return {\n    type: 'SET_NOTE',\n    data: { note, channel, token: user.token }\n  }\n}\n\nexport const initEmpty = () => ({ type: 'INIT_EMPTY' })\n\nexport const deleteNote = (noteID, channelID, user) => {\n  return {\n    type: 'DELETE_NOTE',\n    data: { noteID, channelID, token: user.token }\n  }\n}\n\nconst reducer = (state = [], action) => {\n  switch (action.type) {\n  case 'INIT_NOTES':\n    return action.data\n  case 'SET_NOTE': {\n    const newNote = action.data.note\n    return state.map(n => (newNote.id === n.id ? newNote : n))\n  }\n  case 'SOCKET_ADD_NOTE':\n    return state.concat(action.data)\n  case 'SOCKET_SET_NOTE':\n    return state.map(n => (action.data.id === n.id ? action.data : n))\n  case 'SOCKET_DELETE_NOTE':\n    return state.filter(n => n.id !== action.data)\n  case 'INIT_EMPTY':\n    return []\n  default:\n    return state\n  }\n}\n\nexport default reducer","import axios from 'axios'\n\nconst baseUrl = '/api/channels'\n\nconst getPictures = async (id, user) => {\n  const pictures = await axios.get(`${baseUrl}/${id}/pictures`, { headers: {Authorization: user.token}})\n  return pictures.data\n}\nexport default {getPictures}","import pictureService from '../services/pictures'\n\nexport const initializePictures = (id, user) => async dispatch => {\n  const pictures = await pictureService.getPictures(id, user)\n  dispatch({\n    type: 'INIT_PICTURES',\n    data: pictures\n  })\n}\n// id is channel id\nexport const addPicture = (picture, id, user) => {\n  return {\n    type: 'ADD_PICTURE',\n    data: { picture, id, token: user.token }\n  }\n}\nexport const callback = (id, user) => {\n  return {\n    type: 'CALLBACK',\n    data: { id, token: user.token }\n  }\n}\n\nconst pictureReducer = (state = [], action) => {\n    switch (action.type) {\n    case 'INIT_PICTURES':\n      return action.data\n    case 'ADD_PICTURE': {\n      return state.concat(action.data.picture.data)\n      }\n    case 'CALLBACK': \n      return state\n    default:\n    return state\n    }\n  }\n\n  export default pictureReducer","export const setChannel = (id, name, user) => dispatch => {\n  dispatch ({\n    type: 'SET_CHANNEL',\n    data: {id, name, user:user.username, token: user.token}\n  })\n}\n\nconst reducer = (state = '', action) => {\n  switch (action.type) {\n  case 'SET_CHANNEL':\n    return action.data\n  default:\n    return state\n  }\n}\nexport default reducer","import React, { useEffect } from 'react'\nimport { connect } from 'react-redux'\nimport { initializeChannels } from '../reducers/channelsReducer'\nimport { initializeNotes } from '../reducers/noteReducer'\nimport { initializePictures } from '../reducers/pictureReducer'\nimport { setChannel } from '../reducers/selectedChannelReducer'\nimport { initializeMessages } from '../reducers/messageReducer'\n\n/*eslint-disable eqeqeq*/\nconst DropDownContainer = (props) => {\n\n  useEffect(() => {\n    props.initializeChannels(props.user)\n    \n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [])\n\n  const handleChange =  async e => {\n    e.preventDefault()\n    \n    const index = e.target.selectedIndex\n    const name = e.target.childNodes[index].value\n    if(index !== 0 && name !== props.channel.name){\n      const chId = props.channels.find(i => i.name == name).id\n      await props.setChannel(chId, name, props.user)\n      await props.initializeMessages(chId, props.user)\n      await props.initializeNotes(chId, props.user)\n      await props.initializePictures(chId, props.user)\n    }\n  }\n\t\n  return (\n    <div>\n      <select onChange={handleChange} \n        style={{\n          border:'none',\n          cursor:'pointer',\n          paddingLeft:'0.4em',\n          fontSize:'1.4em',\n          fontFamily: 'Abhaya Libre, serif',\n          fontWeight:'900',\n          color:'#b29966',\n          borderColor:'black',\n          backgroundColor:'black',\n          width:'100%'}}>\n        {[<option key='-1' defaultValue=''>select channel:</option>,...props.channels.map((channel,i) => (<option value={channel.name} key={i}>{channel.name}</option>))]}\n      </select>\n    </div>\n  )    \n} \n\nconst mapStateToProps = (state) => {\n  return {\n    channels: state.channels,\n    channel: state.channel,\n    user: state.loggedUser,\n    pictures: state.pictures\n  }\n}\n\nexport default connect(\n  mapStateToProps,\n  { initializeChannels, \n    setChannel, \n    initializeMessages,\n    initializePictures,\n    initializeNotes,\n    })(DropDownContainer)","//import React, { useEffect, useState } from 'react'\nimport React from 'react'\nimport FocusScrollable from './FocusScrollable'\nimport MessageForm from './MessageForm'\nimport { HoverButton } from './Chat'\n//import { useDrag } from 'react-dnd'\nimport DropDownContainer from './DropDownContainer'\nimport { connect } from 'react-redux'\n\n\nconst ChatWindow = (props) => {\n/*\n  const [pos, setPos] = useState({left:'0px',top:'0px'})\n\n  let isDragging = false\n  let drag = null\n  useEffect(() =>{\n    console.log(document.getElementById('chat-window'))\n    setPos({left: document.getElementById('chat-window').style.left, top: document.getElementById('chat-window').style.top})\n  },[])\n  \n  [{ isDragging }, drag] = useDrag({\n    item: { id:'chat-window', left: pos.left , top:pos.top, type: 'cw'},\n    collect: monitor => {\n      return {isDragging: monitor.isDragging()}\n    },\n  })\n  if (isDragging) {\n    return <div ref={drag} />\n  }\n*/\n  const handle = () => {\t\n    props.setChat(false)\n  }\n\n  return (\n    <div>\n      <div style={{backgroundColor: 'black',color:'white',borderBottom:'1px solid #443922', marginTop:'-0.2em'}}>\n        <table style={{width:'100%', borderTop:'1px solid #443922'}}>\n          <tbody>\n            <tr >\n              <td style={{paddingLeft:'0.6em',fontSize:'1.2em',fontWeight:'bold',paddingBottom:'0em', width:'50%'}}>\n                <div style={{\n                  fontFamily: 'Abhaya Libre, serif',\n                  fontWeight:'800',\n                  baddingBottom:'0px', \n                  marginBottom:'-0.2em',\n                  color:'#e9d396'}}>\n\t\t\t\t\t\t\t\t\tCHANNEL \n                </div>\n              </td>\n              <td style={{\n                whiteSpace: 'nowrap', \n                width:'50%',\n                marginRight:'0%', \n                paddingRight:'0px', \n                borderRight:'0px', \n                textAlign:'right'}}>\n                <div style={{\n                  color:'#d4c6aa',\n                  fontSize:'1.3em',\n                  fontFamily: 'Abhaya Libre, serif',\n                  fontWeight:'700',\n                  baddingBottom:'0px', \n                  whiteSpace: 'nowrap', \n                  display:'inline'}}>\n                  create new channel\n                </div>\n                <div style={{marginLeft:'0.5em', display:'inline'}}>\n                  <HoverButton style={{\n                    fontFamily: 'Lato,Helvetica Neue,Arial,Helvetica,sans-serif', \n                    fontWeight:'700'}}  onClick={handle}>create</HoverButton>\n                </div>\n              </td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n      <DropDownContainer user={props.user} />\n      <FocusScrollable/>\n      <MessageForm />\n    </div>\n  )\n}\n\nconst mapStateToProps = (state) => {\n  return {\n    user: state.loggedUser\n  }\n}\nexport default connect(mapStateToProps)(ChatWindow)","export const setError = data => dispatch => {\n  dispatch ({\n    type: 'SET_ERROR',\n    data\n  })\n}\n\nconst reducer = (state = null, action) => {\n  switch (action.type) {\n  case 'SET_ERROR':\n    return action.data\n  default:\n    return state\n  }\n}\nexport default reducer","import React, { useEffect, useState } from 'react'\nimport { connect } from 'react-redux'\nimport  { useField } from '../hooks/field'\nimport { initializeUsers } from '../reducers/usersReducer'\nimport { createChannel } from '../reducers/channelsReducer'\nimport { newFeed } from '../reducers/messageReducer'\nimport { initEmpty } from '../reducers/noteReducer'\nimport { setError } from '../reducers/errorReducer'\nimport Info from './Info'\nimport { setChannel } from '../reducers/selectedChannelReducer'\nimport { Form, Dropdown } from 'semantic-ui-react'\nimport { HoverButton } from './Chat'\nimport styled from 'styled-components'\n\nconst CreateChannelForm = (props) => {\n\n  const [selection, setSelection] = useState([])\n  const name = useField('text')\n  const [message,setMessage] = useState(null)\n  const [channelsCount,setChannelsCount] = useState(props.channels.length)\n\t\n  const resetWarnings = () => {\n    setMessage(null)\n    props.setError(null)\n  }\n  \n  useEffect(() => {\n    if(props.error) setMessage({content:props.error.message,color:'red'})\n  },[props.error])\n\n  useEffect(() => {\n    if(props.user) props.initializeUsers(props.user)\n    if(channelsCount < props.channels.length){\n      setChannelsCount(props.channels.length)\n      const setNewChannel = async () => {\n        const chId = await props.channels.find(i => i.name === name.input.value.trim()).id\n        await props.setChannel(chId, name.input.value.trim(), props.user)\n        await props.newFeed()\n        await props.initEmpty()\n        resetWarnings()\t\n      }\n      setNewChannel()\n      props.setChat(true)\n    }\n    return () => {\n      resetWarnings()\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [props.channels])\n\n  const handleChange = (e,data) => {\n    e.preventDefault()\n    setSelection(data.value)\n  }\n\n  const handleSubmit = async (e) => {\n    e.preventDefault()\n    const chName = name.input.value.trim()\n    if(selection.length > 0 && chName !== '') {\n      if(props.channels.find(c => c.name === chName)){\n        setMessage({content:'dublicate channel name',color:'red'})\n        return\n      }\n      await props.createChannel(chName, [...selection,props.user.userId], props.user)\n    }\n    else setMessage({content:'users or name missing', color:'red'})\n  }\n  const cancel = () => {\n    props.setChat(true)\n  }\n\n  const Button = styled(HoverButton)`\n    font-size:1.1em;\n    font-weight:500; \n    padding:0.25em 0.4em 0.4em 0.4em;\n    border-radius:2px;\n    vertical-align:middle;\n    margin-top:1.4em;\n    display:inline;\n  `\n\n  if(props.users)\n    return (\n      <div style={{textAlign:'center'}}>\n        <Form inverted>\n          <Form.Input\n            label='Name'\n            placeholder='channel name'\n            style={{width:'80%', margin:'auto'}}\n            {...name.input}\n          />\n          <div style={{width:'80%', margin:'auto'}}>\n            <div style={{color:'white',fontWeight:'bold', paddingBottom:'0.3em'}}>Users</div>\n            <Dropdown label='Users' placeholder='users' fluid multiple search selection \n              options={props.users.filter(u => (u.id !== props.user.userId)).map(u => ({key:u.id, text:u.username,value:u.id}))}\n              onChange={handleChange}\n            />\n          </div>\n          <div style={{margin:'auto',textAlign:'center'}}>\n            <Button type='button' onClick={handleSubmit}>create</Button>\n            <Button type='button' style={{marginLeft:'1.4em'}} onClick={cancel}>cancel</Button>\n          </div>\n        </Form>\n        <div style={{margin:'auto',width:'80%',marginTop:'2em'}}>\n          <Info message={message} clear={resetWarnings} />\n        </div>\n      </div>\n    )\n  return <div></div>\n}\n\nconst mapStateToProps = (state) => {\n  return {\n    user: state.loggedUser,\n    users: state.users,\n    channels: state.channels,\n    error:state.error\n  }\n}\n\nexport default connect(mapStateToProps,{ initializeUsers,\n  createChannel,\n  setError,\n  setChannel,\n  newFeed,\n  initEmpty})(CreateChannelForm)","export default new Map([['#ffffcc',{background:'linear-gradient(20deg,#756b57,#a89e8a)', color:'black',fontWeight:'700'}],\n  ['#ffcccc',{background:'linear-gradient(20deg,#77633c,#b29966)', color:'black',fontWeight:'700'}],\n  ['#ccffff',{background:'linear-gradient(20deg,#221a11,#664d33)', color:'#e9d396',fontWeight:'700'}],\n  ['#99ffcc',{background:'linear-gradient(20deg,#6b5147,#a38175)', color:'black',fontWeight:'700'}],\n  ['#ffccff',{background:'linear-gradient(20deg,#634136,#a66c59)', color:'black',fontWeight:'700'}],\n  ['#80ffff',{background:'linear-gradient(20deg,#240f0f,#6b2e2e)', color:'#e9d396',fontWeight:'700'}],\n  ['#ff99c2',{background:'linear-gradient(20deg,#798086,#afb3b6)', color:'black',fontWeight:'700'}],\n  ['#99ff99',{background:'linear-gradient(20deg,#3d4043,#6d7378)', color:'black',fontWeight:'700'}],\n  ['#ff99ff',{background:'linear-gradient(20deg,#272428,#5c555e)', color:'#e9d396',fontWeight:'700'}]])","import React, { useState, useEffect } from 'react'\nimport { useDrag } from 'react-dnd'\nimport {setNote } from '../reducers/noteReducer'\nimport { connect } from 'react-redux'\nimport { useTransition, animated } from 'react-spring'\nimport 'react-tippy/dist/tippy.css'\nimport { Tooltip } from 'react-tippy'\nimport map from './noteColors'\nimport './Note.css'\n\n\nconst Note = (props) => {\n\n  const [text, setText] = useState(props.content)\n  const [pr, set] = useState(props)\n  const [show, setShow] = useState(true)\n\n  // onBlur ei toimi ilman tt\n  useEffect(() => {\n    setText(props.content)\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [props.content])\n\n  useEffect(() => {\n    set(props)\n   // console.log(props)\n  }, [props])\n\n  useEffect(() => {\n    return () => {setShow(false)}\n  }, [props.channel])\n\n  const onChange = (event) => {\n    setText(event.target.value)\n  }\n\n  const transitions = useTransition(show, null, {\n    from: { opacity: 0, transform: 'scale(0)' },\n    enter: { opacity: 1, transform: 'scale(1)' },\n    leave: { opacity: 0, transform: 'scale(0)' },\n    \n  })\n// config: { mass: 1.2, tension: 280, friction: 18, precision:0.005 }\n  const [{ isDragging }, drag] = useDrag({\n    item: { id:props.id, left:props.left, top:props.top, type: 'note' },\n    collect: monitor => {\n      return {isDragging: monitor.isDragging()}\n    },\n  })\n  if (isDragging) {\n    return <div ref={drag} />\n  }\n\t\n  const updateText = async (Id) => {\n    const note= props.notes.find(n => n.id === Id)\n    const date2 = new Date()\n    if(note.content !== text)\n      await props.setNote({...note, content:text, author:props.user.username, \n        date: new Date(date2.getTime()-date2.getTimezoneOffset()*60*1000).toISOString()}, props.channel.id, props.user)\n  }\n\n  const setDate = (date) => {\n    if(date) return date.slice(8,10)+'.'+date.slice(5,7)+'. '+date.slice(11,16)\n  }\n\n  return transitions.map(({ item, key, props }) => (\n    item && <animated.div key={key} className='note' ref={drag} id={pr.id} style={{left:pr.left,top:pr.top,...map.get(pr.backgroundColor),...props}}  >\n      <Tooltip\n        title='open Edit Note - menu with the right mouse button'\n        followCursor='true'\n        theme='transparent'\n        duration='800'\n        delay='300'\n        trigger=\"mouseenter\">\n        <div className='noteHeader' style={{marginTop:'0px',marginBottom:'0px'}} >{pr.author} {setDate(pr.date)}</div>\n      </Tooltip>\n      <textarea className='txt-mesta' style={{\n        textAlign:'center',\n        border: '0px solid transparent',\n        paddingLeft:'0.2em',\n        fontSize: '1.2em',\n        lineHeight:'1.1rem',\n        width:'100%', \n        height:'70%',\n        ...map.get(pr.backgroundColor) }} \n      value={text} onChange={onChange}  onBlur={() => updateText(pr.id)} />\n    </animated.div>)\n  )\n}\n\nconst mapStateToProps = (state) => {\n  return {\n    user: state.loggedUser,\n    channel: state.channel,\n    notes: state.notes\n  }\n}\n\nexport default connect(mapStateToProps,{setNote})(Note)","import React from 'react'\nimport styled from 'styled-components'\n\nconst HeaderContainer = styled.div`\n  position: relative;\n  top: 1.5em;\n  height: fit-content;\n  lineHeight: 1.5em;\n`\nconst HeaderBG = styled.div`\n  display: inline-block;\n  float: left;\n  text-align: left;\n  line-height: 1.5em;\n  border-bottom: .1em solid black;\n  border-radius: 0 0 .333em 0;\n  background-color: black;\n`\nconst HeaderTXT = styled.div`\n  font-size: 1.5em;\n  padding: 0 .2em 0 0em;\n  font-family: Russo One; sans-serif;\n  color: #a9bfd6;\n`\nconst Header = ({ title }) => (\n  <HeaderContainer>\n    <HeaderBG>\n      <HeaderTXT>\n        {title}\n      </HeaderTXT>\n    </HeaderBG>\n  </HeaderContainer>\n)\n\nexport default Header","/* eslint-disable react/destructuring-assignment */\nimport React, { useState, useEffect } from 'react'\nimport Header from './Header'\nimport { useTransition, animated } from 'react-spring'\n//import { useDrag } from 'react-dnd'\n\nimport { connect } from 'react-redux'\n\nconst MyImage = (props) => {\n\n  const [loaded, setLoaded] = useState(false) \n  \n  const transitions = useTransition(loaded, null, {\n    from: { opacity: 0 },\n    enter: { opacity: 1},\n    leave: { opacity: 0},\n  })\n  const top = Number(props.top)+60\n  const left = Number(props.left)+60\n  const name = props.name\n\n  useEffect(() => {\n    return () => {setLoaded(false)}\n  }, [props.channel])\n  /*\n  const [{ isDragging }, drag] = useDrag({\n    item: { id:props.id, left:props.left, top:props.top, type: 'image' },\n    collect: monitor => {\n      return {isDragging: monitor.isDragging()}\n    },\n  })\n  if (isDragging) {\n    return <div ref={drag} />\n  }*/\n\n  const arrayBufferToBase64 = (buffer) => {\n    let binary = ''\n    const bytes = [].slice.call(new Uint8Array(buffer))\n    // eslint-disable-next-line no-return-assign\n    bytes.forEach((b) => binary += String.fromCharCode(b))\n    return window.btoa(binary)\n  }\n\n  const pic = new Image()\n  pic.src = `data:${props.picture.contentType};`\n        + `base64,${arrayBufferToBase64(props.picture.data.data)}`\n  pic.onload = () => setLoaded(true)\n\n  return transitions.map(({ item, key, props }) =>\n  item && <animated.div key={key} style={{\n    ...props, \n    position:'absolute',\n    top:top,\n    left:left}} >\n    <div className='image' style={{\n      width: 'fit-content',\n      zIndex:'0',\n      textAlign: 'center',\n      height: 'calc(100vh/2 - 1em/3)',\n      margin: '0 1em 0 0',\n    }}\n    >\n      <Header title={name} />\n      <img src={pic.src} alt={name}/>\n    </div> \n    </animated.div>)\n}\n\nconst mapStateToProps = (state) => {\n  return {\n    channel: state.channel,\n  }\n}\n\nexport default connect(\n  mapStateToProps,null)(MyImage)\n","import React, { useState } from 'react'\nimport axios from 'axios'\nimport { connect } from 'react-redux'\nimport { addPicture,callback } from '../reducers/pictureReducer'\nimport { ToastContainer, toast } from 'react-toastify'\nimport styled from 'styled-components'\nimport 'react-toastify/dist/ReactToastify.css'\nimport { Progress } from 'reactstrap'\nimport { useField } from '../hooks/field'\nimport { useDispatch } from 'react-redux'\nimport { HoverButton } from './Login'\n\nconst options = {\n    autoClose: false,\n    position: toast.POSITION.BOTTOM_CENTER,\n    hideProgressBar: true,\n    closeOnClick: true,\n    pauseOnHover: true,\n    draggable: true,\n    progress: 0.5,\n  }\n\nconst FlexItem = styled.div`\n  text-align: center; \n  width: 100%; \n  align-self: strech;\n`\nconst Container2 = styled.div`\n  overflow:visible; \n  color: #665533; \n  background: black;\n  border:solid 1px #665533;\n  display: flex; \n  flex-direction: column; \n  justify-content: space-between; \n  align-items: flex-start; \n  margin:1.666em 0 0 0;\n  align-content: space-between; \n  padding: .5em; \n  white-space: nowrap;\n`\nconst FormHeader = styled.span`\n  text-align: center;\n  font-size: 2em; \n  line-height: 1em; \n  font-weight: 800; \n  padding: 0; \n`\nconst LabelStyle = styled.p`\n  line-height: 1em; \n  margin: 0.2em 0 0.3em 0; \n  font-size: 1.2em;\n  font-weight:bold; \n`\nconst TextInput = styled.input`\n  line-height: 1em;\n  height: 2.6em;  \n  font-size: 1em; \n  width:97%;\n  margin: 0; \n  padding: 0;\n`\n\nconst UploadForm = ({setVisible,top,left,channelId,user,channel }) => {\n  const [loaded, setLoaded] = useState(0)\n  const [selectedFile, setSelectedFile] = useState(null)\n  const itemName = useField('text', '')\n  const dispatch = useDispatch()\n  console.log('\\nUploadForm data:',left,top)\n  const onChangeHandler = (event) => {\n    const { files } = event.target\n    if(files[0] && files[0].size < 1000000 && files[0].name.match(/\\.(png)$/)) {\n      setLoaded(0)\n      setSelectedFile(files[0])\n    } else {\n      toast.warn('File type is wrong or file size too big!', {\n        position: toast.POSITION.BOTTOM_CENTER\n    })\n    }\n  }\n  const baseUrl = '/api/pictures'\n\n  const upload = async (payload) => {\n    toast.info('uploading...', options)\n    await axios.post(`${baseUrl}/add/${channelId}`, payload, {\n        onUploadProgress: (ProgressEvent) => {\n        // eslint-disable-next-line no-mixed-operators\n          setLoaded(ProgressEvent.loaded / ProgressEvent.total * 100)\n        }, })\n        .then(res => {\n          dispatch(addPicture(res,channel.id,user))\n          dispatch(callback(channel.id,user))\n        })\n        .catch(e => {\n          console.log(e)\n        })\n  setVisible({visible:false})\n  }\n\n  const onClickHandler = (id) => {\n    const data = new FormData()\n    if(!selectedFile){\n      toast.error('select file', {\n        position: toast.POSITION.BOTTOM_CENTER\n      })\n      return\n    }\n    data.append('uploaded_file', selectedFile)\n    if(itemName.input.value == ''){\n      toast.error('name is required', {\n        position: toast.POSITION.BOTTOM_CENTER\n      })\n      return\n    }\n    data.append('name', itemName.input.value)\n    data.append('top', top)\n    data.append('left', left)\n    upload(data)\n  }\n\n  return (\n    <Container2 style={{display:'flex', flexDirection:'column',alignItems: 'center', justifyContent:'center',zIndex:'199',position:'absolute',top:top,left:left}}>\n      <FormHeader>\n        select picture\n      </FormHeader>\n      <FlexItem>\n        <LabelStyle>small png. max 1M </LabelStyle>\n        <input\n          style={{ paddingLeft:'0.5em', lineHeight: '1.5em', fontSize: '1em', margin: '0', background:'black',color:'#665533'}}\n          type=\"file\"\n          name=\"upload_file\"\n          className=\"form-control-file\"\n          onChange={onChangeHandler}\n        />\n      </FlexItem>\n      <FlexItem>\n        <LabelStyle>name: </LabelStyle>\n        <TextInput placeholder=\"required\" {...itemName.input} className=\"form-control\" required />\n      </FlexItem>\n      <FlexItem>\n        <ToastContainer style={{ zIndex:'5000',fontSize: '1.4em' }} />\n        <Progress max=\"100\" color=\"success\" value={loaded}>\n          {Math.round(loaded, 2) }\n          %\n        </Progress>\n        <HoverButton type=\"submit\" onClick={onClickHandler}>submit</HoverButton>\n        &ensp;&ensp;&ensp;&ensp;\n        <HoverButton type=\"submit\" onClick={()=>setVisible(false)}>cancel</HoverButton>\n      </FlexItem>\n    </Container2>\n  )\n}\n\nconst mapStateToProps = (state) => {\n  return {\n    channel: state.channel,\n    user: state.loggedUser,\n  }\n}\n\nexport default connect(\n  mapStateToProps,null)(UploadForm) \n\n //export default UploadForm","import React, { useState, useEffect, useCallback, useRef } from 'react'\nimport { useDrop } from 'react-dnd'\nimport Note from './Note'\nimport MyImage from './Image'\nimport {addNote, setNote, deleteNote} from '../reducers/noteReducer'\nimport { useTransition, animated } from 'react-spring'\nimport { connect } from 'react-redux'\nimport UploadForm from './UploadForm'\nimport map from './noteColors'\nimport 'react-tippy/dist/tippy.css'\nimport { Tooltip } from 'react-tippy'\nimport './DnD.css'\n\n\nconst DnDContainer = (props) => {\n        \n  const [menu, setMenu] = useState({visible: false}) \n  const [menu2, setMenu2] = useState({visible: false})\n  const [uploadForm, setUploadForm] = useState({visible: false})\n  const [pos, setPos] = useState({left:'0px',top:'0px'})\n  const [open, setOpen] = useState(undefined)\n  const seen = useRef(false)\n  const [zIndex, setZIndex] = useState('5')\n    \n  const transitions = useTransition(menu.visible || menu2.visible, null, {\n    from: { opacity: 0, rotation: -1 },\n    enter: { opacity: 1, rotation: 0},\n    leave: { opacity: 0, rotation: 1 },\n  })\n     \n  const transitions2 = useTransition(uploadForm.visible, null, {\n    from: { opacity: 0, rotation: -1 },\n    enter: { opacity: 1, rotation: 0},\n    leave: { opacity: 0, rotation: 1 },\n  })\n\n  const [, drop] = useDrop({\n    accept: ['note'],\n    drop(item, monitor) {\n      const delta = monitor.getDifferenceFromInitialOffset()\n      const left = Math.round(item.left + delta.x)\n      const top = Math.round(item.top + delta.y)\n      if(item.type == 'note') moveNote(item.id, left, top)\n      return undefined\n    },\n  })\n\n  const moveNote = (id, left, top) => {\n    const note= props.notes.find(n => n.id === id)\n    props.setNote({...note, top: top, left:left}, props.channel.id, props.user)\n\t\t\n  }\n  const handleContextMenu = (event) => {\n    event.preventDefault()\n\n    const top = event.nativeEvent.offsetY - document.getElementById('wa').offsetHeight\n    const left = event.nativeEvent.offsetX\n    \n    console.log('event.nativeEvent.offset X Y',\n    left,top,'\\ndocument.getElementById(\"wa\").offsetHeight',\n    document.getElementById('wa').offsetHeight,'\\noffsetParent',\n    event.target.offsetParent.style.left,event.target.offsetParent.style.top,\n    '\\nevent.nativeEvent.target.id',event.nativeEvent.target.id)\n\n    if(menu.visible || menu2.visible){\n      setMenu2({visible: false})\n      setMenu({visible: false})\n      return\n    }\n    if(event.target.id === 'dnd2'){\n      //let top = event.nativeEvent.offsetY + document.getElementById('wa').offsetHeight\n      setMenu({visible: true, style:{zIndex:1000,position: 'absolute', left, top}})\n      setMenu2({visible: false})\n    } else if(event.nativeEvent.target.className !== 'txt-mesta' && event.nativeEvent.target.id !== 'wa') {\n      handleContextMenu2(event)\n    }\n  }\n  const handleContextMenu2 = (event) => {\n    const left = Number(event.target.offsetParent.style.left.replace('px','')) + Number(event.nativeEvent.offsetX)\n    const top = Number(event.target.offsetParent.style.top.replace('px','')) - Number(event.nativeEvent.offsetY)\n \n    setMenu2({visible: true, id: event.nativeEvent.target.offsetParent.id, style:{position: 'absolute', left:left, top:top, zIndex:1000}})\n    setMenu({visible: false})\n  }\n  const handleAddNote = (e) => {\n    e.preventDefault()\n    const date = new Date()\n    let top = menu.style.top + document.getElementById('wa').offsetHeight\n    props.addNote({left: menu.style.left, top, backgroundColor:'#ffffcc', date: new Date(date.getTime()-date.getTimezoneOffset()*60*1000), author: props.user.username}, props.channel.id, props.user)\n    setOpen(false)\n    setMenu({visible: false})\n  }\n\n  \n  const handleUploadPicture = (event) => {\n   // uploadFormVisible.current = true\n    event.preventDefault()\n    let top = menu.style.top + document.getElementById('wa').offsetHeight\n    const um = {visible: true,style:{zIndex:1000,position: 'absolute', left: menu.style.left, top}}\n    setUploadForm(um)\n    setMenu({visible: false})\n    setMenu2({visible: false})\n  }\n\n\n\n  const handleDelete = (e) => {\n    e.preventDefault()\n    props.deleteNote(menu2.id, props.channel.id, props.user)\n  }\n  const setColor = (e) => {\n    e.preventDefault()\n    const note= props.notes.find(n => n.id === menu2.id)\n    props.setNote({...note, backgroundColor: e.nativeEvent.target.id}, props.channel.id, props.user)\n    hideMenus()\n  }\n  const upload = (props) => {\n    const ch = props.channel.id\n    return transitions2.map(({ item, key, props }) =>\n      item && <animated.div key={key} style={{...props}}>\n        <UploadForm setVisible={setUploadForm} top={uploadForm.style.top} left={uploadForm.style.left} channelId={ch} style={{...uploadForm.style}}/>\n      </animated.div>)}\n\n  const contextMenu2 = () => (\n    transitions.map(({ item, key, props }) =>\n      item && <animated.div className='menu' key={key} style={{...menu2.style, width:'9rem',...props}}>\n        <ul className=\"menu-options\">\n          <li className=\"menu-option\" onClick={handleDelete}>delete note</li>\n          <li className=\"menu-option\" >\n            <div className='dropdown' >\n              set color\n              <div className=\"dropdown-content\">\n                <table style={{width:'6em',height:'6em', background:'black',border:'solid 1px #665533',cursor:'auto'}}>\n                  <tbody>\n                    <tr>\n                      <td><button className='button' id='#ffffcc' onClick={setColor} style={{background:map.get('#ffffcc').background}}></button></td>\n                      <td><button className='button' id='#ffcccc' onClick={setColor} style={{background:map.get('#ffcccc').background}}></button></td>\n                      <td><button className='button' id='#ccffff' onClick={setColor} style={{background:map.get('#ccffff').background}}></button></td>\n                    </tr>\n                    <tr>\n                      <td><button className='button' id='#99ffcc' onClick={setColor} style={{background:map.get('#99ffcc').background}}></button></td>\n                      <td><button className='button' id='#ffccff' onClick={setColor} style={{background:map.get('#ffccff').background}}></button></td>\n                      <td><button className='button' id='#80ffff' onClick={setColor} style={{background:map.get('#80ffff').background}}></button></td>\n                    </tr>\n                    <tr>\n                      <td><button className='button' id='#ff99c2' onClick={setColor} style={{background:map.get('#ff99c2').background}}></button></td>\n                      <td><button className='button' id='#99ff99' onClick={setColor} style={{background:map.get('#99ff99').background}}></button></td>\n                      <td><button className='button' id='#ff99ff' onClick={setColor} style={{background:map.get('#ff99ff').background}}></button></td>\n                    </tr>\n                  </tbody>\n                </table>\n              </div>\n            </div>\n          </li>\n        </ul>\n      </animated.div>  \n    )\n  )\n  const contextMenu = () => (\n    transitions.map(({ item, key, props }) =>\n      item && <animated.div className='menu' key={key} style={{...menu.style, width:'9rem',...props}}>\n        <ul className=\"menu-options\">\n          <li className=\"menu-option\" onClick={handleAddNote}>\n            add note\n          </li>\n          <li className=\"menu-option\" onClick={handleUploadPicture}>\n            upload picture\n          </li>\n        </ul>\n      </animated.div> \n    )\n  )\n  const hideMenus = () => {\n    setMenu({visible: false})\n    setMenu2({visible: false})\n   // setUploadForm({visible:  false})\n    \n    setOpen(false)\n  }\n  let offsetX, offsetY\n  let moveContent = false\n\t\n  const move = e => {\n    if(e.target.className === 'txt-mesta' || e.target.className === 'note' || e.target.className === 'noteHeader') {\n      setOpen(false)\n    }\n\t\t\n    if(moveContent && e.target.className !== 'note') {\n      document.getElementById('dndWrapper').style.left = `${e.pageX-offsetX}px`\n      document.getElementById('dndWrapper').style.top = `${e.pageY-offsetY}px`\n\n      document.getElementById('root').style.backgroundPositionX = 0.5*(e.pageX-offsetX) + 'px'\n      document.getElementById('root').style.backgroundPositionY = 0.5*(e.pageY-offsetY) + 'px'\n      document.getElementById('bg').style.backgroundPositionX = 0.25*(e.pageX-offsetX) + 'px'\n      document.getElementById('bg').style.backgroundPositionY = 0.25*(e.pageY-offsetY) + 'px'\n    }\n  }\n  \n  const start = e => {\n    if(e.target.className === 'dndC'){\n      moveContent = true\n      offsetX = e.clientX - Number(pos.left.replace('px',''))\n      offsetY = e.clientY - Number(pos.top.replace('px',''))\n    }\n  }\n  \n  const stop = e => {\n    moveContent = false\n    if(e.target.className === 'dndC'){\n      setPos({\n        left : document.getElementById('dndWrapper').style.left ,\n        top :  document.getElementById('dndWrapper').style.top\n      })\n      setZIndex('5')\n    }\n  }\n\n  const timeoutid = useRef(-1)\n  const tip = useRef(true)\n\n  const hideTip = useCallback(() => {\n    if(!tip.current) clearTimeout(timeoutid.current)\n    if(tip.current && timeoutid.current === -1)\n      timeoutid.current = setTimeout(() => {\n        seen.current = true\n      },12000)\n  },[])\n\n  useEffect(() => {\n    return () => {\n      tip.current = false\n      hideTip()\n    }\n  }, [hideTip])\n\n  const onpointerover = (e) => {\n    if(!seen.current && e.target.id === 'dnd' && !open) {\n      setOpen(true)\n      return\n    }\n    setOpen(false)\n  }\n\n  const onpointerdown = e => {\n    setOpen(false)\n    if(e.target.id === 'dnd') setZIndex('2')\n  }\n\n  if(props.notes)\n    return (\n      <div  id='dndWrapper' onContextMenu={handleContextMenu}\n        onPointerOver={onpointerover}\n        onPointerDown={onpointerdown}\n        onPointerOut={() => setOpen(false)}\n        onClick={hideMenus} \n        onMouseMove={move}\n        onMouseDown={start}\n        onMouseUp={stop}\n        style={{...pos}}>\n        <div className='hoverjuttu'>\n          <div id='dnd2' className='dndC' style={{zIndex:'3'}} ></div>\n          <Tooltip\n            open={open}\n            title='add note with the right mouse button'\n            followCursor='true'\n            theme='transparent'\n            duration='800'\n            onShown={hideTip}\n          >\n            <div ref={drop} id='dnd' className='dndC'\n              style={{zIndex:zIndex}}\n              \n            >\n              <div id='wa'>&nbsp;draggable working area</div>\n              {menu.visible && contextMenu()}\n              {menu2.visible && contextMenu2()}\n              {uploadForm.visible && upload(props)}\n              {props.notes.map((b,i) => (\n                <Note\n                  key={b.id}\n                  id={b.id}\n                  left={b.left}\n                  top={b.top}\n                  open={!open}\n                  backgroundColor={b.backgroundColor}\n                  author={b.author}\n                  date={b.date}\n                  content={b.content}\n                  setOpen={setOpen}\n                />\n              ))}\n            </div>\n          </Tooltip>\n          {props.pictures.map((i) => <MyImage id={i.id} key={i.id} {...i}/>)}\n        </div>\n      </div>\n    ) \n  return <div>odota</div>\n}\nconst mapStateToProps = (state) => {\n // console.log(state.channel)\n  return {\n    user: state.loggedUser,\n    channel: state.channel,\n    notes: state.notes,\n    pictures: state.pictures\n  }\n}\nexport default connect(mapStateToProps,{addNote, setNote, deleteNote})(DnDContainer)","import React,{ useState, useEffect } from 'react'\nimport { connect } from 'react-redux'\nimport './ChannelName.css'\n\nconst ChannelName = (props) => {\n  const [css, setCss] = useState('channelNameAnim')\n   \n  useEffect(() => {\n    setCss('channelNameAnim')\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [props.channel])\n\n  return (\n    <div className={css} onAnimationEnd={()=>setCss('channelName')}>{props.channel.name}</div>\n  )\n}\n\nconst mapStateToProps = (state) => {\n  return {\n    channel: state.channel\n  }\n}\nexport default connect(mapStateToProps,null)(ChannelName)","import React, {useState, useEffect, useRef} from 'react'\nimport { connect } from 'react-redux'\n\n\nconst Clock = (props) => {\n\t\n  const [time, setTime] = useState('')\n  const timeoutId = useRef(0)\n\n  useEffect(() => {\n    updateTime(props.user)\n    return () => {\n      clearTimeout(timeoutId.current)\n      updateTime(undefined)\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [props.user])\n\n  const updateTime = (user) => {\n    const date = new Date()\n    //jostain syyst tm date onkin jo Suomiajassa\n    clearTimeout(timeoutId.current)\n    if(user){\n      setTime(date.toString().slice(16,24))\n      timeoutId.current=setTimeout(updateTime.bind(null,user),1000)\n    }\n  }\n\n  return (\n    <div>\n      {time}\n    </div>\n  )\n}\nconst mapStateToProps = (state) => {\n  return {\n    user: state.loggedUser\n  }\n}\nexport default connect(mapStateToProps,null)(Clock)","import React, { useState, useEffect } from 'react'\nimport { connect } from 'react-redux'\nimport ChatWindow from './ChatWindow'\nimport CreateChannelForm from './CreateChannelForm'\nimport DnDContainer from './DnDContainer'\nimport { DndProvider } from 'react-dnd'\nimport HTML5Backend from 'react-dnd-html5-backend'\nimport { clearUser } from '../reducers/loggedUserReducer'\nimport ChannelName from './ChannelName'\nimport { Segment } from 'semantic-ui-react'\nimport Clock from './Clock'\nimport styled from 'styled-components'\nimport { useTransition, animated } from 'react-spring'\nimport './Chat.css'\n\nexport const HoverButton = styled.button`\nborder: 1px solid #665533;\ncursor:pointer;\ncolor:#b29966;\nbackground-color:black;\ntransition: background-color 250ms ease-in, border-color 250ms ease-in, color 250ms ease-in;\n&:hover{\n  background-color:rgba(53, 46, 17, 0.6);\n  border-color: #b29966;\n  color: #d4c6aa;\n}\n`\nconst Chat = ({user, channel, connectedUsers, gapi, clearUser}) => {\n  \n  const [chat, setChat] = useState(true)\n  const [index, setIndex] = useState(0)\n\n  const elements = [\n    {id: 0, content: <div></div>},\n    {id: 1, content: <ChatWindow setChat={setChat}/>},\n    {id: 2, content: <CreateChannelForm setChat={setChat}/>}\n  ]\n  \n  useEffect(() => {\n    if(!user) setIndex(0)\n    else if(user && chat) setIndex(1)\n    else setIndex(2)\n  },[user,chat])\n\t\n  const transitions = useTransition(user, null, {\n    from: { opacity: 0, transform: 'scale(0)' },\n    enter: {  opacity: 1, transform: 'scale(1)' },\n    leave: {  opacity: 0, transform: 'scale(0)' },\n    config: { mass: 1, tension: 300, friction: 12 }\n  })\n\n  const transitions2 = useTransition(elements[index], item => item.id, {\n    from: { opacity: 0 },\n    enter: { opacity: 1 },\n    leave: { opacity: 0 },\n    config: { duration: 250 }\n  })\n\n  const dnd = () => (\n    <DndProvider backend={HTML5Backend}>\n      <DnDContainer/>\n    </DndProvider>\n  )\n\n  const handleLogout = (event) => {\n    event.preventDefault()\n    document.getElementById('root').style.backgroundPositionX = '0px'\n    document.getElementById('root').style.backgroundPositionY = '0px'\n    document.getElementById('bg').style.backgroundPositionX = '0px'\n    document.getElementById('bg').style.backgroundPositionY = '0px'\n    clearUser(user)\n    setChat(true)\n    if(gapi) gapi.auth2.getAuthInstance().signOut().then(() => console.log('Oauth2 Signout'))\n  }\n\n  return (\n    <div>\n      <Segment  style={{margin:'0',padding:'0',backgroundColor:'transparent'}} placeholder >\n        {channel && dnd()}\n      </Segment>\n      <div style={{position:'absolute',top:'2em',left:'40%'}}>\t\n        {channel && <span style={{width:'100%',fontWeight:'700', color:'#d4c6aa'}}>\n          <ChannelName/>\n        </span>}\n      </div>\n      {transitions.map(({ item, key, props }) =>\n        item && <animated.div key={key} style={{...props,zIndex:'10',position:'absolute',top:'2em',left:'3em'}}>\n          <div style={{\n            fontFamily: 'Cinzel, serif',\n            fontSize: '1.4em', \n            fontWeight:'700',\n            textAlign:'left',\n            color:'#b29966',\n            textShadow: '-2px 0 black, 0 2px black, 2px 0 black, 0 -2px black'\n          }} ><Clock/></div>\n        </animated.div> )}\n      {transitions2.map(({ item, props, key }) => (\n        <animated.div\n          key={key}\n          style={{ ...props,zIndex:'10',position:'absolute',top:'2em',right:'2em',minWidth:'22rem', width:'25vw',paddingRight:'0'}}>\n          {item.content}\n        </animated.div>\n      ))}\n      {transitions.map(({ item, key, props }) =>\n        item && <animated.div key={key} style={{...props,zIndex:'10',position:'absolute',bottom:'2em',left:'2em'}}>\n          <div style={{\n            borderRadius:'2px 0px 0px 2px', \n            fontSize:'1.2em',\n            float:'left',\n            display:'inline',\n            fontWeight:'500', \n            color:'#e5ddcc',\n            whiteSpace: 'nowrap',\n            backgroundColor:'rgba(0,0,0,0.7)',\n            marginTop:'1px',\n            padding:'0.15em 0.5em 0.2em 0.35em',\n            textShadow: '-1px 0 black, 0 1px black, 1px 0 black, 0 -1px black'\n          }}>{user && user.username} is logged in </div>\n          <div style={{float:'left',display:'inline'}}>\n            <HoverButton style={{\n              cursor: 'pointer',\n              fontSize:'1.1em',\n              marginLeft:'0em',\n              borderRadius:'2px',\n              fontFamily: 'Lato,Helvetica Neue,Arial,Helvetica,sans-serif',\n              fontWeight:'700',\n              padding:'0.25em 0.4em 0.25em 0.4em',\n              textShadow: '-2px 0 black, 0 2px black, 2px 0 black, 0 -2px black'\n            }} onClick={handleLogout}>logout</HoverButton>\n          </div>\n        </animated.div>)}\n      {transitions.map(({ item, key, props }) =>\n        item && <animated.div key={key} style={{...props,\n          lineHeight:'1.1em',\n          fontSize:'1.1em',\n          textAlign:'center', \n          position:'absolute',\n          zIndex:'10',\n          bottom:'2em',\n          right:'2em',\n          padding:'0.3em 0.6em 0.3em 0.6em',\n          fontWeight:'500',\n          border:'solid 1px #665533', \n          color:'#b29966',\n          whiteSpace: 'nowrap',\n          backgroundColor:'rgba(0,0,0,0.7)',\n          textShadow: '-1px 0 black, 0 1px black, 1px 0 black, 0 -1px black'\n        }}>\n          <span style={{\n            fontWeight:'400',\n            color:'#e5ddcc',\n            textAlign:'center', \n            borderBottom:'1px solid #b29966'\n          }}>connected users</span>\n          <ul style={{fontWeight:'400',\n            listStyleType:'none',\n            marginTop:'0',\n            marginBottom:'0',\n            padding:'0.2em 0 0 0'\n          }}>\n            {connectedUsers && connectedUsers.map((e,i) => <li style={{flex:'right'}} key={i}>{e}</li>)}\n          </ul>\n        </animated.div>)}\n    </div>\n  )\n}\n\nconst mapStateToProps = (state) => {\n  return {\n    user: state.loggedUser,\n    channel: state.channel,\n    connectedUsers: state.connectedUsers,\n    gapi: state.gapi\n  }\n}\nexport default connect(mapStateToProps,{ clearUser })(Chat)\n","import React, { useState, useEffect } from 'react'\nimport { Container } from 'semantic-ui-react'\nimport Login from './components/Login'\nimport Chat from './components/Chat'\nimport './App.css'\n\nconst App = () => {\n  const [ loading, setLoading ] = useState(true)\n\n  useEffect(() => {\n    setLoading(false)\n  }, [])\n\n  return loading ? \n    <div style={{width:'100vw',height:'100vh',background:'black'}}>\n      <span style={{position:'absolute',top:'50%',left:'50%',fontSize:'2em',color:'#b29966',marginLeft:'-5rem'}}>\n    loading...\n      </span>\n    </div> : \n    <Container id='cont' style={{width:'100%',height:'100vh'}}>\n      <Login/>\n      <Chat />\n    </Container>\n}\n\nexport default App","export const setConnectedUsers = data => dispatch => {\n  dispatch ({\n    type: 'SET_CONNECTED_USERS',\n    data\n  })\n}\n\nconst reducer = (state = [], action) => {\n  switch (action.type) {\n  case 'SET_CONNECTED_USERS':\n    return action.data\n  default:\n    return state\n  }\n}\nexport default reducer","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\nimport { Provider } from 'react-redux'\nimport { composeWithDevTools } from 'redux-devtools-extension'\nimport { createStore, applyMiddleware, combineReducers } from 'redux'\nimport thunk from 'redux-thunk'\nimport messageReducer from './reducers/messageReducer'\nimport loggedUserReducer from './reducers/loggedUserReducer'\nimport channelsReducer from './reducers/channelsReducer'\nimport selectedChannelReducer from './reducers/selectedChannelReducer'\nimport pictureService from './services/pictures'\nimport usersReducer from './reducers/usersReducer'\nimport noteReducer from './reducers/noteReducer'\nimport errorReducer from './reducers/errorReducer'\nimport gapiReducer from './reducers/gapiReducer'\nimport pictureReducer, { initializePictures } from './reducers/pictureReducer'\nimport connectedUsersReducer from './reducers/connectedUsersReducer'\nimport io from 'socket.io-client'\n\nconst createMySocketMiddleware = () => {\n  return storeAPI => {\n   // let socket = io('ws://localhost:3003')\n   // const port = process.env.PORT || \"8080\"\n   // let socket = io('ws://visualchat.onrender.com:'+port)\n   let socket = io('wss://visualchat.onrender.com')\n\t\t\n    socket.on('message', (data) => {\n      if(storeAPI.getState().channel.id === data.channelID) {\n        storeAPI.dispatch({\n          type : 'SOCKET_MESSAGE_RECEIVED',\n          data : { channel: data.channelID, messages: data.messages }\n        })\n      }\n    })\n    socket.on('add_note', (data) => {\n      if(storeAPI.getState().channel.id === data.channelID) {\n        storeAPI.dispatch({\n          type : 'SOCKET_ADD_NOTE',\n          data : data.note\n        })\n      }\n    })\n    socket.on('callback', async (data) => {\n      if(storeAPI.getState().channel.id === data.id) {\n      if(storeAPI.getState().loggedUser.token !== data.token){\n        const pictures = await pictureService.getPictures(storeAPI.getState().channel.id, storeAPI.getState().loggedUser)\n        storeAPI.dispatch({\n          type: 'INIT_PICTURES',\n          data: pictures\n        })\n      }\n       \n    }})\n    socket.on('delete_note', (data) => {\n      if(storeAPI.getState().channel.id === data.channelID) {\n        storeAPI.dispatch({\n          type : 'SOCKET_DELETE_NOTE',\n          data : data.noteID\n        })\n      }\n    })\n    socket.on('set_note', (data) => {\n      if(storeAPI.getState().channel.id === data.channelID) {\n        storeAPI.dispatch({\n          type : 'SOCKET_SET_NOTE',\n          data : data.note\n        })\n      }\n    })\n    socket.on('myError', (data) => {\n      storeAPI.dispatch({\n        type : 'SET_ERROR',\n        data\n      })\n    })\n    socket.on('channel', data => {\n      if(data.users.find(u => u === storeAPI.getState().loggedUser.userId)){\n        storeAPI.dispatch({\n          type: 'SOCKET_ADD_CHANNEL',\n          data\n        })\n      }\n    })\n    socket.on('set_connected_users', data => {\n      storeAPI.dispatch({\n        type: 'SET_CONNECTED_USERS',\n        data\n      })\n    })\n    socket.on('reconnect', () => {\n      if(storeAPI.getState().loggedUser) socket.emit('action',{type: 'SET_USER',\n        data:storeAPI.getState().loggedUser})\n      if(storeAPI.getState().channel) socket.emit('action',{type: 'SET_CHANNEL',\n        data:{user:storeAPI.getState().loggedUser.username,\n          name:storeAPI.getState().channel.name,\n          token: storeAPI.getState().loggedUser.token}})\n    })\n\n    return next => action => {\n      if( action.type === 'SEND_WEBSOCKET_MESSAGE' ||\n\t\t\t\taction.type === 'CREATE_CHANNEL' ||\n\t\t\t\taction.type === 'ADD_NOTE' ||\n\t\t\t\taction.type === 'SET_NOTE' ||\n        action.type === 'CALLBACK' ||\n\t\t\t\taction.type === 'DELETE_NOTE' ||\n\t\t\t\taction.type === 'SET_USER' ||\n\t\t\t\taction.type === 'USER_LOGOUT' ||\n\t\t\t\taction.type === 'SET_CHANNEL') {\n\t\t\t\t\t\n        socket.emit('action',action)\n\n        if(action.type === 'SEND_WEBSOCKET_MESSAGE' || action.type === 'SET_NOTE' || action.type === 'SET_USER' || action.type === 'USER_LOGOUT' || action.type === 'SET_CHANNEL')\n          return next(action)\n        else return\n      }\n      return next(action)\n    }\n  }\n}\n\n\nconst reducer = combineReducers({\n  messages: messageReducer,\n  loggedUser: loggedUserReducer,\n  channels: channelsReducer,\n  gapi: gapiReducer,\n  pictures: pictureReducer,\n  channel: selectedChannelReducer,\n  users: usersReducer,\n  notes: noteReducer,\n  error: errorReducer,\n  connectedUsers: connectedUsersReducer\n})\n\nconst rootReducer = (state, action) => {\n  if (action.type === 'USER_LOGOUT') state = undefined\n  return reducer(state, action)\n}\n\nconst store = createStore(rootReducer,\n  composeWithDevTools(\n    applyMiddleware(thunk,createMySocketMiddleware())\n  )\n)\n\nconst render = () => {\n  ReactDOM.render(\n    <Provider store={store}>\n      <App />\n    </Provider>,\n    document.getElementById('root')\n  )\n}\n\nrender()\nstore.subscribe(render)\n"],"sourceRoot":""}