{"version":3,"sources":["components/Spinner.svg","components/visualchat.png","hooks/field.js","services/users.js","reducers/usersReducer.js","reducers/gapiReducer.js","components/Info.js","services/login.js","reducers/loggedUserReducer.js","components/Login.js","services/messages.js","reducers/messageReducer.js","components/Message.js","components/FocusScrollable.js","components/MessageForm.js","services/channels.js","reducers/channelsReducer.js","services/notes.js","reducers/noteReducer.js","services/pictures.js","reducers/pictureReducer.js","reducers/selectedChannelReducer.js","services/htmls.js","reducers/htmlReducer.js","components/DropDownContainer.js","components/ChatWindow.js","reducers/errorReducer.js","components/CreateChannelForm.js","components/noteColorsDark.js","components/noteColorsLight.js","components/Note.js","components/Header.js","components/Image.js","components/Html.js","components/StyledSpinner.js","components/UploadForm.js","components/SetHTMLForm.js","components/DnDContainer.js","components/ChannelName.js","components/Theme.js","components/Clock.js","components/Chat.js","App.js","reducers/connectedUsersReducer.js","index.js"],"names":["module","exports","useField","type","useState","value","setValue","input","onChange","event","target","reset","user","a","async","axios","get","headers","Authorization","token","data","newData","post","reducer","state","action","users","Info","message","clear","text","setText","show","setShow","id1","useRef","id2","useEffect","current","setTimeout","clearTimeout","useTransition","from","opacity","enter","leave","config","duration","map","item","key","props","div","style","color","backgroundColor","border","borderRadius","padding","fontSize","margin","content","credentials","response","clearUser","window","localStorage","removeItem","src","require","connect","loggedUser","gapi","setUser","gredentials","dispatch","loginService","Error","setItem","JSON","stringify","resetUser","signUp","userdata","usersService","setGapi","username","password","setSignUp","setMessage","loaded","setLoaded","showViewWarning","setShowViewWarning","loggedUserJSON","getItem","parse","console","log","name","setU","img","Image","onload","theme","CLIENT_ID","loadGapiInsideDOM","newGapi","loadGapi","loadAuth2","auth2","isSignedIn","updateUser","currentUser","attachSignin","document","getElementById","setAuth2","getBasicProfile","getName","profileImg","getImageUrl","email","getEmail","id","getId","idToken","xc","id_token","element","attachClickHandler","googleUser","error","innerWidth","transitions","handleInputs","func","preventDefault","trim","length","handleLogin","e","handleSignUp","form","buttonText","eventHandler","Form","inverted","maxWidth","onSubmit","Input","icon","iconPosition","label","placeholder","marginBottom","className","autoFocus","Div","styled","textAlign","fontWeight","width","paddingTop","Grid","columns","paddingLeft","paddingRight","paddingBottom","relaxed","stackable","Column","verticalAlign","onClick","whiteSpace","msgs","removeAnimation","messages","slice","m","split","replace","msg","newmsg","date2","tempString","date","undefined","s","year","month","day","hour","min","sec","Date","stringToDate","marginRight","marginLeft","float","headerStyle","lineHeight","onAnimationEnd","forceScroll","i","index","channel","addMsg","getTime","getTimezoneOffset","toISOString","warning","setWarning","sendMsg","txt","background","onKeyPress","title","marginTop","fontFamily","userId","channels","concat","notes","setNote","note","newNote","n","pictures","addPicture","picture","callback","pictureReducer","setChannel","newHtml","html","filter","initializeChannels","channelsService","initializeMessages","messageService","initializePictures","pictureService","initializeNotes","noteService","notesVisible","initializeHtmls","htmls","selectedIndex","childNodes","chId","find","disabled","selected","hidden","borderTop","display","setChat","initializeUsers","createChannel","setError","newFeed","initEmpty","initEmptyPictures","initEmptyHtmls","selection","setSelection","channelsCount","setChannelsCount","resetWarnings","setNewChannel","Field","Dropdown","fluid","multiple","search","options","u","chName","c","Map","pr","set","mapD","setMap","mapL","transform","useDrag","left","top","collect","monitor","isDragging","drag","ref","updateText","Id","author","setDate","onBlur","Header","picSrc","setPicSrc","Number","offsetTop","offsetLeft","pic","contentType","buffer","binary","call","Uint8Array","forEach","b","String","fromCharCode","btoa","arrayBufferToBase64","position","zIndex","alt","innerHTML","StyledSpinner","spinner","autoClose","toast","POSITION","BOTTOM_CENTER","hideProgressBar","closeOnClick","pauseOnHover","draggable","progress","FlexItem","FormHeader","span","LabelStyle","p","TextInput","setVisible","channelId","selectedFile","setSelectedFile","itemName","useDispatch","flexDirection","alignItems","justifyContent","files","size","match","warn","required","Progress","max","Math","round","payload","FormData","append","info","onUploadProgress","ProgressEvent","total","then","res","catch","SetHTMLForm","inputElement","focus","offsetHeight","addHtml","addNote","deleteNote","noteID","channelID","setHtml","menu","setMenu","menuStyle","setMenuStyle","menu2","setMenu2","menu2Props","setMenu2Props","uploadForm","setUploadForm","htmlForm","setHtmlForm","formStyle","setFormStyle","pos","setPos","menuRef","menu2Ref","uploadFormRef","htmlFormRef","setZIndex","offsetX","offsetY","useDrop","accept","drop","delta","getDifferenceFromInitialOffset","x","y","moveNote","handleContextMenu2","offsetParent","nativeEvent","handleAddNote","handleUploadPicture","hideMenus","handleAddHTML","handleDelete","setColor","moveContent","onContextMenu","visible","onPointerOver","onpointerover","onPointerDown","onMouseMove","pageX","pageY","backgroundPositionX","backgroundPositionY","onMouseDown","clientX","clientY","onMouseUp","CSSTransition","in","nodeRef","timeout","classNames","unmountOnExit","upload","h","css","setCss","Theme","checked","setTheme","borderCollapse","height","time","setTime","timeoutId","updateTime","toString","bind","connectedUsers","chat","setIndex","elements","backgroundImage","body","mass","tension","friction","transitions2","handleLogout","getAuthInstance","signOut","Segment","DndProvider","backend","HTML5Backend","bottom","right","minWidth","listStyleType","flex","App","loading","setLoading","Container","combineReducers","messageReducer","loggedUserReducer","channelsReducer","gapiReducer","selectedChannelReducer","usersReducer","htmlReducer","noteReducer","errorReducer","connectedUsersReducer","store","createStore","composeWithDevTools","applyMiddleware","thunk","storeAPI","socket","io","on","getState","emit","next","root","ReactDOM","createRoot","render","subscribe"],"mappings":"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","file":"static/js/main.3df6b436.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/Spinner.5e9077ee.svg\";","module.exports = __webpack_public_path__ + \"static/media/visualchat.c935913a.png\";","import { useState } from 'react'\n\nexport const useField = (type) => {\n  const [value, setValue] = useState('')\n\n  const onChange = (event) => {\n    setValue(event.target.value)\n  }\n  const reset = () => {\n    setValue('')\n  }\n\n  return {\n    input:{ type,\n      value,\n      onChange },\n    reset:reset\n  }\n}","import axios from 'axios'\n\nconst baseUrl = '/api/users'\n\nconst getUsers = async (user) => { \n  return await axios.get(`${baseUrl}`, { headers: {Authorization: user.token}})\n}\nconst addUser = async (data) => {\n  let newData = null\n  try {\n    newData = await axios.post(`${baseUrl}/signup`, data)\n    return newData.data\n  } catch (exception) {\n    return newData\n  }\n}\nexport default { getUsers, addUser }","import usersService from '../services/users'\n\nexport const initializeUsers = user => async dispatch => {\n  const data = await usersService.getUsers(user)\n  dispatch({\n    type: 'GET_USERS',\n    data\n  })\n}\n\n\nexport const signUp = userdata => async dispatch => {\n  const data = await usersService.addUser(userdata)\n  if(!data) throw Error('username is in use')\n  dispatch({\n    type: 'ADD_USER',\n    data\n  })\n}\n\n\nconst reducer = (state = [], action) => {\n  switch (action.type) {\n  case 'GET_USERS':\n    return  action.data.data.users\n  case 'ADD_USER':\n    return [...state, action.data]\n  default:\n    return state\n  }\n}\nexport default reducer","export const setGapi = data => dispatch => {\n    dispatch ({\n      type: 'SET_GAPI',\n      data\n    })\n  }\n  \n  const reducer = (state = null, action) => {\n    switch (action.type) {\n    case 'SET_GAPI':\n      return action.data\n    default:\n      return state\n    }\n  }\n  export default reducer","import React, { useState, useEffect, useRef } from 'react'\nimport { useTransition, animated } from 'react-spring'\n\nconst Info = ({message,clear}) => {\n\n  const [text, setText] = useState(message)\n  const [show, setShow] = useState(false)\n  const id1 = useRef(-1)\n  const id2 = useRef(-1)\n   \n  useEffect(() => {\n    if(message) {setShow(true)\n      setText(message)\n      id1.current = setTimeout(() => {\n        setShow(false)\n        id2.current = setTimeout(() => {\n          clear()\n        },800)\n      },5000)\n    } else setShow(false)\n    return () => {\n      clearTimeout(id1.current)\n    }\n  }, [message, clear])\n \n  const transitions = useTransition(show, null, {\n    from: { opacity: 0} ,\n    enter: { opacity: 1 },\n    leave: { opacity: 0 },\n    config: {duration:250}\n  })\n\n  return transitions.map(({ item, key, props }) => (\n    item && <animated.div key={key} style={{\n      color:text.color,\n      backgroundColor:'black',\n      border:`1px solid ${text.color}`,\n      borderRadius:'6px', \n      padding:'1em',\n      fontSize:'1.2em',\n      margin:'0em',\n      ...props}}>\n      {text.content}\n    </animated.div>\n  ))\n}\n\nexport default Info","import axios from 'axios'\nconst baseUrl = '/api/users'\n\nconst login = async credentials => {\n  \n  try {\n    const response = await axios.post(`${baseUrl}/login`, credentials)\n    return response.data\n  } catch (e) {\n    return null\n  }\n}\n\nexport default { login }","import loginService from '../services/login'\n\nexport const setUser = gredentials => async dispatch => {\n  const data = await loginService.login(gredentials)\n  if(!data) throw Error('invalid username or password')\n  window.localStorage.setItem(\n    'loggedChatUser', JSON.stringify(data)\n  )\n  await dispatch({\n    type: 'SET_USER',\n    data\n  })\n}\n\nexport const clearUser = (data) => {\n  window.localStorage.removeItem('loggedChatUser')\n  return { type: 'USER_LOGOUT', data }\n}\n\nexport const resetUser = data => ({ type:'SET_USER', data })\n\nconst reducer = (state = null, action) => {\n  switch (action.type) {\n  case 'SET_USER':\n    return  action.data\n  case 'USER_LOGOUT':\n    return null\n  default:\n    return state\n  }\n}\nexport default reducer","import React, { useEffect, useState } from 'react'\nimport { connect } from 'react-redux'\nimport { useField } from '../hooks/field'\nimport { signUp } from '../reducers/usersReducer'\nimport { setGapi } from '../reducers/gapiReducer'\nimport Info from './Info'\nimport { setUser, clearUser, resetUser } from '../reducers/loggedUserReducer'\nimport { useTransition, animated } from 'react-spring'\nimport styled from 'styled-components'\nimport { Form, Grid } from 'semantic-ui-react'\nimport { loadGapiInsideDOM, loadAuth2 } from 'gapi-script'\nimport './Login.css'\n\nconst src = require('./visualchat.png')\n\nconst Login = (props) => {\n  const username = useField('text')\n  const password = useField('password')\n  const [signUp, setSignUp] = useState(false)\n  const [message, setMessage] = useState(null)\n  const [loaded, setLoaded] = useState(false)\n  const [showViewWarning, setShowViewWarning] = useState(false)\n \n  useEffect(() => {\n    const setU = async () => {\n      const loggedUserJSON = window.localStorage.getItem('loggedChatUser')\n      if (loggedUserJSON) {\n        try {\n          const user = await JSON.parse(loggedUserJSON)\n          await props.resetUser(user)\n        } catch (e) { console.log(e.name) }\n      }\n    }\n    setU()\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [])\n\n  useEffect(() => {\n    const img = new Image()\n    img.src = src\n    img.onload = () => {\n      setLoaded(true)\n    }\n// eslint-disable-next-line react-hooks/exhaustive-deps\n}, []);\n\n  const theme = props.theme\n  //////////////////////////GOOGLE/////////////////////////////////\n  const [user, setUser] = useState(null);\n  const CLIENT_ID='371216924606-rgdtfalqj9tklp61rkv27d9ii14cenbe.apps.googleusercontent.com'\n  useEffect(() => {\n    const loadGapi = async () => {\n      const newGapi = await loadGapiInsideDOM();\n      props.setGapi(newGapi)\n    }\n    loadGapi();\n  }, [props.gapi]);\n  useEffect(() => {\n    if (!props.gapi) return;\n\n    const setAuth2 = async () => {\n      const auth2 = await loadAuth2(props.gapi, CLIENT_ID, '')\n      if (auth2.isSignedIn.get()) {\n        updateUser(auth2.currentUser.get())\n      } else {\n        attachSignin(document.getElementById('customBtn'), auth2);\n      }\n    }\n    setAuth2();\n  }, [props.gapi]);\n\n  useEffect(() => {\n    if (!props.gapi) return;\n\n    if (!user) {\n      const setAuth2 = async () => {\n        const auth2 = await loadAuth2(props.gapi, CLIENT_ID, '')\n        attachSignin(document.getElementById('customBtn'), auth2);\n      }\n      setAuth2();\n    }\n  }, [user, props.gapi, loaded])\n\n  const updateUser = (currentUser) => {\n    const name = currentUser.getBasicProfile().getName();\n    const profileImg = currentUser.getBasicProfile().getImageUrl();\n    const email = currentUser.getBasicProfile().getEmail();\n    const id = currentUser.getBasicProfile().getId()\n    setUser({\n      name: name,\n      profileImg: profileImg,\n      email: email,\n      id: id\n    });\n    // server validates this:\n    props.setUser({\n      idToken: currentUser.xc.id_token,\n    })\n  };\n\n  const attachSignin = (element, auth2) => {\n    auth2.attachClickHandler(element, {},\n      (googleUser) => {\n        updateUser(googleUser);\n      }, (error) => {\n        console.log(JSON.stringify(error))\n      });\n  };\n\n  const signOut = () => {\n    const auth2 = props.gapi.auth2.getAuthInstance();\n    auth2.signOut().then(() => {\n      setUser(null);\n      console.log('User signed out.');\n    });\n  }\n  //////////////////////////////////////////////////////////////\n  \n  useEffect(() => {\n    if(window.innerWidth <= 800)\n      setShowViewWarning(true)\n  }, [])\n \n  const transitions = useTransition((!window.localStorage.getItem('loggedChatUser') || !props.user) && loaded, null, {\n    from: { opacity: 0 },\n    enter: { opacity: 1 },\n    leave: { opacity: 0 }\n  })\n  const handleInputs = async (event, func) => {\n    event.preventDefault()\n    try {\n      if (!username.input.value || username.input.value.trim().length < 3) {\n        setMessage({ content: 'valid username is required (min length is 3)', color: 'red' })\n        return\n      }\n      if (!password.input.value || password.input.value.length < 3) {\n        setMessage({ content: 'valid password is required (min length is 3)', color: 'red' })\n        return\n      }\n      const credentials = {\n        username: username.input.value.trim(), password: password.input.value\n      }\n      await func(credentials)\n    } catch (exception) {\n      setMessage({ content: exception.message, color: 'red' })\n      return\n    }\n    if (signUp) {\n      setMessage({ content: `account created for user: ${username.input.value}!`, color: 'green' })\n      return\n    }\n    setMessage(null)\n  }\n\n  const handleLogin = (e) => {\n    handleInputs(e, props.setUser)\n  }\n  const handleSignUp = async (e) => {\n    await handleInputs(e, props.signUp)\n    setSignUp(false)\n    username.reset()\n    password.reset()\n  }\n\n\n  const form = (buttonText, eventHandler) => (\n    <Form inverted style={{ padding:'2em 2em 1em 2em', maxWidth:'20em',margin:'auto' }} onSubmit={eventHandler} >\n      <Form.Input\n        icon='user'\n        iconPosition='left'\n        label='Username'\n        placeholder='Username'\n        {...username.input}\n      />\n      <Form.Input\n        icon='lock'\n        iconPosition='left'\n        label='Password'\n        style={{ marginBottom: '0.5em' }}\n        {...password.input}\n      />\n      <button className={'myButton '+theme} autoFocus type=\"submit\">{buttonText}</button>\n    </Form>\n  )\n  const options = () => (\n    <div >\n      <Grid columns={3} style={{ paddingLeft: '3em', paddingRight: '3em',paddingBottom:'2em'}} relaxed='very' stackable >\n        <Grid.Column>\n          {form('Login', handleLogin)}\n        </Grid.Column>\n        <Grid.Column verticalAlign='middle'>\n          <button className={'myButton '+theme} onClick={() => setSignUp(true)} type='button'>Sign up</button>\n        </Grid.Column>\n        <Grid.Column verticalAlign='middle'>\n          <button id=\"customBtn\" className={'myButton '+theme} style={{whiteSpace:'nowrap'}} >\n            Google Login\n          </button>\n        </Grid.Column>\n      </Grid>\n    </div>\n  )\n\n  const Div = styled.div`\n    animation-name: backGroundAnim;\n    animation-timing-function:ease-in;\n    animation-duration:0.05s;\n    width:100vw;\n    height:100vh;\n  @keyframes backGroundAnim {\n    from {background-color:black;}\n    to {background-color:rgba(0,0,0,0);}\n  }`\n\n  if(showViewWarning) return <div\n                        style={{\n                          textAlign:'center',\n                          padding:'8em'}}>\n                            <span style={{\n                              color:'red',\n                              fontSize:'2em',\n                              fontWeight:'700'}}>\n                                Your view is too small. This is for desktop use only.\n                              </span>\n                          </div>\n\n  return loaded ? transitions.map(({ item, key, props }) =>\n    item && <animated.div key={key} style={props}>\n      <div className='login'>\n      <img style={{width:'100%', paddingTop: '7vh' }} src={src} />\n        <div className={'loginsegment '+theme} >\n          {!signUp && options()}\n          {signUp && form('Sign Up', handleSignUp)}\n        </div>\n        <Info message={message} clear={() => setMessage(null)} />\n      </div>\n    </animated.div>) :\n    <Div></Div>\n}\n// style={{padding:'0',margin:'0',width:'100%',backgroundColor:'black',border:'solid 1px #665533'}} placeholder\nconst mapStateToProps = (state) => {\n  return {\n    user: state.loggedUser,\n    gapi: state.gapi\n  }\n}\nexport default connect(mapStateToProps, { setUser, clearUser, resetUser, signUp, setGapi })(Login)","import axios from 'axios'\n\nconst baseUrl = '/api/channels'\n\nconst getMessages = async (id, user) => {\n  const msgs = await axios.get(`${baseUrl}/${id}`,{ headers: {Authorization: user.token}})\n  return msgs.data\n}\nexport default {getMessages}","import messageService from '../services/messages'\n\n/*eslint-disable eqeqeq*/\n\nexport const initializeMessages = (id, user) => async dispatch => {\n  const msgs = await messageService.getMessages(id, user)\n  await dispatch({\n    type: 'INIT_MESSAGES',\n    data: msgs\n  })\n}\n\nexport const newFeed = () => ({ type: 'NEW_FEED' })\n\nexport const addMsg = (message, user, channel) => dispatch => {\n  const date = new Date()\n  const msgByAuthor =`${user.username}:${new Date(date.getTime()-date.getTimezoneOffset()*60*1000).toISOString()};${message}`\n  dispatch ({\n    type: 'SEND_WEBSOCKET_MESSAGE',\n    data: { message: msgByAuthor,\n      channel, token: user.token }\n  })\n}\n\nexport const removeAnimation = () => ({type: 'REMOVE_ANIMATION'})\n\nconst reducer = (state = [], action) => {\n  switch (action.type) {\n  case 'INIT_MESSAGES':\n    return action.data\n  case 'SOCKET_MESSAGE_RECEIVED': {\n    const msgs = action.data.messages.slice()\n    msgs[msgs.length-1] = `NEW_MESSAGE:${msgs[msgs.length-1]}`\n    return msgs\n  }\n  case 'SEND_WEBSOCKET_MESSAGE':\n    return [...state,action.data.message]\n  case 'REMOVE_ANIMATION':\n    return state.map((m) => (m.split(':',1) == 'NEW_MESSAGE' ? m.replace('NEW_MESSAGE:', '') : m))\n  case 'NEW_FEED':\n    return []\n  default:\n    return state\n  }\n}\n\nexport default reducer","import React from 'react'\nimport { connect } from 'react-redux'\nimport { removeAnimation } from '../reducers/messageReducer'\nimport './Message.css'\nimport './DnD.css'\n\nconst Message = (props) => {\n\n  /*eslint-disable eqeqeq*/\n\n  let name = props.message.split(':',1)\n  let msg = props.message.replace(name + ':', '')\n  let newmsg = false\n\n \n  const stringToDate = (s) => {\n    try {\n      var year = s.slice(0,4)\n      var month = s.slice(5,7)\n      var day = s.slice(8,10)\n      var hour = s.slice(11,13)\n      var min = s.slice(14,16)\n      var sec =s.slice(17,19)\n      return new Date(year,month,day,hour,min,sec,0)\n    } catch(e) {\n      return undefined\n    }\n  }\n\n  if(name == 'NEW_MESSAGE'){\n    name = msg.split(':',1)\n    msg = msg.replace(name + ':', '')\n    newmsg=true\n  }\n\n  const tempString = msg.split(';',1)\n  const setDate = (date2) => {\n    return date2.slice(8,10)+'.'+date2.slice(5,7)+'. '+date2.slice(11,16)\n  }\n  let date = undefined\n  if(stringToDate(tempString[0]) != 'Invalid Date') {\n    date = setDate(tempString[0])\n    msg = msg.replace(tempString[0] + ';', '')\n  }\n\n  const setMessage = () => {\n    if(newmsg) return (\n      <div className={'mymessage new '+props.theme} onAnimationEnd={props.removeAnimation}>\n        {msg}\n      </div>\n    )\n    return (\n      <div  className={'mymessage '+props.theme}>\n        {msg}\n      </div>\n    )\n  }\n\n  let style = {\n    marginRight:'0.3rem',\n    marginLeft:'0.3rem',\n    marginBottom:'0.5rem',\n    backgroundColor:'transparent', \n    float:'left'}\n\n  let headerStyle = {marginRight:'0.7rem',marginLeft:'0.3rem',float:'left', lineHeight:'1em'}\n\n  if(props.user == name){\n    style.textAlign = 'right'\n    style.float = 'right'\n    headerStyle.textAlign = 'right'\n    headerStyle.float = 'right'\n  }\n\n  const setHeader = () => {\n    if(date) return (\n      <>\n        <span className='prevent-select headerName'>\n          {name}\n        </span>\n        <span className={'prevent-select headerDate '+props.theme}>\n          &nbsp;&nbsp;{date}\n        </span><br/>\n      </>)\n    return (<></>)\n  }\n\n  return (\n    <div key={props.key} style={{marginBottom:'0'}}>\n      <div style={{clear:'left'}}></div>\n      <div className='prevent-select' style={headerStyle}>\n        {setHeader()}\n      </div>\n      <div style={{clear:'right'}}></div>\n      <div style={{clear:'left'}}></div>\n      <div style={style}>\n        {setMessage()}\n      </div>\n      <div style={{clear:'right'}}></div>\n    </div>\n  )\n}\nexport default connect(null,{ removeAnimation })(Message)\n","import React from 'react'\nimport styled from 'styled-components'\nimport ScrollableFeed from 'react-scrollable-feed'\nimport Message from './Message'\nimport { connect } from 'react-redux'\nimport './Chat.css'\n\nconst FocusScrollable = (props) => {\n\n  if(props.user)\n    return (\n      <div className={'scrollable '+props.theme}>\n        <ScrollableFeed forceScroll='true'>\n          {props.messages.map((m,i) => <Message theme={props.theme} index={props.messages.length - i} key={i} message={m} user={props.user.username} />)}\n        </ScrollableFeed>\n      </div>\n    ) \n  return <div></div>\n} \n//\nconst mapStateToProps = (state) => {\n  return { user: state.loggedUser,\n    messages: state.messages } }\nexport default connect(mapStateToProps, null)(FocusScrollable) ","import React, { useState, useEffect } from 'react'\nimport  { useField } from '../hooks/field'\nimport { addMsg, removeAnimation } from '../reducers/messageReducer'\nimport Info from './Info'\nimport { connect } from 'react-redux'\n/*eslint-disable eqeqeq*/\nconst MessageForm = (props) => {\n\n  const [warning, setWarning] = useState(null)\n  const msg = useField('text')\n\n  useEffect(() => {\n    setWarning(null)\n  }, [props.channel])\n\n  useEffect(() => {\n    return () => setWarning(null)\n  }, [])\n\n  const sendMsg = async () => {\n    const txt = msg.input.value\n    if(props.channel != ''){\n      setWarning(null)\n      await props.removeAnimation()\n      await props.addMsg(txt,props.user, props.channel.id)\n    } else {\n      setWarning({content:'select channel first',color:'red'})\n    }\n    msg.reset()\n  }\n  \n  const keyPressed = event => { if(event.key === 'Enter') sendMsg() }\n\n  if(props.user)\n    return (\n      <div style={{background:'black',border:'none'}}>\n        <input placeholder='write your msg here' className={'msginput '+props.theme} \n        onKeyPress={keyPressed} title={msg.input.value} {...msg.input} />\n        <button className={'prevent-select hoverbutton '+props.theme} style={{\n          padding:'0.2em 0 0.15em 0',\n          marginTop:'0px',\n          fontFamily: 'Lato,Helvetica Neue,Arial,Helvetica,sans-serif', \n          fontWeight:'700',\n          width:'20%'}} \n        onClick={sendMsg}>send</button>\n        <Info message={warning} clear={() => setWarning(null)} />\n      </div>\n    )\n  return <div></div>\n}\n\nconst mapStateToProps = (state) => {\n  return {\n    user: state.loggedUser,\n    channel: state.channel\n  }\n}\nexport default connect(mapStateToProps, { addMsg,removeAnimation })(MessageForm)\n","import axios from 'axios'\n\nconst baseUrl = '/api/channels'\n\nconst getChannels = async (user) => {\n   return await axios.get(`${baseUrl}/user/${user.userId}`,{ headers: {Authorization: user.token}})\n}\nexport default {getChannels}","import channelsService from '../services/channels'\n\nexport const initializeChannels = user => async dispatch => {\n  const data = await channelsService.getChannels(user)\n  await dispatch({\n    type: 'GET_CHANNELS',\n    data\n  })\n}\n\nexport const createChannel = (name, users, user) => dispatch => {\n  dispatch ({\n    type: 'CREATE_CHANNEL',\n    data: { name, users, token:user.token }\n  })\n}\n\nconst reducer = (state = [], action) => {\n  switch (action.type) {\n  case 'GET_CHANNELS':\n    return  action.data.data.channels\n  case 'SOCKET_ADD_CHANNEL':\n    return state.concat(action.data)\n  default:\n    return state\n  }\n}\nexport default reducer","import axios from 'axios'\n\nconst baseUrl = '/api/channels'\n\nconst getNotes = async (id, user) => {\n  const notes = await axios.get(`${baseUrl}/${id}/notes`, { headers: {Authorization: user.token}})\n  return notes.data\n}\nexport default {getNotes}","import noteService from '../services/notes'\n\nexport const initializeNotes = (id, user) => async dispatch => {\n  const notes = await noteService.getNotes(id, user)\n  // for deleteNote animation. The note must exist to be animated.\n  // Note is deleted on server, but only hided on client side.\n  const notesVisible = notes.map(n => ({ ...n, show:true}))\n  dispatch({\n    type: 'INIT_NOTES',\n    data: notesVisible\n  })\n}\n\nexport const addNote = (note, channel, user) => {\n  return {\n    type: 'ADD_NOTE',\n    data: { note, channel, token: user.token }\n  }\n}\n\nexport const setNote = (note, channel, user) => {\n  return {\n    type: 'SET_NOTE',\n    data: { note, channel, token: user.token }\n  }\n}\n\nexport const initEmpty = () => ({ type: 'INIT_EMPTY' })\n\nexport const deleteNote = (noteID, channelID, user) => {\n  return {\n    type: 'DELETE_NOTE',\n    data: { noteID, channelID, token: user.token }\n  }\n}\nconst reducer = (state = [], action) => {\n  switch (action.type) {\n  case 'INIT_NOTES':\n    return action.data\n  case 'SET_NOTE': {\n    const newNote = action.data.note\n    return state.map(n => (newNote.id === n.id ? newNote : n))\n  }\n  case 'SOCKET_ADD_NOTE':\n    return state.concat({...action.data, show:true})\n  case 'SOCKET_SET_NOTE':\n    return state.map(n => (action.data.id === n.id ? action.data : n))\n  case 'SOCKET_DELETE_NOTE':\n    return state.map(n =>(n.id === action.data ? { ...n, show:false} : n))\n  case 'INIT_EMPTY':\n    return []\n  default:\n    return state\n  }\n}\n\nexport default reducer","import axios from 'axios'\n\nconst baseUrl = '/api/channels'\n\nconst getPictures = async (id, user) => {\n  const pictures = await axios.get(`${baseUrl}/${id}/pictures`, { headers: {Authorization: user.token}})\n  return pictures.data\n}\nexport default {getPictures}","import pictureService from '../services/pictures'\n\nexport const initializePictures = (id, user) => async dispatch => {\n  const pictures = await pictureService.getPictures(id, user)\n  dispatch({\n    type: 'INIT_PICTURES',\n    data: pictures\n  })\n}\n// id is channel id\nexport const addPicture = (picture, id, user) => {\n  return {\n    type: 'ADD_PICTURE',\n    data: { picture, id, token: user.token }\n  }\n}\nexport const callback = (id, user) => {\n  return {\n    type: 'CALLBACK',\n    data: { id, token: user.token }\n  }\n}\nexport const initEmptyPictures = () => ({ type: 'INIT_EMPTY' })\n\nconst pictureReducer = (state = [], action) => {\n    switch (action.type) {\n    case 'INIT_PICTURES':\n      return action.data\n    case 'ADD_PICTURE': {\n      return state.concat(action.data.picture.data)\n      }\n    case 'INIT_EMPTY':\n      return []\n    case 'CALLBACK': \n      return state\n    default:\n    return state\n    }\n  }\n\n  export default pictureReducer","export const setChannel = (id, name, user) => dispatch => {\n  dispatch ({\n    type: 'SET_CHANNEL',\n    data: {id, name, user:user.username, token: user.token}\n  })\n}\n\nconst reducer = (state = '', action) => {\n  switch (action.type) {\n  case 'SET_CHANNEL':\n    return action.data\n  default:\n    return state\n  }\n}\nexport default reducer","import axios from 'axios'\n\nconst baseUrl = '/api/channels'\n\nconst getHtmls = async (id, user) => {\n  const notes = await axios.get(`${baseUrl}/${id}/htmls`, { headers: {Authorization: user.token}})\n  return notes.data\n}\nexport default {getHtmls}","import noteService from '../services/htmls'\n\nexport const initializeHtmls = (id, user) => async dispatch => {\n  const htmls = await noteService.getHtmls(id, user)\n  dispatch({\n    type: 'INIT_HTMLS',\n    data: htmls\n  })\n}\n\nexport const addHtml = (html, channel, user) => {\n  return {\n    type: 'ADD_HTML',\n    data: { html, channel, token: user.token }\n  }\n}\n\nexport const setHtml = (html, channel, user) => {\n  return {\n    type: 'SET_HTML',\n    data: { html, channel, token: user.token }\n  }\n}\n\nexport const initEmptyHtmls = () => ({ type: 'INIT_EMPTY' })\n\nexport const deleteHtml = (htmlID, channelID, user) => {\n  return {\n    type: 'DELETE_NOTE',\n    data: { htmlID, channelID, token: user.token }\n  }\n}\nconst reducer = (state = [], action) => {\n  switch (action.type) {\n  case 'INIT_HTMLS':\n    return action.data\n  case 'SET_HTML': {\n    const newHtml = action.data.html\n    return state.map(n => (newHtml.id === n.id ? newHtml : n))\n  }\n  case 'SOCKET_ADD_HTML':\n    return state.concat({...action.data})\n  case 'SOCKET_SET_HTML':\n    return state.map(n => (action.data.id === n.id ? action.data : n))\n  case 'SOCKET_DELETE_HTML':\n    return state.filter(n =>(n.id !== action.data))\n  case 'INIT_EMPTY':\n    return []\n  default:\n    return state\n  }\n}\n\nexport default reducer","import React, { useEffect } from 'react'\nimport { connect } from 'react-redux'\nimport { initializeChannels } from '../reducers/channelsReducer'\nimport { initializeNotes } from '../reducers/noteReducer'\nimport { initializePictures } from '../reducers/pictureReducer'\nimport { setChannel } from '../reducers/selectedChannelReducer'\nimport { initializeMessages } from '../reducers/messageReducer'\nimport { initializeHtmls } from '../reducers/htmlReducer'\nimport './Chat.css'\nimport './DnD.css'\n/*eslint-disable eqeqeq*/\nconst DropDownContainer = (props) => {\n\n  useEffect(() => {\n    props.initializeChannels(props.user)\n    \n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [])\n\n  const handleChange =  async e => {\n    e.preventDefault()\n    \n    const index = e.target.selectedIndex\n    const name = e.target.childNodes[index].value\n    if(index !== 0 && name !== props.channel.name){\n      const chId = props.channels.find(i => i.name == name).id\n      await props.setChannel(chId, name, props.user)\n      await props.initializeMessages(chId, props.user)\n      await props.initializeNotes(chId, props.user)\n      await props.initializePictures(chId, props.user)\n      await props.initializeHtmls(chId, props.user)\n    }\n  }\n\t\n  return (\n    <div>\n      <select onChange={handleChange} className={'prevent-select dropdown2 '+props.theme}>\n        {[<option key='-1' \n          disabled \n          selected \n          hidden>select channel...</option>,\n          ...props.channels.map((channel,i) => \n          (<option value={channel.name} key={i}>{channel.name}</option>))]}\n      </select>\n    </div>\n  )    \n}\n\nconst mapStateToProps = (state) => {\n  return {\n    channels: state.channels,\n    channel: state.channel,\n    user: state.loggedUser,\n  }\n}\n\nexport default connect(\n  mapStateToProps,\n  { initializeChannels, \n    setChannel, \n    initializeMessages,\n    initializePictures,\n    initializeNotes,\n    initializeHtmls,\n    })(DropDownContainer)","import React, { useEffect } from 'react'\n//import React from 'react'\nimport FocusScrollable from './FocusScrollable'\nimport MessageForm from './MessageForm'\nimport { HoverButton } from './Login'\n//import { useDrag, DndProvider, useDrop } from 'react-dnd'\n//import HTML5Backend from 'react-dnd-html5-backend'\nimport DropDownContainer from './DropDownContainer'\nimport { connect } from 'react-redux'\nimport './Chat.css'\nimport './DnD.css'\n\n\nconst ChatWindow = (props) => {\n\nconst handle = () => {\t\n  props.setChat(false)\n}\n\nreturn (\n  <div>\n    <div className={'channelpanel '+props.theme}>\n      <table style={{width:'100%', borderTop:'1px solid #443922'}}>\n        <tbody>\n           <tr>\n             <td className='tdchannel'>\n              <div className={'prevent-select channel '+props.theme}>\n                CHANNEL \n              </div>\n             </td>\n             <td className='tdchannel2'>\n              <div className={'prevent-select create '+props.theme}>\n                create new channel\n              </div>\n              <div style={{marginLeft:'0.5em', display:'inline'}}>\n                <button className={'prevent-select hoverbutton '+props.theme} style={{\n                  fontFamily: 'Lato,Helvetica Neue,Arial,Helvetica,sans-serif', \n                  fontWeight:'700'}}  onClick={handle}>create</button>\n              </div>\n             </td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n      <DropDownContainer theme={props.theme} user={props.user} />\n      <FocusScrollable theme={props.theme}/>\n      <MessageForm theme={props.theme}/>\n    </div>\n)\n}\n\nconst mapStateToProps = (state) => {\nreturn {\n  user: state.loggedUser\n}\n}\nexport default connect(mapStateToProps)(ChatWindow)\n \n/*\nconst ChatWindow = (props) => {\n  const [, drop] = useDrop({\n    accept: ['cw'],\n    drop(item, monitor) {\n      const delta = monitor.getDifferenceFromInitialOffset()\n      const left = Math.round(item.left + delta.x)\n      const top = Math.round(item.top + delta.y)\n      if(item.type == 'cw') setPos({left, top})\n      return undefined\n    },\n  })\n\n  const [pos, setPos] = useState({left:'0px',top:'0px'})\n  \n  useEffect(() =>{\n    console.log(document.getElementById('chat-window'))\n    //setPos({left: document.getElementById('chat-window').style.left, top: document.getElementById('chat-window').style.top})\n  },[])\n  \n  const [{ isDragging }, drag] = useDrag({\n    item: { id:'chat-window', left: pos.left , top:pos.top, type: 'cw'},\n    collect: monitor => {\n      return {isDragging: monitor.isDragging()}\n    },\n  })\n\n  const handle = () => {\t\n    props.setChat(false)\n  }\n\n  return (\n    <DndProvider backend={HTML5Backend}>\n      <div ref={drop} style={{width:'100vw',height:'100vh'}}>\n        <div ref={drag} id='chat-window' className='cw' style={{position:'absolute,top:pos.top,left:pos.left'}} >\n          <div style={{backgroundColor: 'black',color:'white',borderBottom:'1px solid #443922', marginTop:'-0.2em'}}>\n            <table style={{width:'100%', borderTop:'1px solid #443922'}}>\n              <tbody>\n                <tr>\n                  <td className='tdchannel'>\n                    <div className='channel'>\n                      CHANNEL \n                    </div>\n                  </td>\n                  <td className='tdchannel2'>\n                    <div className='create'>\n                      create new channel\n                    </div>\n                    <div style={{marginLeft:'0.5em', display:'inline'}}>\n                      <HoverButton style={{\n                        fontFamily: 'Lato,Helvetica Neue,Arial,Helvetica,sans-serif', \n                        fontWeight:'700'}}  onClick={handle}>create</HoverButton>\n                    </div>\n                  </td>\n                </tr>\n              </tbody>\n            </table>\n          </div>\n          <DropDownContainer user={props.user} />\n          <FocusScrollable/>\n          <MessageForm />\n        </div>\n      </div>\n    </DndProvider>\n  )\n}\n\nconst mapStateToProps = (state) => {\n  return {\n    user: state.loggedUser\n  }\n}\nexport default connect(mapStateToProps)(ChatWindow)\n*/\n","export const setError = data => dispatch => {\n  dispatch ({\n    type: 'SET_ERROR',\n    data\n  })\n}\n\nconst reducer = (state = null, action) => {\n  switch (action.type) {\n  case 'SET_ERROR':\n    return action.data\n  default:\n    return state\n  }\n}\nexport default reducer","import React, { useEffect, useState } from 'react'\nimport { connect } from 'react-redux'\nimport  { useField } from '../hooks/field'\nimport { initializeUsers } from '../reducers/usersReducer'\nimport { createChannel } from '../reducers/channelsReducer'\nimport { newFeed } from '../reducers/messageReducer'\nimport { initEmpty } from '../reducers/noteReducer'\nimport { initEmptyPictures } from '../reducers/pictureReducer'\nimport { initEmptyHtmls } from '../reducers/htmlReducer'\nimport { setError } from '../reducers/errorReducer'\nimport Info from './Info'\nimport { setChannel } from '../reducers/selectedChannelReducer'\nimport { Form, Input, Dropdown } from 'semantic-ui-react'\nimport './Chat.css'\n\nconst CreateChannelForm = (props) => {\n\n  const [selection, setSelection] = useState([])\n  const name = useField('text')\n  const [message,setMessage] = useState(null)\n  const [channelsCount,setChannelsCount] = useState(props.channels.length)\n\t\n  const resetWarnings = () => {\n    setMessage(null)\n    props.setError(null)\n  }\n  \n  useEffect(() => {\n    if(props.error) setMessage({content:props.error.message,color:'red'})\n  },[props.error])\n\n  useEffect(() => {\n    if(props.user) props.initializeUsers(props.user)\n    if(channelsCount < props.channels.length){\n      setChannelsCount(props.channels.length)\n      const setNewChannel = async () => {\n        const chId = await props.channels.find(i => i.name === name.input.value.trim()).id\n        await props.setChannel(chId, name.input.value.trim(), props.user)\n        await props.newFeed()\n        await props.initEmpty()\n        await props.initEmptyPictures()\n        await props.initEmptyHtmls()\n        resetWarnings()\t\n      }\n      setNewChannel()\n      props.setChat(true)\n    }\n    return () => {\n      resetWarnings()\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [props.channels])\n\n  const handleChange = (e,data) => {\n    e.preventDefault()\n    setSelection(data.value)\n  }\n\n  const handleSubmit = async (e) => {\n    e.preventDefault()\n    const chName = name.input.value.trim()\n    if(selection.length > 0 && chName !== '') {\n      if(props.channels.find(c => c.name === chName)){\n        setMessage({content:'dublicate channel name',color:'red'})\n        return\n      }\n      await props.createChannel(chName, [...selection,props.user.userId], props.user)\n    }\n    else setMessage({content:'users or name missing', color:'red'})\n  }\n  const cancel = () => {\n    props.setChat(true)\n  }\n\n  if(props.users)\n    return (\n      <div style={{textAlign:'center'}}>\n        <Form className={'create-channel-form '+props.theme}>\n          <Form.Field  style={{width:'80%', margin:'auto'}}>\n          <div className={'create-channel-input '+props.theme} style={{fontWeight:'bold', paddingBottom:'0.3em'}}>Name</div>\n            <Input placeholder='channel name' {...name.input} />\n            </Form.Field>\n          <div style={{width:'80%', margin:'auto'}}>\n            <div className={'create-channel-input '+props.theme} style={{fontWeight:'bold', paddingBottom:'0.3em'}}>Users</div>\n            <Dropdown label='Users' placeholder='users' fluid multiple search selection \n              options={props.users.filter(u => (u.id !== props.user.userId)).map(u => ({key:u.id, text:u.username,value:u.id}))}\n              onChange={handleChange}\n            />\n          </div>\n          <div style={{margin:'auto',textAlign:'center'}}>\n          <button className={'create-channel-button hoverbutton '+props.theme} type='button' onClick={handleSubmit}>create</button>\n          <button className={'create-channel-button hoverbutton '+props.theme} type='button' style={{marginLeft:'1.4em'}} onClick={cancel}>cancel</button>\n          </div>\n        </Form>\n        <div style={{margin:'auto',width:'80%',marginTop:'2em'}}>\n          <Info message={message} clear={resetWarnings} />\n        </div>\n      </div>\n    )\n  return <div></div>\n}\n\nconst mapStateToProps = (state) => {\n  return {\n    user: state.loggedUser,\n    users: state.users,\n    channels: state.channels,\n    error:state.error\n  }\n}\n\nexport default connect(mapStateToProps,{ initializeUsers,\n  createChannel,\n  setError,\n  setChannel,\n  newFeed,\n  initEmpty,\n  initEmptyPictures,\n  initEmptyHtmls})(CreateChannelForm)","export default new Map([['#ffffcc',{background:'linear-gradient(20deg,#756b57,#a89e8a)', color:'black',fontWeight:'700'}],\n  ['#ffcccc',{background:'linear-gradient(20deg,#77633c,#b29966)', color:'black',fontWeight:'700'}],\n  ['#ccffff',{background:'linear-gradient(20deg,#221a11,#664d33)', color:'#e9d396',fontWeight:'700'}],\n  ['#99ffcc',{background:'linear-gradient(20deg,#6b5147,#a38175)', color:'black',fontWeight:'700'}],\n  ['#ffccff',{background:'linear-gradient(20deg,#634136,#a66c59)', color:'black',fontWeight:'700'}],\n  ['#80ffff',{background:'linear-gradient(20deg,#240f0f,#6b2e2e)', color:'#e9d396',fontWeight:'700'}],\n  ['#ff99c2',{background:'linear-gradient(20deg,#798086,#afb3b6)', color:'black',fontWeight:'700'}],\n  ['#99ff99',{background:'linear-gradient(20deg,#3d4043,#6d7378)', color:'black',fontWeight:'700'}],\n  ['#ff99ff',{background:'linear-gradient(20deg,#272428,#5c555e)', color:'#e9d396',fontWeight:'700'}]])","export default new Map([['#ffffcc',{background:'linear-gradient(20deg,#7ca1de,#b3d0ff)', color:'black',fontWeight:'700'}],\n  ['#ffcccc',{background:'linear-gradient(20deg,#8980d9,#bbb3ff)', color:'black',fontWeight:'700'}],\n  ['#ccffff',{background:'linear-gradient(20deg,#5155cf,#8084ff)', color:'black',fontWeight:'700'}], //ok\n  ['#99ffcc',{background:'linear-gradient(20deg,#62bdbb,#bffffe)', color:'black',fontWeight:'700'}],\n  ['#ffccff',{background:'linear-gradient(20deg,#b58d53,#ffd599)', color:'black',fontWeight:'700'}],\n  ['#80ffff',{background:'linear-gradient(20deg,#a34c00,#ff9900)', color:'black',fontWeight:'700'}], //ok\n  ['#ff99c2',{background:'linear-gradient(20deg,#88b38a,#c4ffc7)', color:'black',fontWeight:'700'}],\n  ['#99ff99',{background:'linear-gradient(20deg,#bdbdbd,#d6d6d6)', color:'black',fontWeight:'700'}],\n  ['#ff99ff',{background:'linear-gradient(20deg,#798086,#afb3b6)', color:'black',fontWeight:'700'}]])","import React, { useState, useEffect } from 'react'\nimport { useDrag } from 'react-dnd'\nimport {setNote } from '../reducers/noteReducer'\nimport { connect } from 'react-redux'\nimport { useTransition, animated } from 'react-spring'\nimport mapD from './noteColorsDark'\nimport mapL from './noteColorsLight'\nimport './Note.css'\n\n\nconst Note = (props) => {\n\n  const [text, setText] = useState(props.content)\n  const [pr, set] = useState(props)\n  const [show, setShow] = useState(props.show)\n  const [map, setMap] = useState(mapD)\n\n  // onBlur ei toimi ilman tätä\n  useEffect(() => {\n    setText(props.content)\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [props.content])\n\n  \n  useEffect(() => {\n    if(props.theme === 'light') {\n      setMap(mapL)\n    } else {\n      setMap(mapD)\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [props.theme])\n\n  useEffect(() => {\n    set(props)\n  }, [props])\n\n  useEffect(() => {\n    return () => {setShow(false)}\n  }, [props.channel,props.show])\n\n  const onChange = (event) => {\n    setText(event.target.value)\n  }\n\n  const transitions = useTransition(show, null, {\n    from: { opacity: 0, transform: 'scale(0)' },\n    enter: { opacity: 1, transform: 'scale(1)' },\n    leave: { opacity: 0, transform: 'scale(0)' },\n    \n  })\n// config: { mass: 1.2, tension: 280, friction: 18, precision:0.005 }\n  const [{ isDragging }, drag] = useDrag({\n    item: { id:props.id, left:props.left, top:props.top, type: 'note' },\n    collect: monitor => {\n      return {isDragging: monitor.isDragging()}\n    },\n  })\n  if (isDragging) {\n    return <div ref={drag} />\n  }\n\n  const updateText = async (Id) => {\n    const note= props.notes.find(n => n.id === Id)\n    const date2 = new Date()\n    if(note.content !== text)\n      await props.setNote({...note, content:text, author:props.user.username, \n        date: new Date(date2.getTime()-date2.getTimezoneOffset()*60*1000).toISOString()}, props.channel.id, props.user)\n  }\n\n  const setDate = (date) => {\n    if(date) return date.slice(8,10)+'.'+date.slice(5,7)+'. '+date.slice(11,16)\n  }\n\n  return transitions.map(({ item, key, props }) => \n            item && <animated.div key={key} className='note' ref={drag} id={pr.id} style={{left:pr.left,top:pr.top,...map.get(pr.backgroundColor),...props}}  >\n              <div className='noteHeader' style={{marginTop:'0px',marginBottom:'0px'}} >{pr.author} {setDate(pr.date)}</div>\n              <textarea className='txt-place' \n                  style={{...map.get(pr.backgroundColor) }} \n                  value={text} \n                  onChange={onChange}\n                  onBlur={() => updateText(pr.id)} />\n            </animated.div>)\n}\n\nconst mapStateToProps = (state) => {\n  return {\n    user: state.loggedUser,\n    channel: state.channel,\n    notes: state.notes\n  }\n}\n\nexport default connect(mapStateToProps,{setNote})(Note)","import React from 'react'\n\nconst Header = ({theme, title}) => (\n  <div className='HeaderContainer'>\n    <div className={'HeaderBG '+theme}>\n      <div className={'HeaderTXT '+theme}>\n        {title}\n      </div>\n    </div>\n  </div>\n)\n\nexport default Header","/* eslint-disable react/destructuring-assignment */\nimport React, { useState, useEffect } from 'react'\nimport Header from './Header'\nimport { useTransition, animated } from 'react-spring'\nimport { connect } from 'react-redux'\n\nconst MyImage = (props) => {\n\n  const [loaded, setLoaded] = useState(false) \n  const [picSrc, setPicSrc] = useState(null)\n  \n  const transitions = useTransition(loaded, null, {\n    from: { opacity: 0 },\n    enter: { opacity: 1},\n    leave: { opacity: 0},\n  })\n\n  const top = Number(props.top) + document.getElementById('dnd').offsetTop\n  const left = Number(props.left) + document.getElementById('dnd').offsetLeft\n  const name = props.name\n  const theme = props.theme\n\n  // for fade out:\n  useEffect(() => {\n    return () => {\n      setLoaded(false)\n    }\n  }, [props.channel])\n\n  const arrayBufferToBase64 = (buffer) => {\n    let binary = ''\n    const bytes = [].slice.call(new Uint8Array(buffer))\n    // eslint-disable-next-line no-return-assign\n    bytes.forEach((b) => binary += String.fromCharCode(b))\n    return window.btoa(binary)\n  }\n\n  useEffect(() => {\n    const pic = new Image()\n    pic.src = `data:${props.picture.contentType};`\n          + `base64,${arrayBufferToBase64(props.picture.data.data)}`\n    pic.onload = () => setLoaded(true)\n    setPicSrc(pic)\n  }, [props.picture])\n\n  return transitions.map(({ item, key, props }) =>\n  item && <animated.div key={key} style={{\n    ...props, \n    position:'absolute',\n    top:top,\n    left:left}} >\n    <div className='image' style={{\n      width: 'fit-content',\n      zIndex:'0',\n      textAlign: 'center',\n      margin: '0',\n    }}\n    >\n      <Header theme={theme} title={name} />\n      <img src={picSrc.src} alt={name}/>\n    </div> \n    </animated.div>)\n}\n\nconst mapStateToProps = (state) => {\n  return {\n    channel: state.channel,\n  }\n}\n\nexport default connect(\n  mapStateToProps,null)(MyImage)\n","import React, { useState, useEffect } from 'react'\nimport { useTransition, animated } from 'react-spring'\nimport { connect } from 'react-redux'\n\nconst Html = (props) => {\n\n  const [pr, set] = useState(props)\n  const [show, setShow] = useState(true)\n\n  useEffect(() => {\n    document.getElementById(props.id).innerHTML=props.content \n  }, [])\n\n  useEffect(() => {\n    return () => {setShow(false)}\n  }, [props.channel])\n\n  const transitions = useTransition(show, null, {\n    from: { opacity: 0, transform: 'scale(0)' },\n    enter: { opacity: 1, transform: 'scale(1)' },\n    leave: { opacity: 0, transform: 'scale(0)' },\n    \n  })\n\n  return transitions.map(({ item, key, props }) => \n    <animated.div key={key}  style={{position:'absolute',left:pr.left,top:pr.top,...props}}  >\n        <div id={pr.id}></div>\n    </animated.div>)\n}\n\nconst mapStateToProps = (state) => {\n  return {\n    channel: state.channel,\n  }\n}\n\nexport default connect(mapStateToProps,null)(Html)","import React from 'react'\nimport spinner from './Spinner.svg'\n\nconst StyledSpinner = () => {\n    return <div style={{\n        position: 'absolute',\n        top: '43%',\n        left: '45%'\n    }}>\n        <img src={spinner} alt=\"Loading...\" />\n    </div>\n}\nexport default StyledSpinner\n","import React, { useState } from 'react'\nimport axios from 'axios'\nimport { connect } from 'react-redux'\nimport { addPicture,callback } from '../reducers/pictureReducer'\nimport { ToastContainer, toast } from 'react-toastify'\nimport styled from 'styled-components'\nimport 'react-toastify/dist/ReactToastify.css'\nimport { Progress } from 'reactstrap'\nimport { useField } from '../hooks/field'\nimport { useDispatch } from 'react-redux'\n//import { HoverButton } from './Login'\nimport './DnD.css'\nimport './Chat.css'\n\nconst options = {\n    autoClose: false,\n    position: toast.POSITION.BOTTOM_CENTER,\n    hideProgressBar: true,\n    closeOnClick: true,\n    pauseOnHover: true,\n    draggable: true,\n    progress: 0.5,\n  }\n\nexport const FlexItem = styled.div`\n  text-align: center; \n  width: 100%; \n  align-self: strech;\n`\nconst FormHeader = styled.span`\n  text-align: center;\n  font-size: 2em; \n  line-height: 1em; \n  font-weight: 800; \n  padding: 0; \n`\nconst LabelStyle = styled.p`\n  line-height: 1em; \n  margin: 0.2em 0 0.3em 0; \n  font-size: 1.2em;\n  font-weight:bold; \n`\nconst TextInput = styled.input`\n  line-height: 1em;\n  height: 2em;  \n  font-size: 1em; \n  width:97%;\n  margin: 0; \n  padding: 0;\n`\n\nconst UploadForm = ({theme,setVisible,top,left,channelId,user,channel }) => {\n  const [loaded, setLoaded] = useState(0)\n  const [selectedFile, setSelectedFile] = useState(null)\n  const itemName = useField('text', '')\n  const dispatch = useDispatch()\n  const onChangeHandler = (event) => {\n    const { files } = event.target\n    if(files[0] && files[0].size < 1000000 && files[0].name.match(/\\.(png)$/)) {\n      setLoaded(0)\n      setSelectedFile(files[0])\n    } else {\n      toast.warn('File type is wrong or file size too big!', {\n        position: toast.POSITION.BOTTOM_CENTER\n    })\n    }\n  }\n  const baseUrl = '/api/pictures'\n\n  const upload = async (payload) => {\n    toast.info('uploading...', options)\n    await axios.post(`${baseUrl}/add/${channelId}`, payload, {\n        onUploadProgress: (ProgressEvent) => {\n        // eslint-disable-next-line no-mixed-operators\n          setLoaded(ProgressEvent.loaded / ProgressEvent.total * 100)\n        }, })\n        .then(res => {\n          dispatch(addPicture(res,channel.id,user))\n          dispatch(callback(channel.id,user))\n        })\n        .catch(e => {\n          console.log(e)\n        })\n  setVisible(false)\n  }\n\n  const onClickHandler = (id) => {\n    const data = new FormData()\n    if(!selectedFile){\n      toast.error('select file', {\n        position: toast.POSITION.BOTTOM_CENTER\n      })\n      return\n    }\n    data.append('uploaded_file', selectedFile)\n    if(itemName.input.value == ''){\n      toast.error('name is required', {\n        position: toast.POSITION.BOTTOM_CENTER\n      })\n      return\n    }\n    data.append('name', itemName.input.value)\n    data.append('top', top)\n    data.append('left', left)\n    upload(data)\n  }\n\n  return (\n    <div className={'Container2 '+theme} style={{display:'flex', flexDirection:'column',alignItems: 'center', justifyContent:'center',zIndex:'199',position:'absolute',top:top,left:left}}>\n      <FormHeader className='prevent-select'>\n        select picture\n      </FormHeader>\n      <FlexItem>\n        <LabelStyle className='prevent-select'>small png. max 1M </LabelStyle>\n        <input\n          style={{ paddingLeft:'0.5em', lineHeight: '1.5em', fontSize: '1em', margin: '0'}}\n          type=\"file\"\n          name=\"upload_file\"\n          className={'form-control-file inputstyle '+theme}\n          onChange={onChangeHandler}\n        />\n      </FlexItem>\n      <FlexItem>\n        <LabelStyle className='prevent-select'>name: </LabelStyle>\n        <TextInput placeholder=\"required\" {...itemName.input} className=\"form-control\" required />\n      </FlexItem>\n      <FlexItem className='prevent-select'>\n        <ToastContainer style={{ zIndex:'5000',fontSize: '1.4em' }} />\n        <Progress className='prevent-select' max=\"100\" color=\"success\" value={loaded}>\n          {Math.round(loaded, 2) }\n          %\n        </Progress>\n        <button className={'hoverbutton '+theme} type=\"submit\" onClick={onClickHandler}>submit</button>\n        &ensp;&ensp;&ensp;&ensp;\n        <button className={'hoverbutton '+theme} type=\"submit\" onClick={()=>setVisible(false)}>cancel</button>\n      </FlexItem>\n    </div>\n  )\n}\n\nconst mapStateToProps = (state) => {\n  return {\n    channel: state.channel,\n    user: state.loggedUser,\n  }\n}\n\nexport default connect(\n  mapStateToProps,null)(UploadForm) \n\n //export default UploadForm","import React, { useRef, useEffect } from 'react'\nimport { FlexItem } from './UploadForm'\nimport styled from 'styled-components'\nimport { useField } from '../hooks/field'\nimport './DnD.css'\nimport './Chat.css'\n\nconst TextInput = styled.input`\n  line-height: 1em;\n  height: 2em;  \n  font-size: 1em; \n  width:97%;\n  margin: 0 0 0.5em 0; \n  padding: 0;\n`\n\nconst SetHTMLForm = (props) => {\n  const html = useField('text', '')\n  const inputElement = useRef()\n \n  const onClickHandler = (id) => {\n    const top = props.top + document.getElementById('dnd').offsetTop + document.getElementById('wa').offsetHeight\n    const left = props.left + document.getElementById('dnd').offsetLeft\n    props.addHtml({left,top,content:html.input.value},props.channel.id, props.user) \n    html.reset()\n    props.setVisible(false)\n  }\n\n  useEffect(() => {\n    inputElement.current.focus()\n  },[])\n  \n  return (\n    <div className={'Container2 '+props.theme} style={{display:'flex', flexDirection:'column',alignItems: 'center', justifyContent:'center',zIndex:'199',position:'absolute',top:props.top,left:props.left}}>\n      <div id='testhtml'></div>\n      <FlexItem>\n        <TextInput ref={inputElement} {...html.input} className=\"form-control\" required />\n      </FlexItem>\n      <FlexItem className='prevent-select'>\n      <button className={'hoverbutton '+props.theme} type=\"submit\" onClick={onClickHandler}>submit</button>\n        &ensp;&ensp;&ensp;&ensp;\n        <button className={'hoverbutton '+props.theme} type=\"submit\" onClick={()=>props.setVisible(false)}>cancel</button>\n      </FlexItem>\n    </div>\n  )\n}\n\nexport default SetHTMLForm\n","import React, { useState, useEffect, useCallback, useRef } from 'react'\nimport { useDrop } from 'react-dnd'\nimport Note from './Note'\nimport MyImage from './Image'\nimport Html from './Html'\nimport StyledSpinner from './StyledSpinner'\nimport {addNote, setNote, deleteNote} from '../reducers/noteReducer'\nimport {addHtml, setHtml} from '../reducers/htmlReducer'\nimport { connect } from 'react-redux'\nimport UploadForm from './UploadForm'\nimport SetHTMLForm from './SetHTMLForm'\nimport mapD from './noteColorsDark'\nimport mapL from './noteColorsLight'\nimport { CSSTransition } from 'react-transition-group';\nimport './DnD.css'\n\n\nconst DnDContainer = (props) => {\n        \n  const [menu, setMenu] = useState(false) \n  const [menuStyle, setMenuStyle] = useState({zIndex:1000,position: 'absolute', left:0, top:0})\n  const [menu2, setMenu2] = useState(false)\n  const [menu2Props, setMenu2Props] = useState(false)\n  const [uploadForm, setUploadForm] = useState(false)\n  const [htmlForm, setHtmlForm] = useState(false)\n  const [formStyle, setFormStyle] = useState({zIndex:1000,position: 'absolute', left: 0, top:0})\n  const [pos, setPos] = useState({left:'0px',top:'0px'})\n  const [map, setMap] = useState(mapD)\n  const menuRef = useRef(null)\n  const menu2Ref = useRef(null)\n  const uploadFormRef = useRef(null)\n  const htmlFormRef = useRef(null)\n  const [zIndex, setZIndex] = useState('5')\n\n  useEffect(() => {\n    if(props.theme === 'light') {\n      setMap(mapL)\n    } else {\n      setMap(mapD)\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [props.theme])\n\n  const [, drop] = useDrop({\n    accept: ['note'],\n    drop(item, monitor) {\n      const delta = monitor.getDifferenceFromInitialOffset()\n      const left = Math.round(item.left + delta.x)\n      const top = Math.round(item.top + delta.y)\n      if(item.type == 'note') moveNote(item.id, left, top)\n      return undefined\n    },\n  })\n\n  const moveNote = (id, left, top) => {\n    const note= props.notes.find(n => n.id === id)\n    props.setNote({...note, top: top, left:left}, props.channel.id, props.user)\n  }\n  \n  const handleContextMenu = (event) => {\n    event.preventDefault()\n\n    const top = event.nativeEvent.offsetY - document.getElementById('wa').offsetHeight\n    const left = event.nativeEvent.offsetX\n\n    if(menu.visible || menu2.visible){\n      hideMenus()\n      return\n    }\n    if( event.target.id === 'dnd' ){\n      setMenuStyle({zIndex:1000,position: 'absolute', left, top})\n      setMenu(true)\n      setMenu2(false)\n    } else if(event.nativeEvent.target.className === 'noteHeader' || \n              event.nativeEvent.target.className === 'txt-place') {\n      handleContextMenu2(event)\n    }\n  }\n  const handleContextMenu2 = (event) => {\n    const left = Number(event.target.offsetParent.style.left.replace('px','')) + Number(event.nativeEvent.offsetX)\n    const top = Number(event.target.offsetParent.style.top.replace('px','')) + Number(event.nativeEvent.offsetY)\n \n    setMenu2Props({id: event.nativeEvent.target.offsetParent.id,\n                    style:{\n                      position: 'absolute',\n                      left:left,\n                      top:top,\n                      zIndex:1000}\n                    })\n    setMenu2(true)\n    setMenu(false)\n  }\n  const handleAddNote = (e) => {\n    e.preventDefault()\n    const date = new Date()\n    let top = menuStyle.top + document.getElementById('wa').offsetHeight\n    props.addNote({left: menuStyle.left,\n                  top, backgroundColor:'#ffffcc',\n                  date: new Date(date.getTime()-date.getTimezoneOffset()*60*1000),\n                  author: props.user.username},\n                  props.channel.id, props.user)\n    setMenu(false)\n  }\n\n  const handleUploadPicture = (event) => {\n    event.preventDefault()\n    setUploadForm(true)\n    setFormStyle({zIndex:1000,position: 'absolute', left: menuStyle.left, top: menuStyle.top})\n    hideMenus()\n  }\n  const handleAddHTML = async (event) => {\n    event.preventDefault()\n    setHtmlForm(true)\n    setFormStyle({zIndex:1000,position: 'absolute', left: menuStyle.left, top: menuStyle.top})\n    hideMenus()\n  }\n  const handleDelete = (e) => {\n    e.preventDefault()\n    props.deleteNote(menu2Props.id, props.channel.id, props.user)\n  }\n\n  const setColor = (e) => {\n    e.preventDefault()\n    const note= props.notes.find(n => n.id === menu2Props.id)\n    props.setNote({...note, backgroundColor: e.nativeEvent.target.id}, props.channel.id, props.user)\n    hideMenus()\n  }\n  const html = (props) => <div>\n                              <CSSTransition\n                                  in={htmlForm}\n                                  nodeRef={htmlFormRef}\n                                  timeout={500}\n                                  classNames=\"contextmenu\"\n                                  unmountOnExit\n                                > \n                                  <div ref={htmlFormRef} >\n                                    <SetHTMLForm setVisible={setHtmlForm}\n                                      {...props}\n                                      top={formStyle.top} \n                                      left={formStyle.left} \n                                      channelId={props.channel.id} \n                                      style={{...formStyle}}\n                                      theme={props.theme}/>\n                                  </div>\n                                </CSSTransition>\n                              </div>\n\n  const upload = (props) => <div>\n                              <CSSTransition\n                                  in={uploadForm}\n                                  nodeRef={uploadFormRef}\n                                  timeout={500}\n                                  classNames=\"contextmenu\"\n                                  unmountOnExit\n                                > \n                                  <div ref={uploadFormRef} >\n                                    <UploadForm setVisible={setUploadForm} \n                                      top={formStyle.top} \n                                      left={formStyle.left} \n                                      channelId={props.channel.id} \n                                      style={{...formStyle}}\n                                      theme={props.theme}/>\n                                  </div>\n                                </CSSTransition>\n                              </div>\n\n  const contextMenu2 = () => <div>\n                              <CSSTransition\n                                  in={menu2}\n                                  nodeRef={menu2Ref}\n                                  timeout={500}\n                                  classNames=\"contextmenu\"\n                                  unmountOnExit\n                                >\n                                <div className={'menu '+props.theme} ref={menu2Ref} style={{...menu2Props.style, width:'9rem'}}>\n                                    <ul className=\"menu-options\">\n                                      <li className={'prevent-select menu-option '+props.theme} onClick={handleDelete}>\n                                        delete note\n                                      </li>\n                                      <li className={'prevent-select menu-option '+props.theme} >\n                                        <div className='dropdown prevent-select' >\n                                          set color\n                                          <div className=\"dropdown-content\">\n                                            <table className={'dropdown-content-style '+props.theme}>\n                                              <tbody>\n                                                <tr>\n                                                  <td><button className='button' id='#ffffcc' onClick={setColor} style={{background:map.get('#ffffcc').background}}></button></td>\n                                                  <td><button className='button' id='#ffcccc' onClick={setColor} style={{background:map.get('#ffcccc').background}}></button></td>\n                                                  <td><button className='button' id='#ccffff' onClick={setColor} style={{background:map.get('#ccffff').background}}></button></td>\n                                                </tr>\n                                                <tr>\n                                                  <td><button className='button' id='#99ffcc' onClick={setColor} style={{background:map.get('#99ffcc').background}}></button></td>\n                                                  <td><button className='button' id='#ffccff' onClick={setColor} style={{background:map.get('#ffccff').background}}></button></td>\n                                                  <td><button className='button' id='#80ffff' onClick={setColor} style={{background:map.get('#80ffff').background}}></button></td>\n                                                </tr>\n                                                <tr>\n                                                  <td><button className='button' id='#ff99c2' onClick={setColor} style={{background:map.get('#ff99c2').background}}></button></td>\n                                                  <td><button className='button' id='#99ff99' onClick={setColor} style={{background:map.get('#99ff99').background}}></button></td>\n                                                  <td><button className='button' id='#ff99ff' onClick={setColor} style={{background:map.get('#ff99ff').background}}></button></td>\n                                                </tr>\n                                              </tbody>\n                                            </table>\n                                          </div>\n                                        </div>\n                                      </li>\n                                    </ul>\n                                  </div>  \n                                  </CSSTransition>\n                              </div>\n  \n  const contextMenu = () => <div>\n                              <CSSTransition\n                                  in={menu}\n                                  nodeRef={menuRef}\n                                  timeout={500}\n                                  classNames=\"contextmenu\"\n                                  unmountOnExit\n                                >\n                                <div className={'menu '+props.theme} ref={menuRef} style={{...menuStyle, width:'9rem'}}>\n                                  <ul className=\"menu-options\">\n                                    <li className={'prevent-select menu-option '+props.theme} onClick={handleAddNote}>\n                                      add note\n                                    </li>\n                                    <li className={'prevent-select menu-option '+props.theme} onClick={handleUploadPicture}>\n                                      upload picture\n                                    </li>\n                                    <li className={'prevent-select menu-option '+props.theme} onClick={handleAddHTML}>\n                                      add HTML\n                                    </li>\n                                  </ul>\n                                </div>\n                              </CSSTransition>\n                            </div>\n  \n  const hideMenus = () => {\n    setMenu(false)\n    setMenu2(false) \n  }\n\n  let offsetX, offsetY\n  let moveContent = false\n\t\n  const move = e => {\n    if(moveContent && e.target.className !== 'note') {\n      document.getElementById('dndWrapper').style.left = `${e.pageX-offsetX}px`\n      document.getElementById('dndWrapper').style.top = `${e.pageY-offsetY}px`\n      document.getElementById('root').style.backgroundPositionX = 0.5*(e.pageX-offsetX) + 'px'\n      document.getElementById('root').style.backgroundPositionY = 0.5*(e.pageY-offsetY) + 'px'\n      document.getElementById('bg').style.backgroundPositionX = 0.25*(e.pageX-offsetX) + 'px'\n      document.getElementById('bg').style.backgroundPositionY = 0.25*(e.pageY-offsetY) + 'px'\n    }\n  }\n  \n  const start = e => {\n    setZIndex('2')\n    if(e.target.className === 'dndC'){\n      moveContent = true\n      offsetX = e.clientX - Number(pos.left.replace('px',''))\n      offsetY = e.clientY - Number(pos.top.replace('px',''))\n    }\n  }\n  \n  const stop = e => {\n    moveContent = false\n    if(e.target.className === 'dndC'){\n      setPos({\n        left : document.getElementById('dndWrapper').style.left ,\n        top :  document.getElementById('dndWrapper').style.top\n      })\n      setZIndex('5')\n    }\n  }\n\n  const onpointerdown = e => {\n    if(e.target.id === 'dnd') setZIndex('2')\n  }\n\n  if(props.notes)\n    return (\n      <div className={'prevent-select dndWrapper '+props.theme} id='dndWrapper' onContextMenu={handleContextMenu}\n        onPointerOver={onpointerover}\n        onPointerDown={onpointerdown}\n        onClick={hideMenus} \n        onMouseMove={move}\n        onMouseDown={start}\n        onMouseUp={stop}\n        style={{...pos}}>\n        <div className={'hoverthing '+props.theme}>\n            <div ref={drop} id='dnd' className='dndC'\n              style={{zIndex:zIndex}}\n            >\n              <div className='prevent-select' id='wa'>&nbsp;draggable working area</div>\n              {props.notes.map(b => <Note theme={props.theme} key={b.id} {...b}/> )}\n              {contextMenu()}\n              {contextMenu2()}\n              {upload(props)}\n              {html(props)}\n            </div>\n          {props.pictures.map((i) => <MyImage theme={props.theme} key={i.id} {...i}/>)}\n          {props.htmls.map(h => <Html key={h.id} {...h}/>)}\n        </div>\n      </div>\n    )\n  return <StyledSpinner/>\n}\nconst mapStateToProps = (state) => {\n  return {\n    user: state.loggedUser,\n    channel: state.channel,\n    notes: state.notes,\n    pictures: state.pictures,\n    htmls: state.htmls\n  }\n}\nexport default connect(mapStateToProps,{addNote, setNote, deleteNote, addHtml, setHtml})(DnDContainer)","import React,{ useState, useEffect } from 'react'\nimport { connect } from 'react-redux'\nimport './ChannelName.css'\nimport './DnD.css'\n\nconst ChannelName = (props) => {\n  const [css, setCss] = useState('channelNameAnim')\n   \n  useEffect(() => {\n    setCss('channelNameAnim '+props.theme)\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [props.channel,props.theme])\n\n  return (\n    <div className={'prevent-select '+css} onAnimationEnd={()=>setCss('channelName '+props.theme)}>{props.channel.name}</div>\n  )\n}\n\nconst mapStateToProps = (state) => {\n  return {\n    channel: state.channel\n  }\n}\nexport default connect(mapStateToProps,null)(ChannelName)","import React, { useEffect } from 'react'\nimport './Chat.css'\nimport './DnD.css'\nimport './switch.css'\n\nconst Theme = (props) =>  {\n\n   const handleTheme = e => {\n     if(e.target.checked) {\n         props.setTheme('light')\n     } else {\n          props.setTheme('dark')\n        }\n      }\n\n    useEffect(() =>{\n        if(props.theme ==='light' || document.getElementById('themeselector').checked == true) {\n          document.getElementById('themeselector').checked=true\n          props.setTheme('light')\n        } \n    })\n\nreturn <div style={{display:'inline-block'}}>\n         <table style={{borderCollapse:'collapse',float:'left',height:'18px',paddingTop:'1em'}}>\n            <tbody>\n              <tr className={'themeselect '+ props.theme} style={{lineHeight:'18px',height:'18px'}}>\n                <td className='prevent-select'>theme: dark</td>\n                <td style={{padding:'0 .5em 0 .5em'}}>\n                <label className=\"switch\">\n                <input id='themeselector' type=\"checkbox\" onChange={handleTheme}/>\n                <span className=\"slider round\"></span>\n                </label>\n                </td>\n                <td className='prevent-select' style={{paddingRight:'0.4em'}}>light</td>\n               </tr>\n              </tbody>\n             </table>\n            </div>\n}\n\nexport default Theme","import React, {useState, useEffect, useRef} from 'react'\nimport { connect } from 'react-redux'\nimport './DnD.css'\n\n\nconst Clock = (props) => {\n\t\n  const [time, setTime] = useState('')\n  const timeoutId = useRef(0)\n\n  useEffect(() => {\n    updateTime(props.user)\n    return () => {\n      clearTimeout(timeoutId.current)\n      updateTime(undefined)\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [props.user])\n\n  const updateTime = (user) => {\n    const date = new Date()\n    //jostain syystä tämä date onkin jo Suomiajassa\n    clearTimeout(timeoutId.current)\n    if(user){\n      setTime(date.toString().slice(16,24))\n      timeoutId.current=setTimeout(updateTime.bind(null,user),1000)\n    }\n  }\n\n  return (\n    <div className='prevent-select'>\n      {time}\n    </div>\n  )\n}\nconst mapStateToProps = (state) => {\n  return {\n    user: state.loggedUser\n  }\n}\nexport default connect(mapStateToProps,null)(Clock)","import React, { useState, useEffect } from 'react'\nimport { connect } from 'react-redux'\nimport ChatWindow from './ChatWindow'\nimport CreateChannelForm from './CreateChannelForm'\nimport DnDContainer from './DnDContainer'\nimport { DndProvider } from 'react-dnd'\nimport HTML5Backend from 'react-dnd-html5-backend'\nimport { clearUser } from '../reducers/loggedUserReducer'\nimport ChannelName from './ChannelName'\nimport { Segment } from 'semantic-ui-react'\nimport Theme from './Theme'\nimport Clock from './Clock'\nimport { useTransition, animated } from 'react-spring'\nimport './Chat.css'\nimport './DnD.css'\n\n\nconst Chat = ({theme,setTheme, user, channel, connectedUsers, gapi, clearUser}) => {\n  \n  const [chat, setChat] = useState(true)\n  const [index, setIndex] = useState(0)\n  //const [theme, setTheme] = useState('dark')\n\n  const elements = [\n    {id: 0, content: <div></div>},\n    {id: 1, content: <ChatWindow theme={theme} setTheme={setTheme} setChat={setChat}/>},\n    {id: 2, content: <CreateChannelForm theme={theme} setChat={setChat}/>}\n  ]\n  useEffect(() => {\n    if(theme === 'light'){\n      document.getElementById('root').style.backgroundImage='url(/b2l.gif)'\n      document.getElementById('bg').style.backgroundImage='url(/bl.gif)'\n      //document.body.style.backgroundColor='#ebf5fc'\n      document.body.style.backgroundColor='white'\n    } else {\n      document.getElementById('root').style.backgroundImage='url(/b2.gif)'\n      document.getElementById('bg').style.backgroundImage='url(/b.gif)'\n      document.body.style.backgroundColor='black'\n    }\n  },[theme])\n\n  useEffect(() => {\n    if(!user) setIndex(0)\n    else if(user && chat) setIndex(1)\n    else setIndex(2)\n  },[user,chat])\n\t\n  const transitions = useTransition(user, null, {\n    from: { opacity: 0, transform: 'scale(0)' },\n    enter: {  opacity: 1, transform: 'scale(1)' },\n    leave: {  opacity: 0, transform: 'scale(0)' },\n    config: { mass: 1, tension: 300, friction: 12 }\n  })\n\n  const transitions2 = useTransition(elements[index], item => item.id, {\n    from: { opacity: 0 },\n    enter: { opacity: 1 },\n    leave: { opacity: 0 },\n    config: { duration: 250 }\n  })\n\n  const dnd = () => (\n    <DndProvider backend={HTML5Backend}>\n      <DnDContainer theme={theme}/>\n    </DndProvider>\n  )\n\n  const handleLogout = (event) => {\n    event.preventDefault()\n    document.getElementById('root').style.backgroundPositionX = '0px'\n    document.getElementById('root').style.backgroundPositionY = '0px'\n    document.getElementById('bg').style.backgroundPositionX = '0px'\n    document.getElementById('bg').style.backgroundPositionY = '0px'\n    clearUser(user)\n    setChat(true)\n    if(gapi) gapi.auth2.getAuthInstance().signOut()\n  }\n\n  return (\n    <div>\n      <Segment  style={{margin:'0',padding:'0',border:'0px',backgroundColor:'transparent'}} placeholder >\n        {channel && dnd()}\n      </Segment>\n      {transitions.map(({ item, key, props }) =>\n        item && <animated.div key={key} style={{...props,zIndex:'10',position:'absolute',top:'0em',left:'oem'}}>\n          <div className={'panel '+theme}>\n            <Theme setTheme={setTheme} theme={theme} />\n          <div>\t\n          {channel && <ChannelName theme={theme}/>}\n          </div>\n          <div className={'clock '+theme} >\n            <Clock/>\n          </div>\n          </div>\n        </animated.div> )}\n      {transitions2.map(({ item, props, key }) => (\n        <animated.div\n          key={key}\n          style={{ ...props,zIndex:'10',position:'absolute',bottom:'0em',right:'0em',minWidth:'22rem', width:'21vw',paddingRight:'0'}}>\n          {item.content}\n        </animated.div>\n      ))}\n      {transitions.map(({ item, key, props }) =>\n        item && <animated.div key={key} style={{...props,zIndex:'10',position:'absolute',top:'0em',right:'0em'}}>\n          <div className={'prevent-select loggedin '+theme}>{user && user.username} is logged in </div>\n          <div style={{float:'left',display:'inline'}}>\n            <button className={'prevent-select logoutbutton hoverbutton '+theme} onClick={handleLogout}>logout</button>\n          </div>\n        </animated.div>)}\n      {transitions.map(({ item, key, props }) =>\n        item && <animated.div key={key} style={{...props}} className={'connected '+theme}>\n          <span className={'prevent-select connectedusers '+theme}>connected users</span>\n          <ul className='prevent-select' style={{\n            listStyleType:'none',\n            marginTop:'0',\n            marginBottom:'0',\n            padding:'0.2em 0 0 0'\n          }}>\n            {connectedUsers && connectedUsers.map((e,i) => <li style={{flex:'right'}} key={i}>{e}</li>)}\n          </ul>\n        </animated.div>)}\n    </div>\n  )\n}\n\nconst mapStateToProps = (state) => {\n  return {\n    user: state.loggedUser,\n    channel: state.channel,\n    connectedUsers: state.connectedUsers,\n    gapi: state.gapi\n  }\n}\nexport default connect(mapStateToProps,{ clearUser })(Chat)\n","import React, { useState, useEffect } from 'react'\nimport { Container } from 'semantic-ui-react'\nimport Login from './components/Login'\nimport Chat from './components/Chat'\nimport './App.css'\nimport StyledSpinner from './components/StyledSpinner'\n\nconst App = () => {\n  const [ loading, setLoading ] = useState(true)\n  const [theme, setTheme] = useState('dark')\n\n  useEffect(() => {\n    setLoading(false)\n  }, [])\n\n  return loading ? \n    <StyledSpinner/> : \n    <Container id='cont' style={{width:'100%',height:'100vh'}}>\n      <Login theme={theme}/>\n      <Chat setTheme={setTheme} theme={theme}/>\n    </Container>\n}\n\nexport default App","export const setConnectedUsers = data => dispatch => {\n  dispatch ({\n    type: 'SET_CONNECTED_USERS',\n    data\n  })\n}\n\nconst reducer = (state = [], action) => {\n  switch (action.type) {\n  case 'SET_CONNECTED_USERS':\n    return action.data\n  default:\n    return state\n  }\n}\nexport default reducer","import React from 'react'\nimport ReactDOM from 'react-dom/client'\nimport App from './App'\nimport { Provider } from 'react-redux'\nimport { composeWithDevTools } from 'redux-devtools-extension'\nimport { createStore, applyMiddleware, combineReducers } from 'redux'\nimport thunk from 'redux-thunk'\nimport messageReducer from './reducers/messageReducer'\nimport loggedUserReducer from './reducers/loggedUserReducer'\nimport channelsReducer from './reducers/channelsReducer'\nimport selectedChannelReducer from './reducers/selectedChannelReducer'\nimport pictureService from './services/pictures'\nimport usersReducer from './reducers/usersReducer'\nimport noteReducer from './reducers/noteReducer'\nimport errorReducer from './reducers/errorReducer'\nimport gapiReducer from './reducers/gapiReducer'\nimport pictureReducer from './reducers/pictureReducer'\nimport htmlReducer from './reducers/htmlReducer'\nimport connectedUsersReducer from './reducers/connectedUsersReducer'\nimport io from 'socket.io-client'\n\nconst createMySocketMiddleware = () => {\n  return storeAPI => {\n    //let socket = io('ws://localhost:3003')\n    let socket = io('wss://visualchat.onrender.com')\n\t\t\n    socket.on('message', (data) => {\n      if(storeAPI.getState().channel.id === data.channelID) {\n        storeAPI.dispatch({\n          type : 'SOCKET_MESSAGE_RECEIVED',\n          data : { channel: data.channelID, messages: data.messages }\n        })\n      }\n    })\n    socket.on('add_note', (data) => {\n      if(storeAPI.getState().channel.id === data.channelID) {\n        storeAPI.dispatch({\n          type : 'SOCKET_ADD_NOTE',\n          data : data.note\n        })\n      }\n    })\n    socket.on('add_html', (data) => {\n      if(storeAPI.getState().channel.id === data.channelID) {\n        storeAPI.dispatch({\n          type : 'SOCKET_ADD_HTML',\n          data : data.html\n        })\n      }\n    })\n    socket.on('callback', async (data) => {\n      if(storeAPI.getState().channel.id === data.id) {\n      if(storeAPI.getState().loggedUser.token !== data.token){\n        const pictures = await pictureService.getPictures(storeAPI.getState().channel.id, storeAPI.getState().loggedUser)\n        storeAPI.dispatch({\n          type: 'INIT_PICTURES',\n          data: pictures\n        })\n      }\n    }})\n    socket.on('delete_note', (data) => {\n      if(storeAPI.getState().channel.id === data.channelID) {\n        storeAPI.dispatch({\n          type : 'SOCKET_DELETE_NOTE',\n          data : data.noteID\n        })\n      }\n    })\n    socket.on('set_note', (data) => {\n      if(storeAPI.getState().channel.id === data.channelID) {\n        storeAPI.dispatch({\n          type : 'SOCKET_SET_NOTE',\n          data : data.note\n        })\n      }\n    })\n    socket.on('set_html', (data) => {\n      if(storeAPI.getState().channel.id === data.channelID) {\n        storeAPI.dispatch({\n          type : 'SOCKET_SET_HTML',\n          data : data.html\n        })\n      }\n    })\n    socket.on('myError', (data) => {\n      storeAPI.dispatch({\n        type : 'SET_ERROR',\n        data\n      })\n    })\n    socket.on('channel', data => {\n      if(data.users.find(u => u === storeAPI.getState().loggedUser.userId)){\n        storeAPI.dispatch({\n          type: 'SOCKET_ADD_CHANNEL',\n          data\n        })\n      }\n    })\n    socket.on('set_connected_users', data => {\n      storeAPI.dispatch({\n        type: 'SET_CONNECTED_USERS',\n        data\n      })\n    })\n    socket.on('reconnect', () => {\n      if(storeAPI.getState().loggedUser) socket.emit('action',{type: 'SET_USER',\n        data:storeAPI.getState().loggedUser})\n      if(storeAPI.getState().channel) socket.emit('action',{type: 'SET_CHANNEL',\n        data:{user:storeAPI.getState().loggedUser.username,\n          name:storeAPI.getState().channel.name,\n          token: storeAPI.getState().loggedUser.token}})\n    })\n\n    return next => action => {\n      if( action.type === 'SEND_WEBSOCKET_MESSAGE' ||\n\t\t\t\taction.type === 'CREATE_CHANNEL' ||\n\t\t\t\taction.type === 'ADD_NOTE' ||\n\t\t\t\taction.type === 'SET_NOTE' ||\n        action.type === 'CALLBACK' ||\n\t\t\t\taction.type === 'DELETE_NOTE' ||\n\t\t\t\taction.type === 'SET_USER' ||\n\t\t\t\taction.type === 'USER_LOGOUT' ||\n        action.type === 'SET_HTML' ||\n\t\t\t\taction.type === 'ADD_HTML' ||\n\t\t\t\taction.type === 'SET_CHANNEL') {\n\t\t\t\t\t\n        socket.emit('action',action)\n\n        if(action.type === 'SEND_WEBSOCKET_MESSAGE' || action.type === 'SET_NOTE' || action.type === 'SET_USER' || action.type === 'USER_LOGOUT' || action.type === 'SET_CHANNEL')\n          return next(action)\n        else return\n      }\n      return next(action)\n    }\n  }\n}\n\n\nconst reducer = combineReducers({\n  messages: messageReducer,\n  loggedUser: loggedUserReducer,\n  channels: channelsReducer,\n  gapi: gapiReducer,\n  pictures: pictureReducer,\n  channel: selectedChannelReducer,\n  users: usersReducer,\n  htmls: htmlReducer,\n  notes: noteReducer,\n  error: errorReducer,\n  connectedUsers: connectedUsersReducer\n})\n\nconst rootReducer = (state, action) => {\n  if (action.type === 'USER_LOGOUT') state = undefined\n  return reducer(state, action)\n}\n\nconst store = createStore(rootReducer,\n  composeWithDevTools(\n    applyMiddleware(thunk,createMySocketMiddleware())\n  )\n)\nconst root = ReactDOM.createRoot(document.getElementById('root'));\nconst render = () => {\n  root.render(\n    <Provider store={store}>\n      <App />\n    </Provider>\n  )\n}\n\nrender()\nstore.subscribe(render)\n"],"sourceRoot":""}